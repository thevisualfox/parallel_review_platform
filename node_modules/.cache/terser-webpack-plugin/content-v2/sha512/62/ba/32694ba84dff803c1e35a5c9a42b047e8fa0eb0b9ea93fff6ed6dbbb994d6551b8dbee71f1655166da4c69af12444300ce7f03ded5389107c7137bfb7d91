{"code":"!function(e){function t(t){for(var n,c,i=t[0],l=t[1],s=t[2],m=0,p=[];m<i.length;m++)c=i[m],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var l=r[i];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={main:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,\"a\",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p=\"/build/app/\";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;o.push([\"9XVo\",0]),r()}({\"+Bf/\":function(e,t,r){e.exports=r.p+\"img/success.c9b1caae.svg\"},\"/5e6\":function(e,t,r){e.exports=r.p+\"img/warning.c09f2b53.svg\"},\"0QAq\":function(e,t,r){e.exports=r.p+\"img/check.6890cf07.svg\"},\"1zgo\":function(e,t,r){e.exports=r.p+\"img/archive.fa6029eb.svg\"},\"3h9j\":function(e,t,r){e.exports=r.p+\"img/close.ff2e588e.svg\"},\"8Me5\":function(e,t,r){e.exports=r.p+\"img/edit.b02ad14b.svg\"},\"9XVo\":function(e,t,r){\"use strict\";r.r(t);r(\"Km7m\"),r(\"ls82\");var n=r(\"q1tI\"),a=r.n(n),o=r(\"i8i4\"),c=r(\"PC6D\"),i=r(\"+QN0\"),l=r(\"55Ip\"),s=r(\"Ty5D\"),u=r(\"Uvq/\"),m=r(\"FGyW\"),p=r(\"y6dH\"),d=r(\"yzbm\"),f=r(\"8PNI\"),v=r(\"ATyU\"),b=r(\"SR//\"),g=r(\"yqFz\"),y=r.n(g),h=r(\"RClv\"),E=r.n(h),j=[.65,0,.35,1],w={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:j,duration:.2}},O={initial:{y:200,opacity:0},animate:{y:0,opacity:1,transition:{type:\"spring\",damping:42,stiffness:800}},exit:{y:200,opacity:0,transition:{type:\"spring\",damping:42,stiffness:1200}}},x={initial:{y:\"100%\"},animate:{y:\"0%\",transition:{type:\"spring\",damping:41,stiffness:600}},exit:{y:\"100%\",transition:{type:\"spring\",damping:41,stiffness:1200}}},N={initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{ease:j,duration:.2}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{initial:{opacity:0,y:35},animate:{opacity:1,y:0,transition:{type:\"spring\",damping:30,stiffness:450,delay:.035*e}},exit:{opacity:0,scale:.25,transition:{type:\"spring\",damping:30,stiffness:600}}}},S=r(\"vDqi\"),P=r.n(S);function I(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){I(o,n,a,c,i,\"next\",e)}function i(e){I(o,n,a,c,i,\"throw\",e)}c(void 0)}))}}var C=function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.formRef,n=new FormData(r.current),e.next=4,P.a.post(\"/api/signup\",n);case 4:return a=e.sent,e.abrupt(\"return\",null==a?void 0:a.data);case 6:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=k(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.formRef,n=new FormData(r.current),e.next=4,P.a.post(\"/api/login\",{email:n.get(\"email\"),password:n.get(\"password\")});case 4:return a=e.sent,e.abrupt(\"return\",null==a?void 0:a.data);case 6:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=k(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get(\"/api/logout\");case 2:return t=e.sent,e.abrupt(\"return\",null==t?void 0:t.data);case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function D(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){D(o,n,a,c,i,\"next\",e)}function i(e){D(o,n,a,c,i,\"throw\",e)}c(void 0)}))}}var F=function(){var e=L(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,e.next=3,P.a.get(\"/api/projects/get/\".concat(r));case 3:return n=e.sent,e.abrupt(\"return\",null==n?void 0:n.data);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=L(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectId,e.next=3,P.a.get(\"/api/project/get/\".concat(r));case 3:return n=e.sent,e.abrupt(\"return\",null==n?void 0:n.data);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=L(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.post(\"/api/projects/add\");case 2:return t=e.sent,e.abrupt(\"return\",null==t?void 0:t.data);case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=L(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectIds,n=new FormData,r.forEach((function(e){return n.append(\"projects[]\",e)})),e.next=5,P.a.post(\"/api/projects/delete\",n);case 5:return a=e.sent,e.abrupt(\"return\",null==a?void 0:a.data);case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=L(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectIds,n=t.userId,a=new FormData,r.forEach((function(e){return a.append(\"projects[]\",e)})),e.next=5,P.a.post(\"/api/projects/leave/\".concat(n),a);case 5:return o=e.sent,e.abrupt(\"return\",null==o?void 0:o.data);case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=L(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.formRef,n=t.id,a=new FormData(r.current),e.next=4,P.a.post(\"/api/projects/edit/\".concat(n),a);case 4:return o=e.sent,e.abrupt(\"return\",null==o?void 0:o.data);case 6:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function q(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function Q(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){q(o,n,a,c,i,\"next\",e)}function i(e){q(o,n,a,c,i,\"throw\",e)}c(void 0)}))}}var $=function(){var e=Q(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectImageId,e.next=3,P.a.get(\"/api/images/get/\".concat(r));case 3:return n=e.sent,e.abrupt(\"return\",null==n?void 0:n.data);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Q(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectId,n=t.images,a=new FormData,n.forEach((function(e){return a.append(\"images[]\",e)})),e.next=5,P.a.post(\"/api/images/add/\".concat(r),a);case 5:return o=e.sent,e.abrupt(\"return\",null==o?void 0:o.data);case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Q(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectId,n=t.projectImageIds,a=new FormData,n.forEach((function(e){return a.append(\"projectImages[]\",e)})),e.next=5,P.a.post(\"/api/images/delete/\".concat(r),a);case 5:return o=e.sent,e.abrupt(\"return\",null==o?void 0:o.data);case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Q(regeneratorRuntime.mark((function e(t){var r,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.formRef,n=t.id,a=new FormData(r.current),e.next=4,P.a.post(\"/api/images/edit/\".concat(n),a);case 4:return o=e.sent,e.abrupt(\"return\",null==o?void 0:o.data);case 6:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function W(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function K(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){W(o,n,a,c,i,\"next\",e)}function i(e){W(o,n,a,c,i,\"throw\",e)}c(void 0)}))}}var H=function(){var e=K(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,n=\"/api/users/get\",r&&(n=\"\".concat(n,\"/\").concat(r)),e.next=5,P.a.get(n);case 5:return a=e.sent,e.abrupt(\"return\",null==a?void 0:a.data);case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=K(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get(\"/api/users/get/all\");case 2:return t=e.sent,e.abrupt(\"return\",null==t?void 0:t.data);case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=K(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectId,n=t.email,e.next=3,P.a.post(\"/api/users/add/\".concat(r),{email:n});case 3:return a=e.sent,e.abrupt(\"return\",null==a?void 0:a.data);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=K(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectId,n=t.userId,e.next=3,P.a.post(\"/api/users/delete/\".concat(r),{userId:n});case 3:return a=e.sent,e.abrupt(\"return\",null==a?void 0:a.data);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=\"current_user\",te=\"project_by_user\",re=\"project_by_id\",ne=\"project_image_by_id\",ae=\"global_users\";function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e){var t=e.projectId,r=e.positition,n=void 0===r?\"left\":r,o=e.children,c=Object(i.b)(),l=Object(d.a)({accept:\"image/*\",noClick:!0,onDrop:function(e){return v(\"add\",{images:e})}}),s=l.getRootProps,u=l.getInputProps,m=l.isDragActive,p=Object(b.a)(Y,{onSuccess:function(){return c.invalidateQueries([re,t])}}),f=Object(b.a)(X,{onSuccess:function(){return c.invalidateQueries([re,t])}}),v=function(e,r){\"add\"===e&&p.mutate(ie({projectId:t},r)),\"delete\"===e&&f.mutate(ie({projectId:t},r))};return a.a.createElement(\"div\",oe({className:\"dropzone\"},s()),a.a.createElement(\"input\",u()),a.a.createElement(ue,{addImageLoading:p.isLoading,updateProjectImages:v,isParentDragActive:m,positition:n}),a.a.createElement(\"div\",{className:\"row row--equalized gutters-5\"},o({updateProjectImages:v,isLoading:f.isLoading})))}var ue=function(e){var t=e.addImageLoading,r=e.updateProjectImages,n=e.isParentDragActive,o=e.positition,c=Object(d.a)({accept:\"image/*\",noDragEventsBubbling:!0,onDrop:function(e){return r(\"add\",{images:e})}}),i=c.getRootProps,l=c.getInputProps,s=c.isDragActive;return a.a.createElement(\"div\",oe({className:\"dropzone\"},i()),a.a.createElement(\"input\",l()),a.a.createElement(f.a,null,(s||n)&&a.a.createElement(v.a.div,oe({},w,{className:\"dropzone__overlay\"}),a.a.createElement(\"div\",{className:\"icon-wrapper icon-wrapper--secondary\",style:{\"--size\":75}},a.a.createElement(p.a,{wrapper:\"svg\",className:\"icon icon--30 text-secondary\",src:E.a})))),a.a.createElement(v.a.button,oe({},N,{key:\"add-project\",type:\"button\",className:\"icon-wrapper icon-wrapper--interactive icon-wrapper--secondary btn btn-link btn--add btn--add-\".concat(o),style:{\"--size\":75}}),a.a.createElement(Ue,{loading:t,classes:{loaderClasses:\"position-absolute d-flex text-secondary\"},loaderSize:30},a.a.createElement(p.a,{wrapper:\"svg\",className:\"icon icon--30 text-secondary\",src:y.a}))))};function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pe(e){var t=e.toggleModal,r=e.children,n=e.domElement,c=e.variant,i=void 0===c?\"default\":c,l=function(){return a.a.createElement(\"div\",{key:\"custom-modal\",className:\"custom-modal custom-modal--\".concat(i)},a.a.createElement(v.a.div,me({className:\"custom-modal__overlay\",onClick:t},w)),a.a.createElement(v.a.article,me({key:\"custom-modal__content\",className:\"custom-modal__content\"},x),a.a.createElement(\"div\",{className:\"container-fluid d-flex flex-grow-1\"},r)))};return n?Object(o.createPortal)(l(),n):l()}var de=r(\"3h9j\"),fe=r.n(de),ve=r(\"qzzo\"),be=r.n(ve),ge=r(\"qSnX\"),ye=r.n(ge);function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ee(e){var t=e.user,r=e.project,n=void 0===r?{}:r,o=e.variant,c=void 0===o?\"default\":o,l=e.size,s=void 0===l?\"md\":l,u=Object(i.b)(),m=n.id,d=n.author,f=t.id,v=t.email===d,g=[\"user\",\"user--\".concat(s),\"user--\".concat(c),v&&\"user--author\"].join(\" \"),y=Object(b.a)(Z,{onSuccess:function(){return u.invalidateQueries([re,m])}});return a.a.createElement(\"div\",{className:g},a.a.createElement(je,he({isLoading:y.isLoading},t),\"interactive\"===c&&!v&&a.a.createElement(\"button\",{className:\"user__action btn btn-link p-0\",type:\"button\",onClick:function(){return y.mutate({projectId:m,userId:f})}},a.a.createElement(p.a,{wrapper:\"svg\",className:\"user__action-icon icon icon--14\",src:ye.a}))),v&&a.a.createElement(\"div\",{className:\"user__status user__status--leader\"},a.a.createElement(p.a,{wrapper:\"svg\",className:\"user__status-icon icon text-tertiary mt-0\",src:be.a})))}var je=function(e){var t=e.username,r=e.userColor,n=e.isLoading,o=e.children,c=t.split(\" \").map((function(e){return e[0].toUpperCase()}));return a.a.createElement(\"div\",{className:\"user__avatar\",style:{\"--theme\":r}},a.a.createElement(Ue,{loading:n,loaderSize:16},a.a.createElement(\"span\",{className:\"user__initials\"},c),o))},we=function(e){var t=e.username,r=e.email;return a.a.createElement(\"div\",{className:\"d-flex flex-column ml-3\"},a.a.createElement(\"p\",{className:\"mb-0\"},t),a.a.createElement(\"p\",{className:\"text-muted--60 text--xs\"},r))};function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Se(e){var t=e.users,r=e.layout,n=void 0===r?\"full\":r,o=_e(e,[\"users\",\"layout\"]),c=\"minimal\"===n?7:1/0;return a.a.createElement(\"div\",{className:\"row align-items-center gutters-1\"},a.a.createElement(f.a,null,t.slice(0,c).map((function(e){return a.a.createElement(v.a.div,Oe({layout:!0},N,{className:\"col-auto\",key:e.id}),a.a.createElement(Ee,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({user:e},o)))})),\"minimal\"===n&&t.length>7&&a.a.createElement(v.a.div,Oe({layout:!0},N,{className:\"col-auto\",key:\"more\"}),a.a.createElement(\"p\",{className:\"text--xs text-muted--70 ml-1\"},\"+ \",t.length-c))))}var Pe=r(\"X931\"),Ie=r.n(Pe);function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ce(e){var t=e.user,r=e.userIndex,o=e.handleClick,c=e.isFocused,i=e.setFocusedUser,l=e.isLoading;Object(n.useEffect)((function(){c&&i(r)}),[c]),Object(n.useEffect)((function(){return function(){return i(0)}}),[]);var s=function(e){i(\"enter\"===e?r:0)};return a.a.createElement(\"button\",{className:\"user user--select \".concat(c&&\"is-focused\",\" user--xl\"),onClick:function(){return o(t.email)},onMouseEnter:function(){return s(\"enter\")},onMouseLeave:function(){return s(\"leave\")}},a.a.createElement(\"div\",{className:\"d-flex align-items-center\"},a.a.createElement(je,ke({isLoading:l&&c},t)),a.a.createElement(we,t),a.a.createElement(\"div\",{className:\"user__add text-secondary rounded-circle ml-auto\"},a.a.createElement(p.a,{wrapper:\"svg\",className:\"user__add-icon icon icon--12 text-secondary\",src:Ie.a}))))}function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e){var t=e.title,r=e.subtitle,n=e.SubtitleComponent,c=e.boxOpen,i=e.toggleBox,l=e.children,s=e.user,u=e.position,m=void 0===u?{}:u,d=e.renderOnBody,b=void 0===d||d,g=e.boxRef,y=e.extensionClasses,h=e.animate,E=void 0===h||h,j=m.left,x=void 0===j?0:j,N=m.top,_=void 0===N?0:N,S=E?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},O):{},P=function(){return a.a.createElement(f.a,null,c&&a.a.createElement(v.a.div,{ref:g,layout:!0,transition:{duration:.2},className:\"box \".concat(b&&\"box--center\",\" \").concat(y),style:{\"--left\":x,\"--top\":_}},b&&a.a.createElement(v.a.div,Re({className:\"box-overlay\"},w,{onClick:i})),a.a.createElement(v.a.div,Re({key:\"box-content\",className:\"box__content border p-5\"},S),a.a.createElement(\"div\",{className:\"box__header d-flex align-items-start\"},a.a.createElement(\"div\",{className:\"d-flex align-items-center\"},s&&a.a.createElement(Ee,{user:s,size:\"xl\"}),a.a.createElement(\"div\",{className:\"d-flex flex-column \".concat(s&&\"ml-3\")},a.a.createElement(\"p\",{className:\"text--lg mb-0\"},t),(n||r)&&a.a.createElement(\"p\",{className:\"text-muted--60 mb-0\"},n?a.a.createElement(n,null):r))),a.a.createElement(\"button\",{type:\"button\",className:\"custom-modal__close btn btn-link ml-auto\",onClick:i},a.a.createElement(p.a,{wrapper:\"svg\",className:\"icon icon--12\",src:fe.a}))),a.a.createElement(\"div\",{className:\"box__body d-flex mt-4\"},l))))};return b?Object(o.createPortal)(P(),document.body):P()}var Fe=r(\"iae6\");function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ue(e){var t=e.loading,r=e.children,n=e.loaderSize,o=void 0===n?40:n,c=e.classes,i=void 0===c?{}:c,l=i.loaderClasses,s=void 0===l?\"position-absolute d-flex\":l,u=i.defaultClasses,m=void 0===u?\"\":u;return a.a.createElement(f.a,{initial:!1},t?a.a.createElement(v.a.div,ze({key:\"loader\",className:s},N),a.a.createElement(Fe.a,{color:\"inherit\",size:o})):a.a.createElement(v.a.div,ze({key:\"default\",className:m},N),r))}var Te=r(\"de8u\");function Be(e){var t=e.isLoading,r=e.children;return a.a.createElement(f.a,null,t?a.a.createElement(v.a.div,w,a.a.createElement(Te.a,{color:\"secondary\"})):a.a.createElement(\"div\",{key:\"children\"},r))}var Me=r(\"NKCw\");function qe(){return a.a.createElement(\"header\",{className:\"main-header\"},a.a.createElement(\"div\",{className:\"container-fluid px-5 pt-5 px-lg-6 pt-lg-6 px-xl-12 pt-xl-12\"},a.a.createElement(\"div\",{className:\"main-header__logo logo\"},a.a.createElement(l.b,{className:\"logo__link text-reset\",to:Fr.login,title:\"Parallel Dashboard\"},a.a.createElement(\"h2\",{className:\"logo__title text-uppercase mb-0\"},\"Parallel\"),a.a.createElement(\"p\",{className:\"logo__subtitle text-uppercase font-weight-light mt-n1\"},\"Dashboard\")))))}function Qe(){var e=Object(s.g)(),t=Object(b.a)(A,{onSuccess:function(){e.push(Fr.login),Object(m.b)(a.a.createElement(Ge,{message:\"Successfully logged out!\",appearance:\"success\"}))},onError:function(){return Object(m.b)(a.a.createElement(Ge,{message:\"Something went wrong!\",appearance:\"error\"}))}});return a.a.createElement(\"header\",{className:\"main-header main-header--projects\"},a.a.createElement(\"div\",{className:\"container-fluid\"},a.a.createElement(\"div\",{className:\"main-header__wrapper d-flex align-items-end\"},a.a.createElement(\"div\",{className:\"main-header__logo logo\"},a.a.createElement(l.b,{className:\"logo__link text-reset\",to:Fr.projects,title:\"Parallel Dashboard\"},a.a.createElement(\"h2\",{className:\"logo__title text-uppercase text-white mb-0\"},\"Parallel\"),a.a.createElement(\"p\",{className:\"logo__subtitle text-uppercase text-white font-weight-light mt-n1\"},\"Dashboard\"))),a.a.createElement(\"div\",{className:\"main-header__nav ml-auto\"},a.a.createElement(\"ul\",{className:\"nav nav--primary\"},a.a.createElement(\"li\",{className:\"nav-item\"},a.a.createElement(\"button\",{href:\"{{ path('app_logout') }}\",title:\"Logout\",className:\"nav-link btn btn-link text-reset\",onClick:function(){return t.mutate()}},a.a.createElement(\"span\",{className:\"nav-text\"},\"Logout\"))))))))}var $e=r(\"YaYb\"),Ye=r.n($e),Xe=r(\"/5e6\"),Ve=r.n(Xe),We=r(\"ScKw\"),Ke=r.n(We),He=r(\"+Bf/\"),Je=r.n(He);function Ge(e){var t=e.message,r=e.appearance,n=e.closeToast,o={warning:{title:\"Warning\",icon:Ve.a},error:{title:\"Error\",icon:Ke.a},success:{title:\"Success\",icon:Je.a}};return a.a.createElement(\"div\",{className:\"alert alert--notification\",role:\"alert\",\"data-alert\":!0},a.a.createElement(\"div\",{className:\"d-flex align-items-center w-100\"},a.a.createElement(\"div\",{className:\"alert__icon-wrapper alert__icon-wrapper--\".concat(r,\" mr-2\")},a.a.createElement(p.a,{wrapper:\"svg\",className:\"alert__icon icon icon--12\",src:o[r].icon})),a.a.createElement(\"p\",{className:\"mb-0\"},o[r].title),a.a.createElement(\"button\",{className:\"alert__btn btn btn-link ml-auto\",type:\"button\",onClick:n},a.a.createElement(p.a,{wrapper:\"svg\",className:\"icon icon--10\",src:Ye.a}))),a.a.createElement(\"span\",{className:\"alert__message text--xs text-muted--70 mr-lg-8\"},t))}var Ze=r(\"H1Be\"),et=r.n(Ze),tt=r(\"CrUY\"),rt=r.n(tt);function nt(){return a.a.createElement(\"div\",{className:\"background\"},a.a.createElement(\"img\",{className:\"background__image\",src:et.a,srcSet:rt.a,alt:\"Background\"}))}function at(e){var t,r=e.title,o=e.type,c=void 0===o?\"button\":o,i=e.theme,l=void 0===i?\"secondary\":i,s=e.size,u=void 0===s?\"sm\":s,m=e.extensionClasses,p=void 0===m?\"\":m,d=e.onClick,f=void 0===d?function(){}:d,v=e.isLoading,b=void 0!==v&&v,g=Object(n.useRef)(),y=null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect().height;return a.a.createElement(\"button\",{ref:g,className:\"btn btn-\".concat(u,\" btn-\").concat(l,\" \").concat(p,\" d-flex align-items-center\"),style:{height:y},type:c,onClick:f},a.a.createElement(Ue,{loading:b,loaderSize:16,classes:{loaderClasses:\"position-absolute d-flex text-secondary\"}},a.a.createElement(\"span\",{className:\"btn__text\"},r)))}function ot(e){return function(e){if(Array.isArray(e))return lt(e)}(e)||function(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}(e)||it(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&(\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"]);if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||it(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function it(e,t){if(e){if(\"string\"==typeof e)return lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(e,t):void 0}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function st(){var e=ct(Object(n.useState)([]),2),t=e[0],r=e[1];return{selected:t,updateSelected:function(e){r((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat(ot(t),[e])}))},resetSelected:function(){return r([])}}}function ut(e){return function(e){if(Array.isArray(e))return mt(e)}(e)||function(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}(e)||function(e,t){if(!e)return;if(\"string\"==typeof e)return mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mt(e,t)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(n.useEffect)((function(){document.title=\"\".concat(e?e+\" | Parallel Dashboard\":document.title)}),ut(t))}function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var vt=r(\"0QAq\"),bt=r.n(vt);function gt(e){var t=e.project,r=e.selected,n=e.updateSelected,o=t.title,c=t.projectImages,i=t.users,s=t.author,u=t.id;return a.a.createElement(l.b,{to:\"projects/\".concat(u).concat(location.search),title:o,className:\"card card--link card--product \".concat(r.includes(u)&&\"is-selected\")},a.a.createElement(xt,{projectImages:c}),a.a.createElement(\"div\",{className:\"card-body\"},a.a.createElement(\"div\",{className:\"d-flex flex-column\"},a.a.createElement(\"p\",{className:\"mb-2\"},o||\"Add a nice title\"),a.a.createElement(\"div\",{className:\"d-flex align-items-center\"},a.a.createElement(Se,{users:i,project:{author:s},layout:\"minimal\"})))),a.a.createElement(\"div\",{className:\"card__select\"},a.a.createElement(\"div\",{className:\"card__select-toggle\",onClick:function(e){e.preventDefault(),n(u)}},a.a.createElement(p.a,{wrapper:\"svg\",className:\"card__select-icon icon icon--8\",src:bt.a}))))}var yt=r(\"X8eM\"),ht=r.n(yt);function Et(){return(Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&(\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"]);if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return wt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wt(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ot(e){var t=e.setNewProjectId,r=jt(Object(n.useState)(null),2),o=r[0],c=r[1],l=jt(Object(n.useState)(!1),2),s=l[0],m=l[1],d=Object(i.b)(),g=Object(u.a)([re,o],(function(){return z({projectId:o})}),{enabled:!!o}).data;Object(n.useEffect)((function(){t(o)}),[o]);var y=Object(b.a)(U,{onSuccess:function(e){var t=e.id;return c(t)}}),h=Object(b.a)(M,{onSuccess:function(){return j()}}),E=function(){m(!s),s||y.mutate(),s&&(setTimeout((function(){c(null)}),250),j())},j=function(){return d.invalidateQueries(te)};return a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a.button,Et({},N,{key:\"add-project\",type:\"button\",className:\"icon-wrapper icon-wrapper--interactive icon-wrapper--secondary btn btn-link btn--add btn--add-right\",style:{\"--size\":75},onClick:E}),a.a.createElement(p.a,{wrapper:\"svg\",className:\"icon icon--30 text-secondary\",src:ht.a})),a.a.createElement(f.a,null,s&&a.a.createElement(Bt,{project:g,updateProject:function(e){return h.mutate({formRef:e,id:o})},toggleModal:E})))}function xt(e){var t=e.projectImages[0]||{},r=t.phases,n=void 0===r?[]:r,o=t.title,c=(n[n.length-1]||{}).image;return a.a.createElement(\"div\",{className:\"card__image border m-2\"},c&&a.a.createElement(\"img\",{className:\"card-img-top\",src:c,srcSet:\"\".concat(c,\" 2x\"),alt:o}),!c&&a.a.createElement(p.a,{wrapper:\"svg\",className:\"icon icon--48 text-muted--40\",src:y.a}))}var Nt=r(\"g3U7\");function _t(){return(_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function St(e){var t,r=e.filteredUsers,n=e.query,o=e.handleClick,c=e.focusedUser,i=e.setFocusedUser,l=e.userMutationLoading,s=e.globalUsersLoading;return a.a.createElement(f.a,null,\"\"!==n&&a.a.createElement(v.a.ul,_t({},w,{className:\"box__list list\"}),(t={email:n,username:\"New user\",userColor:\"#CC25E8\"},r.length>0?r.map((function(e,t){return a.a.createElement(v.a.li,_t({},w,{key:e.id,className:\"list__item vr-3\"}),a.a.createElement(Ce,{user:e,userIndex:t,handleClick:o,setFocusedUser:i,isFocused:t===c&&n,isLoading:l}))})):s?void 0:a.a.createElement(v.a.li,_t({},w,{key:\"New user\",className:\"list__item is-focused vr-3\"}),a.a.createElement(Ce,{user:t,userIndex:t,handleClick:o,setFocusedUser:i,isFocused:n.length,isLoading:l})))))}function Pt(e){return/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(e)}var It=\"ROLE_ADMIN\",kt=\"ROLE_USER\",Ct=\"ROLE_USER_BASIC\";function Rt(e,t){var r,n=t.reviewPos,a=Number(t.xPercent),o=Number(t.yPercent),c=(null==e||null===(r=e.current)||void 0===r?void 0:r.getBoundingClientRect())||{},i=c.width,l=void 0===i?400:i,s=c.height,u=void 0===s?228:s,m=30,p=30;return a+l/window.innerWidth*100>100&&(m=-l-10),o+u/(window.innerHeight-n.top)*100>100&&(p=-u-10),{left:\"\".concat(m,\"px\"),top:\"\".concat(p,\"px\")}}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&(\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"]);if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return Dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dt(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lt(e){var t=e.users,r=e.project,o=e.toggleBox,c=At(Object(n.useState)(\"\"),2),l=c[0],s=c[1],m=At(Object(n.useState)(0),2),p=m[0],d=m[1],f=Object(u.a)(ae,J),v=f.data,g=void 0===v?[]:v,y=f.isLoading,h=function(e,t,r){var n=r.toLowerCase(),a=t.map((function(e){return e.email}));return e.filter((function(e){var t=e.email;return!a.includes(t)})).filter((function(e){var t=e.email,r=e.username;return t.toLowerCase().includes(n)||r.toLowerCase().includes(n)}))}(g,t,l),E=Object(n.useRef)(),j=Object(i.b)(),w=Object(b.a)(G,{onSuccess:function(){j.invalidateQueries([re,r.id]),j.invalidateQueries(ae),E.current.select(),s(\"\")}});return a.a.createElement(\"div\",{className:\"d-flex flex-column flex-grow-1\"},a.a.createElement(Se,{users:t,project:r,variant:\"interactive\",size:\"xl\"}),a.a.createElement(\"div\",{className:\"position-relative\"},a.a.createElement(\"label\",{className:\"sr-only\",htmlFor:\"userQuery\"},\"Search name or email\"),a.a.createElement(\"input\",{className:\"form-control form-control-sm form-control--search\",id:\"userQuery\",name:\"userQuery\",placeholder:\"Search name or email\",type:\"text\",autoFocus:!0,value:l,onChange:function(e){var t=e.target.value;return s(t)},onKeyDown:function(e){if([\"Enter\",\"Tab\"].includes(e.key)&&(e.preventDefault(),\"\"!==l&&null!==p)){var t=p in h?h[p]:p;Pt(t.email)&&w.mutate({projectId:r.id,email:t.email})}},autoComplete:\"off\",ref:E}),a.a.createElement(St,{filteredUsers:h,query:l,handleClick:function(e){Pt(e)&&w.mutate({projectId:r.id,email:e})},focusedUser:p,setFocusedUser:d,userMutationLoading:w.isLoading,globalUsersLoading:y})),a.a.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center mt-4\"},a.a.createElement(at,{title:\"Done\",onClick:o,extensionClasses:\"w-50 justify-content-center\"})))}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&(\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"]);if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return zt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zt(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ut(e){var t=e.users,r=e.project,o=Ft(Object(n.useState)(!1),2),c=o[0],i=o[1],l=function(){return i(!c)};return a.a.createElement(\"div\",{className:\"position-relative ml-2\"},a.a.createElement(\"button\",{className:\"btn btn-link user user--lg user--add\",type:\"button\",onClick:l},a.a.createElement(\"span\",{className:\"user__avatar\"},a.a.createElement(\"div\",{className:\"user__initials\"},a.a.createElement(p.a,{wrapper:\"svg\",className:\"user__icon icon icon--12 mt-0\",src:Ie.a})))),a.a.createElement(Le,{title:\"Select users\",subtitle:\"Choose some users to collaborate with.\",boxOpen:c,toggleBox:l},a.a.createElement(Lt,{users:t,project:r,toggleBox:l})))}function Tt(){return(Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Bt(e){var t=e.project,r=void 0===t?{}:t,o=e.updateProject,c=e.toggleModal,i=r.id,l=void 0===i?null:i,s=r.title,u=void 0===s?\"\":s,m=r.projectImages,d=void 0===m?[]:m,b=r.users,g=void 0===b?[]:b,y=Object(n.useRef)();return a.a.createElement(pe,{toggleModal:c,domElement:document.body},a.a.createElement(\"form\",{ref:y,method:\"POST\",className:\"custom-modal__form\",onSubmit:function(e){e.preventDefault(),c()}},a.a.createElement(\"div\",{className:\"custom-modal__header d-flex align-items-center pt-6 pt-md-12 pb-3\"},a.a.createElement(\"label\",{className:\"sr-only\",htmlFor:\"projectTitle\"},u),a.a.createElement(\"input\",{type:\"text\",className:\"form-control form-control--clear text--xl\",id:\"projectTitle\",name:\"title\",placeholder:\"The project name\",onBlur:function(){return o(y)},autoFocus:!0}),a.a.createElement(\"button\",{type:\"button\",className:\"custom-modal__close btn btn-link ml-auto\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",onClick:c,tabIndex:\"-1\"},a.a.createElement(p.a,{wrapper:\"svg\",className:\"icon icon--14\",src:fe.a}))),a.a.createElement(\"div\",{className:\"custom-modal__body pt-3 pb-12\"},a.a.createElement(\"div\",{className:\"row gutters-2\"},a.a.createElement(\"div\",{className:\"col-6\"},a.a.createElement(\"label\",{className:\"sr-only\",htmlFor:\"projectDescription\"},\"What's this project about?\"),a.a.createElement(Nt.a,{className:\"form-control form-control--text form-control--clear mb-10\",id:\"projectDescription\",name:\"description\",placeholder:\"What's this project about?\",onBlur:function(){return o(y)}})),a.a.createElement(\"div\",{className:\"col-auto d-flex align-items-baseline ml-auto\"},a.a.createElement(Se,{users:g,project:r,size:\"lg\"}),a.a.createElement(Ut,{users:g,project:r}))),a.a.createElement(se,{projectId:l,projectImages:d},(function(e){var t=e.updateProjectImages,r=e.isLoading;return a.a.createElement(f.a,null,d.map((function(e,n){return a.a.createElement(Mt,{key:e.id,projectImage:e,projectImageIndex:n,updateProjectImages:t,isLoading:r})})))}))),a.a.createElement(\"div\",{className:\"custom-modal__footer pb-6 pb-md-12\"},a.a.createElement(\"div\",{className:\"row gutters-0 w-100\"},a.a.createElement(\"div\",{className:\"col-12 col-lg-1 ml-auto\"},a.a.createElement(\"button\",{type:\"submit\",className:\"custom-modal__btn btn btn-block btn-secondary d-flex align-items-center justify-content-center\"},a.a.createElement(v.a.span,{className:\"btn-text\"},a.a.createElement(\"span\",null,\"Save\"))))))))}var Mt=function(e){var t=e.projectImage,r=e.projectImageIndex,n=e.updateProjectImages,o=e.isLoading,c=t.title,i=t.id,l=t.phases,s=void 0===l?[]:l,u=(s[s.length-1]||{}).image;return a.a.createElement(v.a.div,Tt({layout:!0},_(r),{className:\"col-12 col-md-6 col-lg-4 col-xl-3 col-xxl-2\",key:i}),a.a.createElement(\"div\",{className:\"dropzone__container\"},a.a.createElement(\"img\",{className:\"dropzone__image img-fluid\",src:u,alt:c}),a.a.createElement(\"button\",{type:\"button\",className:\"btn btn-link dropzone__image-delete p-0\",onClick:function(e){e.stopPropagation(),n(\"delete\",{projectImageIds:[i]})}},a.a.createElement(\"div\",{className:\"dropzone__image-delete-icon icon-wrapper icon-wrapper--danger mx-auto\",style:{\"--size\":50}},a.a.createElement(Ue,{loading:o,loaderSize:20,classes:{loaderClasses:\"position-absolute d-flex text-danger\"}},a.a.createElement(p.a,{wrapper:\"svg\",className:\"icon icon--14 text-danger mt-0\",src:fe.a}))))))},qt=a.a.createContext();function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function $t(e){var t=e.selected,r=e.resetSelected,o=e.actions,c=Object(n.useContext)(qt).userRole;return a.a.createElement(v.a.div,Qt({},x,{className:\"bar bar--project\"}),a.a.createElement(\"div\",{className:\"container-fluid\"},a.a.createElement(\"div\",{className:\"row\"},a.a.createElement(\"div\",{className:\"col-auto d-flex align-items-center\"},a.a.createElement(\"button\",{type:\"button\",className:\"bar__btn btn btn-link d-inline-flex text-white\",onClick:r},a.a.createElement(p.a,{wrapper:\"svg\",className:\"icon icon--14\",src:fe.a})),a.a.createElement(\"p\",{className:\"ml-2 mb-0\"},t.length,\" selected\")),a.a.createElement(\"div\",{className:\"col-auto ml-auto\"},a.a.createElement(\"ul\",{className:\"bar__list list d-flex align-items-center\"},o.map((function(e,t){var r=e.title,n=e.theme,o=e.hasPermission,i=e.icon,l=e.iconSize,s=void 0===l?12:l,u=e.mutation,m=void 0===u?function(){}:u,d=e.isLoading,f=void 0!==d&&d;if(o.includes(c))return a.a.createElement(\"li\",{key:t,className:\"list__item\"},a.a.createElement(\"button\",{className:\"bar__btn btn btn-link d-flex align-items-center text-decoration-none\",onClick:m},a.a.createElement(\"div\",{className:\"icon-wrapper icon-wrapper--\".concat(n,\" icon-wrapper--interactive\")},a.a.createElement(Ue,{loading:f,loaderSize:12,classes:{loaderClasses:\"position-absolute d-flex text-\".concat(n)}},a.a.createElement(p.a,{wrapper:\"svg\",className:\"icon icon--\".concat(s,\" text-\").concat(n),src:i}))),a.a.createElement(\"span\",{className:\"btn__text text-white ml-2\"},r)))})))))))}var Yt=r(\"SwPm\"),Xt=r.n(Yt),Vt=r(\"1zgo\"),Wt=r.n(Vt);function Kt(){return(Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ht(e){var t=e.projects,r=e.newProjectId,o=st(),c=o.selected,l=o.updateSelected,s=o.resetSelected,u=Object(n.useContext)(qt).currentUser,m=Object(i.b)(),p=Object(b.a)(B,{onSuccess:function(){m.invalidateQueries(te),s()}}),d=Object(b.a)(T,{onSuccess:function(){m.invalidateQueries(te),s()}}),g=[{title:\"Leave\",theme:\"warning\",hasPermission:[\"user\",\"basic\"],icon:Xt.a,mutation:function(){return p.mutate({projectIds:c,userId:u.id})},isLoading:p.isLoading},{title:\"Archive\",theme:\"secondary\",hasPermission:[\"admin\"],icon:Wt.a},{title:\"Remove\",theme:\"danger\",hasPermission:[\"admin\"],icon:fe.a,iconSize:10,mutation:function(){return d.mutate({projectIds:c})},isLoading:d.isLoading}];return a.a.createElement(a.a.Fragment,null,a.a.createElement(\"h1\",{className:\"h5 text-white mb-6\"},\"Your projects\"),a.a.createElement(f.a,null,0===t.length&&a.a.createElement(v.a.p,Kt({},w,{className:\"text-white mb-0 position-absolute\"}),\"You don't have any projects yet\")),a.a.createElement(\"div\",{className:\"row row--equalized gutters-5 \".concat(c.length>0&&\"has-selections\")},a.a.createElement(f.a,null,t.filter((function(e){return e.id!==r})).map((function(e,t){return a.a.createElement(v.a.div,Kt({},_(t),{key:e.id,className:\"col-12 col-md-6 col-lg-4 col-xl-3 col-xxl-2\",layout:!0}),a.a.createElement(gt,{project:e,selected:c,updateSelected:l}))})))),a.a.createElement(f.a,null,c.length>0&&a.a.createElement($t,{selected:c,resetSelected:s,actions:g})))}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&(\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"]);if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return Gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gt(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zt=r(\"8Me5\"),er=r.n(Zt);function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&(\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"]);if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rr(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nr(e){var t=e.title,r=e.inputType,o=e.toggleBox,c=e.content,i=e.mutation,l=e.mutationId,s=e.mutationOnSuccess,u=tr(Object(n.useState)(c),2),m=u[0],p=u[1],d=Object(n.useRef)(),f=Object(n.useRef)();Object(n.useEffect)((function(){var e;null!=f&&f.current&&(null==f||null===(e=f.current)||void 0===e||e.select())}),[]);var v=Object(b.a)(i,{onSuccess:function(){s(),o()}});return a.a.createElement(\"form\",{ref:d,className:\"d-flex flex-column align-items-center flex-grow-1\",onSubmit:function(e){e.preventDefault(),v.mutate({formRef:d,id:l})}},a.a.createElement(\"label\",{className:\"sr-only\",htmlFor:r},t),a.a.createElement(Nt.a,{className:\"form-control form-control-sm form-control--text\",id:r,name:r,type:\"text\",value:m,onChange:function(e){var t=e.target.value;return p(t)},ref:f}),a.a.createElement(at,{title:\"Save\",extensionClasses:\"mt-4 w-50 justify-content-center\",isLoading:v.isLoading,type:\"submit\"}))}function ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&(\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"]);if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return ir(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ir(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sr(e){var t=e.inputType,r=e.children,o=lr(e,[\"inputType\",\"children\"]),c=cr(Object(n.useState)(!1),2),i=c[0],l=c[1],s=Object(n.useContext)(qt).userRole,u=\"Editing \".concat(t),m=function(){return l(!i)};return a.a.createElement(\"div\",{className:\"editable d-flex align-items-center position-relative\"},a.a.createElement(\"div\",{className:\"editable__content\"},r),\"admin\"===s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(\"button\",{className:\"editable__toggle btn btn-link icon-wrapper icon-wrapper--secondary icon-wrapper--interactive stretched-link ml-3\",onClick:m,style:{\"--size\":25}},a.a.createElement(p.a,{wrapper:\"svg\",className:\"icon icon--10 text-secondary\",src:er.a})),a.a.createElement(Le,{title:u,subtitle:\"Save when ready\",boxOpen:i,toggleBox:m},a.a.createElement(nr,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(r),!0).forEach((function(t){or(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({title:u,inputType:t,toggleBox:m},o)))))}function ur(e){var t=e.title,r=e.description,o=e.users,c=e.id,l=e.author,s=e.email,u={id:c,author:l,email:s},m=Object(n.useContext)(qt).userRole,p=Object(i.b)(),d=function(){p.invalidateQueries([re,c])};return a.a.createElement(\"div\",{className:\"row mb-6\"},a.a.createElement(\"div\",{className:\"col-12 col-lg-6\"},a.a.createElement(\"div\",{className:\"\".concat(\"admin\"===m&&\"editable\",\" d-flex align-items-center mb-2\")},a.a.createElement(sr,{inputType:\"title\",content:t,mutation:M,mutationId:c,mutationOnSuccess:d},a.a.createElement(\"h1\",{className:\"h5 mb-0 text-white\"},t||\"Add a nice title\"))),a.a.createElement(\"div\",{className:\"\".concat(\"admin\"===m&&\"editable\",\" d-flex align-items-center mb-2\")},a.a.createElement(sr,{inputType:\"description\",content:r,mutation:M,mutationId:c,mutationOnSuccess:d},a.a.createElement(\"p\",{className:\"text-muted--70 mb-0\"},r?a.a.createElement(\"span\",null,r):a.a.createElement(\"span\",{className:\"text-muted--40\"},\"What's this project about? Set the context, the goals, the constraints\"))))),a.a.createElement(\"div\",{className:\"col-auto d-flex align-items-baseline ml-auto\"},a.a.createElement(Se,{users:o,project:u,size:\"lg\"}),\"admin\"===m&&a.a.createElement(Ut,{users:o,project:u})))}function mr(){return(mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pr(e){var t=e.projectImage,r=e.projectId,n=e.selected,o=e.updateSelected,c=t.id,s=t.title,u=t.phases,m=void 0===u?[]:u,d=(m[m.length-1]||{}).image,f=Object(i.b)();return a.a.createElement(\"article\",{className:\"card card--link card--product \".concat(n.includes(c)&&\"is-selected\")},a.a.createElement(l.b,{to:\"/projects/\".concat(r,\"/review/\").concat(c).concat(location.search),title:s},a.a.createElement(\"div\",{className:\"card__image border m-2\"},a.a.createElement(\"img\",{className:\"card-img-top\",src:d,srcSet:\"\".concat(d,\" 2x\"),alt:s}))),a.a.createElement(\"div\",{className:\"card-body\"},a.a.createElement(sr,{inputType:\"title\",projectId:r,content:s,mutation:V,mutationId:c,mutationOnSuccess:function(){f.invalidateQueries([re,r])}},a.a.createElement(v.a.p,mr({},w,{className:\"mb-0\"}),s))),a.a.createElement(\"div\",{className:\"card__select\"},a.a.createElement(\"div\",{className:\"card__select-toggle\",onClick:function(e){e.preventDefault(),o(c)}},a.a.createElement(p.a,{wrapper:\"svg\",className:\"card__select-icon icon icon--8\",src:bt.a}))))}function dr(){return(dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fr(e){var t=e.projectImages,r=e.projectId,o=st(),c=o.selected,l=o.updateSelected,s=o.resetSelected,u=Object(i.b)(),m=Object(n.useContext)(qt).userRole,p=Object(b.a)(X,{onSuccess:function(){u.invalidateQueries([re,r]),s()}}),d=[{title:\"Remove\",theme:\"danger\",hasPermission:[\"admin\"],icon:fe.a,iconSize:10,mutation:function(){return p.mutate({projectId:r,projectImageIds:c})},isLoading:p.isLoading}];return a.a.createElement(a.a.Fragment,null,a.a.createElement(\"div\",{className:\"\".concat(c.length>0&&\"has-selections\")},\"admin\"===m?a.a.createElement(se,{projectId:r,projectImages:t,positition:\"right\"},(function(){return a.a.createElement(vr,{projectImages:t,projectId:r,selected:c,updateSelected:l})})):a.a.createElement(\"div\",{className:\"row gutters-5\"},a.a.createElement(vr,{projectImages:t,projectId:r,selected:c,updateSelected:l}))),a.a.createElement(f.a,null,c.length>0&&a.a.createElement($t,{selected:c,resetSelected:s,actions:d})))}var vr=function(e){var t=e.projectImages,r=e.projectId,n=e.selected,o=e.updateSelected;return a.a.createElement(f.a,null,t.map((function(e,t){return a.a.createElement(v.a.div,dr({},_(t),{key:e.id,className:\"col-12 col-md-6 col-lg-4 col-xl-3 col-xxl-2\",layout:!0}),a.a.createElement(pr,{projectImage:e,projectId:r,selected:n,updateSelected:o}))})))};function br(e){var t=e.id,r=e.title,o=e.description,c=Object(n.useContext)(qt).userRole,l=Object(i.b)(),s=function(){l.invalidateQueries([ne,t])};return a.a.createElement(\"div\",{className:\"row mb-6\"},a.a.createElement(\"div\",{className:\"col-12 col-xl-6\"},a.a.createElement(\"div\",{className:\"\".concat(\"admin\"===c&&\"editable\",\" d-flex align-items-center mb-2\")},a.a.createElement(sr,{inputType:\"title\",projectId:t,content:r,mutation:V,mutationId:t,mutationOnSuccess:s},a.a.createElement(\"h1\",{className:\"h5 mb-0 text-white\"},r||\"Add a nice title\"))),a.a.createElement(\"div\",{className:\"\".concat(\"admin\"===c&&\"editable\",\" d-flex align-items-center mb-2\")},a.a.createElement(sr,{inputType:\"description\",content:o,mutation:V,mutationId:t,mutationOnSuccess:s},a.a.createElement(\"p\",{className:\"text-muted--70 mb-0\"},o?a.a.createElement(\"span\",null,o):a.a.createElement(\"span\",{className:\"text-muted--40\"},\"Add a decription - the purpose, context, objectives\"))))))}function gr(){return(gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yr(e){var t=e.xPercent,r=e.yPercent,o=e.author,c=e.commentIndex,i=e.toggleComment,l=e.children,s=Object(n.useContext)(qt).currentUser,u=o||s;return a.a.createElement(v.a.div,gr({layout:!0,transition:{duration:.2},className:\"review__interaction\",style:{\"--x\":t,\"--y\":r}},w),a.a.createElement(v.a.button,gr({},N,{className:\"review__marker icon-wrapper icon-wrapper--secondary btn btn-link text-reset\",style:{\"--theme\":\"\".concat(u.userColor)},onClick:i}),c&&a.a.createElement(\"span\",{className:\"text--xs\"},c+1)),l)}function hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&(\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"]);if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return Er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Er(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jr(e){var t=e.author,r=e.comment,o=e.position,c=e.commentIndex,i=e.reviewRef,l=o.xPercent,s=o.yPercent,u=hr(Object(n.useState)(!1),2),m=u[0],p=u[1],d=function(){return p(!m)};return a.a.createElement(yr,{xPercent:l,yPercent:s,author:t,commentIndex:c,toggleComment:d},a.a.createElement(wr,{comment:r,author:t,boxOpen:m,toggleBox:d,position:o,reviewRef:i}))}var wr=function(e){var t=e.comment,r=e.author,o=e.boxOpen,c=e.toggleBox,i=e.position,l=e.reviewRef,s=r.username,u=r.email,m=hr(Object(n.useState)(i),2),p=m[0],d=m[1],f=Object(n.useRef)();return Object(n.useEffect)((function(){i&&d((function(){return i.reviewPos=l.current.getBoundingClientRect(),Rt(f,i)}))}),[i]),a.a.createElement(Le,{renderOnBody:!1,animate:!1,extensionClasses:\"review__box\",title:s,subtitle:u,boxOpen:o,toggleBox:c,user:r,position:p,boxRef:f},t)};function Or(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}var xr=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,n,a,o,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.formRef,n=t.phaseId,a=t.userId,o=t.position,(c=new FormData(r.current)).append(\"userId\",a),c.append(\"positionX\",o.xPercent),c.append(\"positionY\",o.yPercent),e.next=7,P.a.post(\"/api/comments/add/\".concat(n),c);case 7:return i=e.sent,e.abrupt(\"return\",null==i?void 0:i.data);case 9:case\"end\":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){Or(o,n,a,c,i,\"next\",e)}function i(e){Or(o,n,a,c,i,\"throw\",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}();function Nr(e){var t=e.markerPos,r=e.boxOpen,o=e.toggleBox,c=e.phaseId,l=e.projectImageId,s=Object(n.useRef)(),u=Object(n.useRef)(),m=Rt(u,t),p=Object(n.useContext)(qt).currentUser,d=Object(i.b)(),f=Object(b.a)(xr,{onSuccess:function(){d.invalidateQueries([ne,parseInt(l)]),o()}});return a.a.createElement(Le,{renderOnBody:!1,extensionClasses:\"review__box\",title:\"Add a comment\",SubtitleComponent:function(){return a.a.createElement(\"span\",null,\"Comment or \",a.a.createElement(\"span\",{className:\"text-secondary\"},\" @mention \"),\" someone\")},boxOpen:r,toggleBox:o,position:m,user:p,boxRef:u},a.a.createElement(\"form\",{ref:s,className:\"d-flex flex-column align-items-center flex-grow-1\",onSubmit:function(e){e.preventDefault(),f.mutate({formRef:s,userId:p.id,phaseId:c,position:t})}},a.a.createElement(\"label\",{className:\"sr-only\",htmlFor:\"comment\"},\"Add a comment\"),a.a.createElement(Nt.a,{className:\"form-control form-control-sm form-control--text\",id:\"comment\",name:\"comment\",type:\"text\",placeholder:\"Say something nice...\",autoFocus:!0}),a.a.createElement(at,{title:\"Submit\",extensionClasses:\"mt-4 w-50 justify-content-center\",type:\"submit\",isLoading:f.isLoading})))}function _r(){return(_r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(r),!0).forEach((function(t){Ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&(\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"]);if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return Cr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cr(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rr(e){var t=e.title,r=e.phases,o=void 0===r?[]:r,c=e.projectImageId,i=o[o.length-1]||{},l=i.image,s=i.id,u=i.comments,m=Object(n.useRef)(),p=kr(Object(n.useState)(),2),d=p[0],v=p[1],b=kr(Object(n.useState)(!1),2),g=b[0],y=b[1];return a.a.createElement(\"div\",{ref:m,className:\"review position-relative mx-n12 mb-n12 mt-12\"},a.a.createElement(\"img\",{className:\"review__image img-fluid w-100\",src:l,srcSet:\"\".concat(l,\" 2x\"),alt:t,onClick:function(e){var t=e.clientX,r=e.clientY,n=null==m?void 0:m.current.getBoundingClientRect();v((function(){return{xPercent:(t-10)/n.width*100,yPercent:(r-n.top-10)/n.height*100,reviewPos:n}})),y(!0)}}),u.length>0&&u.map((function(e,t){return a.a.createElement(jr,_r({key:t},Pr(Pr({},e),{},{commentIndex:t,reviewRef:m})))})),a.a.createElement(f.a,null,d&&a.a.createElement(yr,Pr({},d),a.a.createElement(Nr,{markerPos:d,boxOpen:g,toggleBox:function(){y(!g),v(null)},phaseId:s,projectImageId:c}))))}function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){Lr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fr={login:\"/\",signup:\"/signup\",projects:\"/projects\"},zr=[{name:\"login\",path:\"/\",component:function(e){var t,r,o=e.setCurrentUser,c=Object(n.useRef)();pt(\"Login\");var i=Object(s.g)(),u=Object(Me.a)({reValidateMode:\"onChange\",mode:\"onBlur\"}),p=u.register,d=u.handleSubmit,f=u.formState.errors,v=Object(b.a)(R,{onSuccess:function(e){o(e),Object(m.b)(a.a.createElement(Ge,{message:\"Successfully logged in!\",appearance:\"success\"})),i.push(Fr.projects)},onError:function(e){var t,r;Object(m.b)(a.a.createElement(Ge,{message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.error?\"Email/password combination not found!\":\"Something went wrong!\",appearance:\"error\"})),f.email={message:\"Email/password combination not found\"},f.password={message:\"Email/password combination not found\"}}});return a.a.createElement(a.a.Fragment,null,a.a.createElement(qe,null),a.a.createElement(\"main\",{className:\"main-content\"},a.a.createElement(nt,null),a.a.createElement(\"div\",{className:\"pane\"},a.a.createElement(\"div\",{className:\"pane__panel panel panel--login\"},a.a.createElement(\"div\",{className:\"panel__body\"},a.a.createElement(\"h1\",{className:\"text-uppercase text-white mb-0\"},\"Login\"),a.a.createElement(\"p\",{className:\"text-muted--70 text-white mb-6\"},\"Login with your e-mail and password\"),a.a.createElement(\"form\",{ref:c,className:\"panel__form form\",onSubmit:d((function(){return v.mutate({formRef:c})})),noValidate:!0},a.a.createElement(\"div\",{className:\"row gutters-2\"},a.a.createElement(\"div\",{className:\"col-12\"},a.a.createElement(\"label\",{className:\"sr-only\",htmlFor:\"inputEmail\"},\"Email\"),a.a.createElement(\"input\",dt({type:\"email\",className:\"form-control \".concat(f.email&&\"is-invalid\"),id:\"inputEmail\",name:\"email\",placeholder:\"Email\",autoFocus:!0},p(\"email\",{required:!0}))),f.email&&a.a.createElement(\"div\",{className:\"invalid-feedback\"},null!==(t=f.email)&&void 0!==t&&t.message?f.email.message:\"Please enter a valid email\")),a.a.createElement(\"div\",{className:\"col-12\"},a.a.createElement(\"label\",{className:\"sr-only\",htmlFor:\"inputPassword\"},\"Password\"),a.a.createElement(\"input\",dt({type:\"password\",className:\"form-control \".concat(f.password&&\"is-invalid\"),id:\"inputPassword\",name:\"password\",placeholder:\"Password\"},p(\"password\",{required:!0}))),f.password&&a.a.createElement(\"div\",{className:\"invalid-feedback\"},null!==(r=f.password)&&void 0!==r&&r.message?f.password.message:\"Please enter a password\"))),a.a.createElement(\"div\",{className:\"row gutters-2\"},a.a.createElement(\"div\",{className:\"col-12 col-md-6\"},a.a.createElement(at,{title:\"Log in\",theme:\"secondary\",size:\"md\",extensionClasses:\"btn-block justify-content-center\",type:\"submit\",isLoading:v.isLoading})),a.a.createElement(\"div\",{className:\"col-12 col-md-6\"},a.a.createElement(l.b,{className:\"btn btn-outline-white btn-block\",to:Fr.signup,title:\"sign up\"},a.a.createElement(\"span\",{className:\"btn__text\"},\"Sign up\"))))))))))}},{name:\"signup\",path:\"/signup\",component:function(e){var t=e.setCurrentUser,r=Object(n.useRef)();pt(\"Signup\");var o=Object(s.g)(),c=Object(Me.a)({reValidateMode:\"onChange\",mode:\"onBlur\"}),i=c.register,u=c.handleSubmit,p=c.formState.errors,d=c.control,f=Object(Me.b)({control:d,name:\"plainPassword\",defaultValue:\"\"}),v=Object(b.a)(C,{onSuccess:function(e){t(e),Object(m.b)(a.a.createElement(Ge,{message:\"Successfully logged in!\",appearance:\"success\"})),o.push(Fr.projects)},onError:function(e){500===e.response.status&&(Object(m.b)(a.a.createElement(Ge,{message:\"This email is already in use!\",appearance:\"error\"})),r.current.reset())}});return a.a.createElement(a.a.Fragment,null,a.a.createElement(qe,null),a.a.createElement(\"main\",{className:\"main-content\"},a.a.createElement(nt,null),a.a.createElement(\"div\",{className:\"pane\"},a.a.createElement(\"div\",{className:\"pane__panel panel panel--login\"},a.a.createElement(\"div\",{className:\"panel__body\"},a.a.createElement(\"h1\",{className:\"text-uppercase text-white mb-0\"},\"Sign up\"),a.a.createElement(\"p\",{className:\"text-muted--70 text-white mb-6\"},\"Sign up with your e-mail and password\"),a.a.createElement(\"form\",{ref:r,className:\"panel__form form mt-6\",onSubmit:u((function(){return v.mutate({formRef:r})})),noValidate:!0},a.a.createElement(\"div\",{className:\"row gutters-2\"},a.a.createElement(\"div\",{className:\"col-12\"},a.a.createElement(\"label\",{className:\"sr-only\",htmlFor:\"registration_form_username\"},\"Your name\"),a.a.createElement(\"input\",ft({type:\"text\",id:\"registration_form_username\",name:\"username\",className:\"form-control \".concat(p.username&&\"is-invalid\"),placeholder:\"Full name\"},i(\"username\",{required:{value:!0,message:\"Please enter a name\"}}))),p.username&&a.a.createElement(\"div\",{className:\"invalid-feedback\"},p.username.message)),a.a.createElement(\"div\",{className:\"col-12\"},a.a.createElement(\"label\",{className:\"sr-only\",htmlFor:\"registration_form_email\"},\"Email\"),a.a.createElement(\"input\",ft({type:\"text\",id:\"registration_form_email\",name:\"email\",className:\"form-control \".concat(p.email&&\"is-invalid\"),placeholder:\"Email\"},i(\"email\",{required:{value:!0,message:\"Please enter an email\"}}))),p.email&&a.a.createElement(\"div\",{className:\"invalid-feedback\"},p.email.message)),a.a.createElement(\"div\",{className:\"col-md-6\"},a.a.createElement(\"label\",{className:\"sr-only\",htmlFor:\"registration_form_plainPassword\"},\"Password\"),a.a.createElement(\"input\",ft({type:\"password\",id:\"registration_form_plainPassword\",name:\"plainPassword\",className:\"form-control \".concat(p.password&&\"is-invalid\"),placeholder:\"Password\"},i(\"plainPassword\",{required:{value:!0,message:\"Please enter a password\"},minLength:{value:6,message:\"Please enter a password of atleast 6 characters\"}}))),p.plainPassword&&a.a.createElement(\"div\",{className:\"invalid-feedback\"},p.plainPassword.message)),a.a.createElement(\"div\",{className:\"col-md-6\"},a.a.createElement(\"label\",{className:\"sr-only\",htmlFor:\"login-confirm-password\"},\"Confirm password\"),a.a.createElement(\"input\",ft({type:\"password\",className:\"form-control \".concat(p.passwordConfirm&&\"is-invalid\"),id:\"login-confirm-password\",placeholder:\"Confirm password\",name:\"passwordConfirm\"},i(\"passwordConfirm\",{required:{value:!0,message:\"Please confirm your password\"},validate:function(e){return e===f||\"The passwords do not match\"}}))),p.passwordConfirm&&a.a.createElement(\"div\",{className:\"invalid-feedback\"},p.passwordConfirm.message))),a.a.createElement(\"div\",{className:\"row gutters-2\"},a.a.createElement(\"div\",{className:\"col-12 col-md-6\"},a.a.createElement(at,{title:\"Sign up\",theme:\"secondary\",size:\"md\",extensionClasses:\"btn-block justify-content-center\",type:\"submit\",isLoading:v.isLoading})),a.a.createElement(\"div\",{className:\"col-12 col-md-6\"},a.a.createElement(l.b,{className:\"btn btn-outline-white btn-block\",to:Fr.login,title:\"sign up\"},a.a.createElement(\"span\",{className:\"btn__text\"},\"Login\"))))))))))}},{name:\"project-overview\",path:\"/projects\",component:function(){var e=Jt(Object(n.useState)(),2),t=e[0],r=e[1];pt(\"Projects\");var o=Object(n.useContext)(qt),c=o.currentUser,i=o.userRole,l=Object(u.a)(te,(function(){return F({userId:null==c?void 0:c.id})}),{enabled:!(null==c||!c.id)}),s=l.isLoading,m=l.data,p=void 0===m?[]:m;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Qe,null),a.a.createElement(\"main\",{className:\"main-content\"},a.a.createElement(\"section\",{className:\"pane py-5 py-lg-10\"},a.a.createElement(\"div\",{className:\"container-fluid\"},a.a.createElement(Be,{isLoading:s},\"admin\"===i&&a.a.createElement(Ot,{setNewProjectId:r}),a.a.createElement(Ht,{projects:p,newProjectId:t}))))))}},{name:\"project-detail\",path:\"/projects/:id\",component:function(){var e=Object(u.a)([re,parseInt(o)],(function(){return z({projectId:o})})),t=e.isLoading,r=e.data,n=void 0===r?{}:r;pt(null==n?void 0:n.title,[n]);var o=Object(s.h)().id,c=n.title,i=n.description,l=n.users,m=n.id,p=n.author,d=n.email,f=n.projectImages;return a.a.createElement(Be,{isLoading:t},a.a.createElement(ur,{title:c,description:i,users:l,id:m,author:p,email:d}),a.a.createElement(fr,{projectImages:f,projectId:m}))}},{name:\"project-review\",path:\"/projects/:id/review/:id\",component:function(){var e=Object(u.a)([ne,parseInt(o)],(function(){return $({projectImageId:o})})),t=e.isLoading,r=e.data,n=void 0===r?{}:r;pt(null==n?void 0:n.title,[n]);var o=Object(s.h)().id;return a.a.createElement(Be,{isLoading:t},a.a.createElement(br,n),a.a.createElement(Rr,Dr(Dr({},n),{},{projectImageId:o})))}}];function Ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(r),!0).forEach((function(t){Br(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Br(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&(\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"]);if(null==r)return;var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return qr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qr(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qr(){var e=Mr(Object(n.useState)(),2),t=e[0],r=e[1],o=Mr(Object(n.useState)([]),2),c=o[0],i=o[1],p=atob(location.search.replace(\"?\",\"\")),d=Object(u.a)(ee,(function(){return H({userId:p})}),{retry:!1,onSuccess:function(e){var t;r(e),i((t=e.roles).includes(It)?\"admin\":t.includes(kt)?\"user\":t.includes(Ct)?\"basic\":void 0)}}).isLoading;return a.a.createElement(l.a,null,a.a.createElement(s.d,null,a.a.createElement(qt.Provider,{value:{currentUser:t,userRole:c}},a.a.createElement(Be,{isLoading:d},t&&\"/\"===location.pathname&&a.a.createElement(s.a,{to:Fr.projects}),!t&&a.a.createElement(s.a,{to:Fr.login}),zr.map((function(e){var n=e.path,o=e.component,c=e.props;return a.a.createElement(s.b,{key:n,path:n,exact:!0},a.a.createElement(o,Tr(Tr({},c),{},{currentUser:t,setCurrentUser:r})))}))),a.a.createElement(m.a,{hideProgressBar:!0,newestOnTop:!0,position:\"bottom-left\",closeButton:!1}))))}var $r=new c.a({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),Yr=document.getElementById(\"app\");null!==Yr&&Object(o.render)(a.a.createElement(i.a,{client:$r},a.a.createElement(Qr,null)),Yr)},CrUY:function(e,t,r){e.exports=r.p+\"img/background-login@2x.57f2a279.jpg\"},H1Be:function(e,t,r){e.exports=r.p+\"img/background-login.955534e8.jpg\"},Km7m:function(e,t,r){},RClv:function(e,t,r){e.exports=r.p+\"img/upload.47dd6e02.svg\"},ScKw:function(e,t,r){e.exports=r.p+\"img/danger.9f70266e.svg\"},SwPm:function(e,t,r){e.exports=r.p+\"img/leave.e3a2f47d.svg\"},X8eM:function(e,t,r){e.exports=r.p+\"img/add_project.abae0cbd.svg\"},X931:function(e,t,r){e.exports=r.p+\"img/add_user.912dfe06.svg\"},YaYb:function(e,t,r){e.exports=r.p+\"img/close-white.b044adee.svg\"},qSnX:function(e,t,r){e.exports=r.p+\"img/delete.cfd679bb.svg\"},qzzo:function(e,t,r){e.exports=r.p+\"img/star.93031288.svg\"},yqFz:function(e,t,r){e.exports=r.p+\"img/add_image.b5e82dfd.svg\"}});","extractedComments":[]}