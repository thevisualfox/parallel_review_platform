!function(e){function t(t){for(var r,c,i=t[0],l=t[1],s=t[2],m=0,p=[];m<i.length;m++)c=i[m],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={main:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/build/app/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;o.push(["9XVo",0]),n()}({"+Bf/":function(e,t,n){e.exports=n.p+"img/success.c9b1caae.svg"},"/5e6":function(e,t,n){e.exports=n.p+"img/warning.c09f2b53.svg"},"0QAq":function(e,t,n){e.exports=n.p+"img/check.bf18523b.svg"},"1zgo":function(e,t,n){e.exports=n.p+"img/archive.fa6029eb.svg"},"3h9j":function(e,t,n){e.exports=n.p+"img/close.ff2e588e.svg"},"8Me5":function(e,t,n){e.exports=n.p+"img/edit.dc6498b8.svg"},"9XVo":function(e,t,n){"use strict";n.r(t);n("Km7m"),n("ls82");var r=n("q1tI"),a=n.n(r),o=n("i8i4"),c=n("PC6D"),i=n("+QN0"),l=n("55Ip"),s=n("Ty5D"),u=n("Uvq/"),m=n("FGyW"),p=n("8PNI"),d=n("ATyU"),f=n("y6dH"),b=[.65,0,.35,1],g={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:b,duration:.2}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return{initial:{y:e,opacity:0},animate:{y:0,opacity:1,transition:{type:"spring",damping:42,stiffness:800}},exit:{y:e,opacity:0,transition:{type:"spring",damping:42,stiffness:1200}}}},y={initial:{y:"100%"},animate:{y:"0%",transition:{type:"spring",damping:41,stiffness:600}},exit:{y:"100%",transition:{type:"spring",damping:41,stiffness:1200}}},h={initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{ease:b,duration:.2}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{initial:{opacity:0,y:35},animate:{opacity:1,y:0,transition:{type:"spring",damping:30,stiffness:450,delay:.035*e}},exit:{opacity:0,scale:.25,transition:{type:"spring",damping:30,stiffness:600}}}},j={initial:{x:"-100%"},animate:{x:"0%",transition:{duration:.2,ease:[.65,0,.35,1]}},exit:{x:"-100%",transition:{duration:.1,ease:[.65,0,.35,1]}}},O=n("3h9j"),w=n.n(O),x=a.a.createContext();function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e){var t=e.selected,n=e.resetSelected,o=e.actions,c=Object(r.useContext)(x).userRole;return a.a.createElement(d.a.div,N({},y,{className:"bar bar--project"}),a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-auto d-flex align-items-center"},a.a.createElement("button",{type:"button",className:"bar__btn btn btn-link d-inline-flex text-white",onClick:n},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--14",src:w.a})),a.a.createElement("p",{className:"ml-2 mb-0"},t.length," selected")),a.a.createElement("div",{className:"col-auto ml-auto"},a.a.createElement("ul",{className:"bar__list list d-flex align-items-center"},o.map((function(e,t){var n=e.title,r=e.theme,o=e.hasPermission,i=e.icon,l=e.iconSize,s=void 0===l?12:l,u=e.mutation,m=void 0===u?function(){}:u,p=e.isLoading,d=void 0!==p&&p;if(o.includes(c))return a.a.createElement("li",{key:t,className:"list__item"},a.a.createElement("button",{className:"bar__btn btn btn-link d-flex align-items-center text-decoration-none",onClick:m},a.a.createElement("div",{className:"icon-wrapper icon-wrapper--".concat(r," icon-wrapper--interactive")},a.a.createElement(tn,{loading:d,loaderSize:12,classes:{loaderClasses:"position-absolute d-flex text-".concat(r)}},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--".concat(s," text-").concat(r),src:i}))),a.a.createElement("span",{className:"btn__text text-white ml-2"},n)))})))))))}var _=n("YaYb"),P=n.n(_),I=n("/5e6"),A=n.n(I),k=n("ScKw"),C=n.n(k),R=n("+Bf/"),D=n.n(R),L={warning:{title:"Warning",icon:A.a},danger:{title:"Error",icon:C.a},success:{title:"Success",icon:D.a}};function U(e){var t=e.message,n=e.appearance,r=e.closeToast;return a.a.createElement("div",{className:"alert alert--notification",role:"alert","data-alert":!0},a.a.createElement("div",{className:"d-flex align-items-center w-100"},a.a.createElement("div",{className:"alert__icon-wrapper alert__icon-wrapper--".concat(n," mr-2")},a.a.createElement(f.a,{wrapper:"svg",className:"alert__icon icon icon--12",src:L[n].icon})),a.a.createElement("p",{className:"mb-0"},L[n].title),a.a.createElement("button",{className:"alert__btn btn btn-link ml-auto",type:"button",onClick:r},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--10",src:P.a}))),a.a.createElement("span",{className:"alert__message text--sm text-muted--70 mr-lg-8"},t))}var F=n("H1Be"),M=n.n(F),z=n("CrUY"),T=n.n(z);function Q(){return a.a.createElement("div",{className:"background"},a.a.createElement("img",{className:"background__image",src:M.a,srcSet:T.a,alt:"Background"}))}var q=n("668i");function B(e){var t=e.title,n=e.subtitle,r=e.toggleModal;return a.a.createElement("div",{className:"custom-modal__header d-flex align-items-start"},a.a.createElement("div",{className:"d-flex align-items-center w-100"},a.a.createElement("div",{className:"d-flex flex-column w-100"},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("p",{className:"custom-modal__title"},t),a.a.createElement("button",{type:"button",className:"custom-modal__close btn btn-link ml-auto",onClick:r},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--12",src:w.a}))),n&&a.a.createElement("p",{className:"custom-modal__subtitle"},n))))}function $(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(){var e=V(Object(r.useState)([]),2),t=e[0],n=e[1];return{selected:t,updateSelected:function(e){n((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat($(t),[e])}))},resetSelected:function(){return n([])}}}function X(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(r.useEffect)((function(){document.title="".concat(e?e+" | Parallel Dashboard":document.title)}),X(t))}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=t}),[t]),Object(r.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return a.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])}function te(e,t){ee("keyup",Object(r.useCallback)((function(n){var r=n.key;["Escape"].includes(r)&&e&&t()})))}function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function re(e){var t=e.title,n=e.subtitle,r=e.modalOpen,c=e.toggleModal,i=e.children,l=e.renderOnBody,s=void 0===l||l,u=e.center,m=void 0===u||u,f=e.extensionClasses,b=e.components,y=void 0===b?{}:b,h=e.customAnimation,E=y.HeaderComponent,j=void 0===E?B:E,O=null!=h?h:v();te(r,c);var w=function(){return a.a.createElement(p.a,null,r&&a.a.createElement(q.a,{onClickAway:c},a.a.createElement("div",{className:"custom-modal ".concat(m&&"custom-modal--center"," ").concat(f)},s&&a.a.createElement(d.a.div,ne({className:"custom-modal-overlay"},g,{onClick:c})),a.a.createElement(d.a.div,ne({key:"custom-modal-content",className:"custom-modal__content border p-5"},O),a.a.createElement(j,{title:t,subtitle:n,toggleModal:c}),a.a.createElement("div",{className:"custom-modal__body d-flex mt-2"},i)))))};return s?Object(o.createPortal)(w(),document.body):w()}var ae=n("0QAq"),oe=n.n(ae);function ce(e){var t,n=e.title,o=e.type,c=void 0===o?"button":o,i=e.theme,l=void 0===i?"secondary":i,s=e.size,u=void 0===s?"sm":s,m=e.extensionClasses,p=void 0===m?"":m,d=e.onClick,f=void 0===d?function(){}:d,b=e.isLoading,g=void 0!==b&&b,v=e.contentType,y=void 0===v?"text":v,h=e.children,E=Object(r.useRef)(),j=null===(t=E.current)||void 0===t?void 0:t.getBoundingClientRect().height;return a.a.createElement("button",{ref:E,className:"btn btn-".concat(u," btn-").concat(l," ").concat(p," d-flex align-items-center"),style:{height:j},type:c,onClick:f},"text"===y?a.a.createElement(ie,{title:n,isLoading:g,children:h}):a.a.createElement(le,{isLoading:g}))}var ie=function(e){var t=e.title,n=e.isLoading,r=e.children;return a.a.createElement(tn,{loading:n,loaderSize:16,classes:{loaderClasses:"position-absolute d-flex text-secondary",defaultClasses:"d-flex align-items-center"}},r,a.a.createElement("span",{className:"btn__text"},t))},le=function(e){var t=e.isLoading;return a.a.createElement("div",{className:"icon-wrapper icon-wrapper--secondary icon-wrapper--interactive"},a.a.createElement(tn,{loading:t,loaderSize:14,classes:{loaderClasses:"position-absolute d-flex text-secondary",defaultClasses:"d-flex"}},a.a.createElement(f.a,{wrapper:"svg",className:"alert__icon icon icon--10 text-secondary",src:oe.a})))},se=n("yzbm"),ue=n("SR//");function me(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}var pe="ROLE_ADMIN",de="ROLE_USER",fe="ROLE_USER_BASIC";var be=n("fKpH"),ge=n.n(be);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function je(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Ee(o,r,a,c,i,"next",e)}function i(e){Ee(o,r,a,c,i,"throw",e)}c(void 0)}))}}var Oe={maxWidth:300,maxHeight:300,quality:100,rotation:0,outputType:"file"};function we(e,t){return xe.apply(this,arguments)}function xe(){return(xe=je(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){ge.a.imageFileResizer(t,n.maxWidth,n.maxHeight,t.path.split(".").pop(),n.quality,n.rotation,(function(t){e(t)}),n.outputType)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e){return Se.apply(this,arguments)}function Se(){return(Se=je(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t,ye(ye({},Oe),{},{maxWidth:268,maxHeight:236}));case 2:return n=e.sent,e.next=5,we(t,ye(ye({},Oe),{},{maxWidth:536,maxHeight:472}));case 5:return r=e.sent,e.abrupt("return",{original:t,thumbnail:Object.assign(n,{preview:URL.createObjectURL(n)}),thumbnailRetina:Object.assign(r,{preview:URL.createObjectURL(r)})});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=je(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=je(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ie=n("yqFz"),Ae=n.n(Ie),ke=n("RClv"),Ce=n.n(ke),Re=n("vDqi"),De=n.n(Re);function Le(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Le(o,r,a,c,i,"next",e)}function i(e){Le(o,r,a,c,i,"throw",e)}c(void 0)}))}}var Fe=function(){var e=Ue(regeneratorRuntime.mark((function e(t){var n,r,a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formRef,r=t.userId,a="/api/signup",r&&(a="/api/signup/".concat(r)),o=new FormData(n.current),e.next=6,De.a.post(a,o);case 6:return c=e.sent,e.abrupt("return",null==c?void 0:c.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Ue(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formRef,r=new FormData(n.current),e.next=4,De.a.post("/api/login",{email:r.get("email"),password:r.get("password")});case 4:return a=e.sent,e.abrupt("return",null==a?void 0:a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Ue(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("/api/logout");case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Te(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Qe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Te(o,r,a,c,i,"next",e)}function i(e){Te(o,r,a,c,i,"throw",e)}c(void 0)}))}}var qe=function(){var e=Qe(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,e.next=3,De.a.get("/api/projects/get/".concat(n));case 3:return r=e.sent,e.abrupt("return",null==r?void 0:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Qe(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,e.next=3,De.a.get("/api/project/get/".concat(n));case 3:return r=e.sent,e.abrupt("return",null==r?void 0:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Qe(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.post("/api/projects/add");case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ve=function(){var e=Qe(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectIds,r=new FormData,n.forEach((function(e){return r.append("projects[]",e)})),e.next=5,De.a.post("/api/projects/delete",r);case 5:return a=e.sent,e.abrupt("return",null==a?void 0:a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Qe(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectIds,r=t.userId,a=new FormData,n.forEach((function(e){return a.append("projects[]",e)})),e.next=5,De.a.post("/api/projects/leave/".concat(r),a);case 5:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Qe(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formRef,r=t.id,a=new FormData(n.current),e.next=4,De.a.post("/api/projects/edit/".concat(r),a);case 4:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Je(o,r,a,c,i,"next",e)}function i(e){Je(o,r,a,c,i,"throw",e)}c(void 0)}))}}var Ze=function(){var e=Ge(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectImageId,r=t.phaseId,a=r?{params:{phase:r}}:{},e.next=4,De.a.get("/api/images/get/".concat(n),Xe({},a));case 4:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Ge(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,r=t.images,a=new FormData,r.forEach((function(e,t){a.append("images[".concat(t,"][original]"),e.original),a.append("images[".concat(t,"][thumbnail]"),e.thumbnail),a.append("images[".concat(t,"][thumbnailRetina]"),e.thumbnailRetina)})),e.next=5,De.a.post("/api/images/add/".concat(n),a);case 5:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Ge(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,r=t.projectImageIds,a=new FormData,r.forEach((function(e){return a.append("projectImages[]",e)})),e.next=5,De.a.post("/api/images/delete/".concat(n),a);case 5:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Ge(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formRef,r=t.id,a=new FormData(n.current),e.next=4,De.a.post("/api/images/edit/".concat(r),a);case 4:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function rt(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function at(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){rt(o,r,a,c,i,"next",e)}function i(e){rt(o,r,a,c,i,"throw",e)}c(void 0)}))}}var ot=function(){var e=at(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r="/api/users/get",n&&(r="".concat(r,"/").concat(n)),e.next=5,De.a.get(r);case 5:return a=e.sent,e.abrupt("return",null==a?void 0:a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=at(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("/api/users/get/all");case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=at(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,e.next=3,De.a.get("/api/users/get/project/".concat(n));case 3:return r=e.sent,e.abrupt("return",null==r?void 0:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lt=function(){var e=at(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,r=t.email,e.next=3,De.a.post("/api/users/add/".concat(n),{email:r,referer:window.location.pathname.replace("/","")});case 3:return a=e.sent,e.abrupt("return",null==a?void 0:a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=at(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,r=t.userId,e.next=3,De.a.post("/api/users/delete/".concat(n),{userId:r});case 3:return a=e.sent,e.abrupt("return",null==a?void 0:a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ut(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function mt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){ut(o,r,a,c,i,"next",e)}function i(e){ut(o,r,a,c,i,"throw",e)}c(void 0)}))}}var pt=function(){var e=mt(regeneratorRuntime.mark((function e(t){var n,r,a,o,c,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.phaseId,r=t.userId,a=t.comment,o=t.mentioned,c=t.position,(i=new FormData).append("userId",r),i.append("comment",a),i.append("positionX",c.xPercent),i.append("positionY",c.yPercent),i.append("referer",window.location.pathname.replace("/","")),o.length&&i.append("mentioned[]",o),e.next=10,De.a.post("/api/comments/add/".concat(n),i);case 10:return l=e.sent,e.abrupt("return",null==l?void 0:l.data);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dt=function(){var e=mt(regeneratorRuntime.mark((function e(t){var n,r,a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commentId,r=t.reply,a=t.mentioned,(o=new FormData).append("reply",r),o.append("referer",window.location.pathname.replace("/","")),a.length&&o.append("mentioned[]",a),e.next=7,De.a.post("/api/comments/reply/".concat(n),o);case 7:return c=e.sent,e.abrupt("return",null==c?void 0:c.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=mt(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commentId,e.next=3,De.a.post("/api/comments/check/".concat(n));case 3:return r=e.sent,e.abrupt("return",null==r?void 0:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function bt(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}var gt=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.phaseId,r=t.images,a=new FormData,r.forEach((function(e,t){a.append("images[".concat(t,"][original]"),e.original),a.append("images[".concat(t,"][thumbnail]"),e.thumbnail),a.append("images[".concat(t,"][thumbnailRetina]"),e.thumbnailRetina)})),e.next=5,De.a.post("/api/phase/next/".concat(n),a);case 5:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){bt(o,r,a,c,i,"next",e)}function i(e){bt(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),vt="current_user",yt="project_by_user",ht="project_by_id",Et="project_image_by_id",jt="global_users",Ot="project_users";function wt(){return(wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){St(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Pt(e){var t=e.projectId,n=e.positition,r=void 0===n?"left":n,o=e.children,c=Object(i.b)(),l=Object(se.a)({accept:"image/*",noClick:!0,onDrop:function(e){return f("add",{images:e})}}),s=l.getRootProps,u=l.getInputProps,m=l.isDragActive,p=Object(ue.a)(et,{onSuccess:function(){return c.invalidateQueries([ht,t])}}),d=Object(ue.a)(tt,{onSuccess:function(){return c.invalidateQueries([ht,t])}}),f=function(){var e,n=(e=regeneratorRuntime.mark((function e(n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n||!r.images){e.next=5;break}return e.next=3,_e(r.images);case 3:a=e.sent,p.mutate({projectId:t,images:a});case 5:"delete"===n&&d.mutate(Nt({projectId:t},r));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){_t(o,r,a,c,i,"next",e)}function i(e){_t(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}();return a.a.createElement("div",wt({className:"dropzone"},s()),a.a.createElement("input",u()),a.a.createElement(It,{addImageLoading:p.isLoading,updateProjectImages:f,isParentDragActive:m,positition:r}),a.a.createElement("div",{className:"row row--equalized gutters-5"},o({updateProjectImages:f,isLoading:d.isLoading})))}var It=function(e){var t=e.addImageLoading,n=e.updateProjectImages,r=e.isParentDragActive,o=e.positition,c=Object(se.a)({accept:"image/*",noDragEventsBubbling:!0,onDrop:function(e){return n("add",{images:e})}}),i=c.getRootProps,l=c.getInputProps,s=c.isDragActive;return a.a.createElement("div",wt({className:"dropzone"},i()),a.a.createElement("input",l()),a.a.createElement(p.a,null,(s||r)&&a.a.createElement(d.a.div,wt({},g,{className:"dropzone__overlay"}),a.a.createElement("div",{className:"icon-wrapper icon-wrapper--secondary",style:{"--size":75}},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--30 text-secondary",src:Ce.a})))),a.a.createElement(d.a.button,wt({},h,{key:"add-project",type:"button",className:"icon-wrapper icon-wrapper--interactive icon-wrapper--secondary btn btn-link btn--add btn--add-".concat(o),style:{"--size":75}}),a.a.createElement(tn,{loading:t,classes:{loaderClasses:"position-absolute d-flex text-secondary"},loaderSize:30},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--30 text-secondary",src:Ae.a}))))};function At(){return(At=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function kt(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dt(e){var t,n,r=Ct(e.images,1)[0],o=e.setImages,c=Object(se.a)({accept:"image/*",maxFiles:1,onDrop:(t=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t);case 2:n=e.sent,o(n);case 4:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function c(e){kt(o,r,a,c,i,"next",e)}function i(e){kt(o,r,a,c,i,"throw",e)}c(void 0)}))},function(e){return n.apply(this,arguments)})}),i=c.getRootProps,l=c.getInputProps,s=c.isDragActive;return a.a.createElement("div",At({className:"dropzone dropzone--single mt-2"},i()),a.a.createElement("input",l()),a.a.createElement(p.a,{initial:!1,exitBeforeEnter:!0},!r&&a.a.createElement(d.a.div,At({},h,{className:"icon-wrapper icon-wrapper--interactive icon-wrapper--secondary",style:{"--size":44}}),s?a.a.createElement(d.a.div,At({key:"upload"},h),a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--20 text-secondary",src:Ce.a})):a.a.createElement(d.a.div,At({key:"add"},h),a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--20 text-secondary",src:Ae.a}))),r&&a.a.createElement(d.a.div,At({key:"container"},g,{className:"dropzone__container"}),a.a.createElement(Ka,{className:"dropzone__image",src:r.thumbnail.preview,srcSet:"".concat(r.thumbnailRetina.preview," 2x"),alt:r.thumbnail.name}),a.a.createElement("button",{type:"button",className:"btn btn-link dropzone__image-delete p-0",onClick:function(e){e.stopPropagation(),o([])}},a.a.createElement("div",{className:"dropzone__image-delete-icon icon-wrapper icon-wrapper--danger mx-auto",style:{"--size":50}},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--14 text-danger mt-0",src:w.a}))))))}var Lt=n("g3U7");function Ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){Qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e){var t=e.fields,n=e.toggleModal,o=e.mutation,c=e.mutationId,i=e.mutationOnSuccess,l=Object(r.useRef)(),s=Object(ue.a)(o,{onSuccess:function(){i(),n()}});return a.a.createElement("form",{ref:l,className:"d-flex flex-column align-items-center flex-grow-1 position-relative",onSubmit:function(e){e.preventDefault(),s.mutate({formRef:l,id:c})}},t.map((function(e,t){return a.a.createElement(Bt,Mt({key:t},Tt(Tt({},e),{},{shouldFocus:0===t})))})),a.a.createElement(ce,{title:"Save",contentType:1===t.length?"icon":"text",extensionClasses:1===t.length?"form-control-btn":"w-50 justify-content-center mt-3",theme:1===t.length?"default":"secondary",isLoading:s.isLoading,type:"submit"}))}var Bt=function(e){var t,n=e.name,o=e.defaultValue,c=e.shouldFocus,i=void 0!==c&&c,l=Ut(Object(r.useState)(o),2),s=l[0],u=l[1],m=Object(r.useRef)();return Object(r.useEffect)((function(){var e;null!=m&&m.current&&i&&(null==m||null===(e=m.current)||void 0===e||e.select())}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{className:"sr-only",htmlFor:n},n),a.a.createElement(Lt.a,{className:"form-control form-control--text",id:n,name:n,type:"text",value:s,onChange:function(e){var t=e.target.value;return u(t)},ref:m,placeholder:(t=n,t.charAt(0).toUpperCase()+t.slice(1)),onFocus:function(){return m.current.select()}}))},$t=n("8Me5"),Vt=n.n($t),Wt=["title","subtitle","children"];function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Gt(e){var t=e.title,n=e.subtitle,o=void 0===n?"Save when ready":n,c=e.children,i=Jt(e,Wt),l=Xt(Object(r.useState)(!1),2),s=l[0],u=l[1],m=Object(r.useContext)(x).userRole,p=function(){return u(!s)};return a.a.createElement("div",{className:"editable d-flex align-items-baseline position-relative"},a.a.createElement("div",{className:"editable__content"},c),"admin"===m&&a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"editable__toggle btn btn-link icon-wrapper icon-wrapper--secondary icon-wrapper--interactive stretched-link ml-3",onClick:p,style:{"--size":25}},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--10 text-secondary",src:Vt.a})),a.a.createElement(re,{title:t,subtitle:o,modalOpen:s,toggleModal:p},a.a.createElement(qt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){Yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({toggleModal:p},i)))))}var Zt=n("iae6");function en(){return(en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tn(e){var t=e.loading,n=e.children,r=e.loaderSize,o=void 0===r?40:r,c=e.classes,i=void 0===c?{}:c,l=i.loaderClasses,s=void 0===l?"position-absolute d-flex":l,u=i.defaultClasses,m=void 0===u?"":u;return a.a.createElement(p.a,{initial:!1},t?a.a.createElement(d.a.div,en({key:"loader",className:s},h),a.a.createElement(Zt.a,{color:"inherit",size:o})):a.a.createElement(d.a.div,en({key:"default",className:m},h),n))}function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rn(e){var t=e.toggleSlideIn,n=e.children,r=e.domElement,c=e.variant,i=void 0===c?"default":c,l=function(){return a.a.createElement("div",{key:"slide-in",className:"slide-in slide-in--".concat(i)},a.a.createElement(d.a.div,nn({className:"slide-in__overlay",onClick:t},g)),a.a.createElement(d.a.article,nn({key:"slide-in__content",className:"slide-in__content"},y),a.a.createElement("div",{className:"container-fluid d-flex flex-grow-1"},n)))};return r?Object(o.createPortal)(l(),r):l()}var an=n("de8u");function on(e){var t=e.isLoading,n=e.children;return a.a.createElement(p.a,null,t?a.a.createElement(d.a.div,g,a.a.createElement(an.a,{color:"secondary"})):a.a.createElement("div",{key:"children"},n))}function cn(e){var t=e.children;return a.a.createElement("main",{className:"main-content"},a.a.createElement("section",{className:"pane py-5 py-lg-10"},a.a.createElement("div",{className:"container-fluid"},t)))}var ln=n("X931"),sn=n.n(ln);function un(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pn(e){var t=e.users,n=e.project,o=un(Object(r.useState)(!1),2),c=o[0],l=o[1],s=Object(i.b)(),u=function(){return l(!c)};return a.a.createElement("div",{className:"position-relative ml-2"},a.a.createElement("button",{className:"btn btn-link user user--lg user--add",type:"button",onClick:u},a.a.createElement("span",{className:"user__avatar"},a.a.createElement("div",{className:"user__initials"},a.a.createElement(f.a,{wrapper:"svg",className:"user__icon icon icon--12 mt-0",src:sn.a})))),a.a.createElement(re,{title:"Select users",subtitle:"Choose some users to collaborate with.",modalOpen:c,toggleModal:u},a.a.createElement(bn,{users:t,project:n,toggleModal:u,invalidateQueries:function(){s.invalidateQueries([ht,n.id]),s.invalidateQueries(jt)}})))}function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bn(e){var t=e.users,n=e.project,o=e.toggleModal,c=e.invalidateQueries,i=dn(Object(r.useState)(""),2),l=i[0],s=i[1],m=dn(Object(r.useState)(0),2),p=m[0],d=m[1],f=Object(u.a)(jt,ct),b=f.data,g=void 0===b?[]:b,v=f.isLoading,y=function(e,t,n){var r=n.toLowerCase(),a=t.map((function(e){return e.email}));return e.filter((function(e){var t=e.email;return!a.includes(t)})).filter((function(e){var t=e.email,n=e.display;return t.toLowerCase().includes(r)||n.toLowerCase().includes(r)}))}(g,t,l),h=Object(r.useRef)(),E=Object(ue.a)(lt,{onSuccess:function(){c(),h.current.select(),s("")}});return a.a.createElement("div",{className:"d-flex flex-column flex-grow-1"},a.a.createElement(La,{users:t,project:n,invalidateQueries:c,variant:"interactive",size:"lg"}),a.a.createElement("div",{className:"position-relative"},a.a.createElement("label",{className:"sr-only",htmlFor:"userQuery"},"Search name or email"),a.a.createElement("input",{className:"form-control form-control--search",id:"userQuery",name:"userQuery",placeholder:"Search name or email",type:"text",autoFocus:!0,value:l,onChange:function(e){var t=e.target.value;return s(t)},onKeyDown:function(e){if(["Enter","Tab"].includes(e.key)&&(e.preventDefault(),""!==l&&null!==p)){var t=p in y?y[p]:p;me(t.email)&&E.mutate({projectId:n.id,email:t.email})}},autoComplete:"off",ref:h}),a.a.createElement(ce,{onClick:o,extensionClasses:"form-control-btn",contentType:"icon",theme:"default"}),a.a.createElement(vn,{filteredUsers:y,query:l,handleClick:function(e){var t=e.email;me(t)&&E.mutate({projectId:n.id,email:t})},focusedUser:p,setFocusedUser:d,userMutationLoading:E.isLoading,globalUsersLoading:v})))}function gn(){return(gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vn(e){var t,n=e.filteredUsers,r=e.query,o=e.handleClick,c=e.focusedUser,i=e.setFocusedUser,l=e.userMutationLoading,s=e.globalUsersLoading;return a.a.createElement(p.a,null,""!==r&&a.a.createElement(d.a.ul,gn({},g,{className:"custom-modal__list list"}),(t={email:r,organisation:r,display:"New user",userColor:"291, 81%, 53%"},n.length>0?n.map((function(e,t){return a.a.createElement(d.a.li,gn({},g,{key:e.id,className:"list__item vr-3"}),a.a.createElement(Fa,{user:e,userIndex:t,handleClick:o,setFocusedUser:i,isFocused:t===c&&r,isLoading:l}))})):s?void 0:a.a.createElement(d.a.li,gn({},g,{key:"New user",className:"list__item is-focused vr-3"}),a.a.createElement(Fa,{user:t,userIndex:t,handleClick:o,setFocusedUser:i,isFocused:r.length,isLoading:l})))))}function yn(e){var t=e.project,n=e.selected,r=e.updateSelected,o=t.title,c=t.projectImages,i=t.users,s=t.author,u=t.id;return a.a.createElement(l.b,{to:"projects/".concat(u),title:o,className:"card card--link card--product ".concat(n.includes(u)&&"is-selected")},a.a.createElement(Nn,{projectImages:c}),a.a.createElement("div",{className:"card-body"},a.a.createElement("div",{className:"d-flex flex-column"},a.a.createElement("p",{className:"mb-2"},o||"Add a nice title"),a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement(La,{users:i,project:{author:s},layout:"minimal",useLayout:!1})))),a.a.createElement("div",{className:"card__select"},a.a.createElement("div",{className:"card__select-toggle",onClick:function(e){e.preventDefault(),r(u)}},a.a.createElement(f.a,{wrapper:"svg",className:"card__select-icon icon icon--8",src:oe.a}))))}var hn=n("X8eM"),En=n.n(hn);function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xn(e){var t=e.setNewProjectId,n=On(Object(r.useState)(null),2),o=n[0],c=n[1],l=On(Object(r.useState)(!1),2),s=l[0],m=l[1],b=Object(i.b)(),g=Object(u.a)([ht,o],(function(){return Be({projectId:o})}),{enabled:!!o}).data;Object(r.useEffect)((function(){t(o)}),[o]);var v=Object(ue.a)($e,{onSuccess:function(e){var t=e.id;return c(t)}}),y=Object(ue.a)(He,{onSuccess:function(){return j()}}),E=function(){m(!s),s||v.mutate(),s&&(setTimeout((function(){c(null)}),250),j())},j=function(){return b.invalidateQueries(yt)};return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a.button,jn({},h,{key:"add-project",type:"button",className:"icon-wrapper icon-wrapper--interactive icon-wrapper--secondary btn btn-link btn--add btn--add-right",style:{"--size":75},onClick:E}),a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--30 text-secondary",src:En.a})),a.a.createElement(p.a,null,s&&a.a.createElement(_n,{project:g,updateProject:function(e){return y.mutate({formRef:e,id:o})},toggleSlideIn:E})))}function Nn(e){var t=e.projectImages[0]||{},n=t.phase,r=void 0===n?{}:n,o=t.title;return a.a.createElement("div",{className:"card__image border m-2"},r.image&&a.a.createElement(Ka,{className:"card-img-top",src:r.image.thumbnail,srcSet:"".concat(r.image.thumbnailRetina," 2x"),alt:o}),!r.image&&a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--48 text-muted--40",src:Ae.a}))}function Sn(){return(Sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _n(e){var t=e.project,n=void 0===t?{}:t,o=e.updateProject,c=e.toggleSlideIn,i=n.id,l=void 0===i?null:i,s=n.title,u=void 0===s?"":s,m=n.projectImages,b=void 0===m?[]:m,g=n.users,v=void 0===g?[]:g,y=Object(r.useRef)();return a.a.createElement(rn,{toggleSlideIn:c,domElement:document.body},a.a.createElement("form",{ref:y,method:"POST",className:"slide-in__form",onSubmit:function(e){e.preventDefault(),c()}},a.a.createElement("div",{className:"slide-in__header d-flex align-items-center pt-6 pt-md-12 pb-3"},a.a.createElement("label",{className:"sr-only",htmlFor:"projectTitle"},u),a.a.createElement("input",{type:"text",className:"form-control form-control--clear text--xl",id:"projectTitle",name:"title",placeholder:"The project name",onBlur:function(){return o(y)},autoFocus:!0}),a.a.createElement("button",{type:"button",className:"slide-in__close btn btn-link ml-auto","data-dismiss":"modal","aria-label":"Close",onClick:c,tabIndex:"-1"},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--14",src:w.a}))),a.a.createElement("div",{className:"slide-in__body pt-3 pb-12"},a.a.createElement("div",{className:"row gutters-2"},a.a.createElement("div",{className:"col-6"},a.a.createElement("label",{className:"sr-only",htmlFor:"projectDescription"},"What's this project about?"),a.a.createElement(Lt.a,{className:"form-control form-control--text form-control--clear mb-10",id:"projectDescription",name:"description",placeholder:"What's this project about?",onBlur:function(){return o(y)}})),a.a.createElement("div",{className:"col-auto d-flex align-items-baseline ml-auto"},a.a.createElement(La,{users:v,project:n,size:"lg"}),a.a.createElement(pn,{users:v,project:n}))),a.a.createElement(Pt,{projectId:l,projectImages:b},(function(e){var t=e.updateProjectImages,n=e.isLoading;return a.a.createElement(p.a,null,b.map((function(e,r){return a.a.createElement(Pn,{key:e.id,projectImage:e,projectImageIndex:r,updateProjectImages:t,isLoading:n})})))}))),a.a.createElement("div",{className:"slide-in__footer pb-6 pb-md-12"},a.a.createElement("div",{className:"row gutters-0 w-100"},a.a.createElement("div",{className:"col-12 col-lg-1 ml-auto"},a.a.createElement("button",{type:"submit",className:"slide-in__btn btn btn-block btn-secondary d-flex align-items-center justify-content-center"},a.a.createElement(d.a.span,{className:"btn-text"},a.a.createElement("span",null,"Save"))))))))}var Pn=function(e){var t=e.projectImage,n=e.projectImageIndex,r=e.updateProjectImages,o=e.isLoading,c=t.title,i=t.id,l=t.phase,s=void 0===l?{}:l;return a.a.createElement(d.a.div,Sn({layout:!0},E(n),{className:"col-12 col-md-6 col-lg-4 col-xl-3 col-xxl-2",key:i}),a.a.createElement("div",{className:"dropzone__container"},a.a.createElement(Ka,{className:"dropzone__image img-fluid",src:s.image.thumbnail,srcSet:"".concat(s.image.thumbnailRetina," 2x"),alt:c}),a.a.createElement("button",{type:"button",className:"btn btn-link dropzone__image-delete p-0",onClick:function(e){e.stopPropagation(),r("delete",{projectImageIds:[i]})}},a.a.createElement("div",{className:"dropzone__image-delete-icon icon-wrapper icon-wrapper--danger mx-auto",style:{"--size":50}},a.a.createElement(tn,{loading:o,loaderSize:20,classes:{loaderClasses:"position-absolute d-flex text-danger"}},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--14 text-danger mt-0",src:w.a}))))))},In=n("SwPm"),An=n.n(In),kn=n("1zgo"),Cn=n.n(kn);function Rn(){return(Rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dn(e){var t=e.projects,n=e.newProjectId,o=Y(),c=o.selected,l=o.updateSelected,s=o.resetSelected,u=Object(r.useContext)(x).currentUser,m=Object(i.b)(),f=Object(ue.a)(We,{onSuccess:function(){m.invalidateQueries(yt),s()}}),b=Object(ue.a)(Ve,{onSuccess:function(){m.invalidateQueries(yt),s()}}),v=[{title:"Leave",theme:"warning",hasPermission:["user","basic"],icon:An.a,mutation:function(){return f.mutate({projectIds:c,userId:u.id})},isLoading:f.isLoading},{title:"Archive",theme:"secondary",hasPermission:["admin"],icon:Cn.a},{title:"Remove",theme:"danger",hasPermission:["admin"],icon:w.a,iconSize:10,mutation:function(){return b.mutate({projectIds:c})},isLoading:b.isLoading}];return a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",{className:"h5 text-white mb-6"},"Your projects"),a.a.createElement(p.a,null,0===t.length&&a.a.createElement(d.a.p,Rn({},g,{className:"text-white mb-0 position-absolute"}),"You don't have any projects yet")),a.a.createElement("div",{className:"row row--equalized gutters-5 ".concat(c.length>0&&"has-selections")},a.a.createElement(p.a,null,t.filter((function(e){return e.id!==n})).map((function(e,t){return a.a.createElement(d.a.div,Rn({},E(t),{key:e.id,className:"col-12 col-md-6 col-lg-4 col-xl-3 col-xxl-2",layout:!0}),a.a.createElement(yn,{project:e,selected:c,updateSelected:l}))})))),a.a.createElement(p.a,null,c.length>0&&a.a.createElement(S,{selected:c,resetSelected:s,actions:v})))}function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fn(e){var t=e.title,n=e.description,o=e.users,c=e.id,l=e.author,s=e.email,u={id:c,author:l,email:s},m=Object(r.useContext)(x).userRole,p=Object(i.b)(),d=function(){p.invalidateQueries([ht,c])};return a.a.createElement("div",{className:"row mb-6"},a.a.createElement("div",{className:"col-12 col-lg-6"},a.a.createElement("div",{className:"".concat("admin"===m&&"editable"," d-flex align-items-center mb-2")},a.a.createElement(Gt,{title:"Editing title",fields:[{name:"title",defaultValue:t}],mutation:He,mutationId:c,mutationOnSuccess:d},a.a.createElement("h1",{className:"h5 mb-0 text-white"},t||"Add a nice title"))),a.a.createElement("div",{className:"".concat("admin"===m&&"editable"," d-flex align-items-center mb-2")},a.a.createElement(Gt,{title:"Editing description",fields:[{name:"description",defaultValue:n}],mutation:He,mutationId:c,mutationOnSuccess:d},a.a.createElement("p",{className:"text-muted--70 mb-0"},n?a.a.createElement("span",null,n):a.a.createElement("span",{className:"text-muted--40"},"What's this project about? Set the context, the goals, the constraints"))))),a.a.createElement("div",{className:"col-auto d-flex align-items-baseline ml-auto"},a.a.createElement(La,{users:o,project:u,size:"lg"}),"admin"===m&&a.a.createElement(pn,{users:o,project:u})))}function Mn(){return(Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zn(e){var t=e.projectImage,n=e.projectId,r=e.selected,o=e.updateSelected,c=t.id,s=t.title,u=t.phase,m=void 0===u?{}:u,p=Object(i.b)();return a.a.createElement("article",{className:"card card--link card--product ".concat(r.includes(c)&&"is-selected")},a.a.createElement(l.b,{to:"/projects/".concat(n,"/review/").concat(c),title:s},a.a.createElement("div",{className:"card__image border m-2"},a.a.createElement(Ka,{className:"card-img-top",src:m.image.thumbnail,srcSet:"".concat(m.image.thumbnailRetina," 2x"),alt:s}))),a.a.createElement("div",{className:"card-body"},a.a.createElement(Gt,{title:"Editing image title",fields:[{name:"title",defaultValue:s}],mutation:nt,mutationId:c,mutationOnSuccess:function(){p.invalidateQueries([ht,n])}},a.a.createElement(d.a.p,Mn({},g,{className:"mb-0"}),s))),a.a.createElement("div",{className:"card__select"},a.a.createElement("div",{className:"card__select-toggle",onClick:function(e){e.preventDefault(),o(c)}},a.a.createElement(f.a,{wrapper:"svg",className:"card__select-icon icon icon--8",src:oe.a}))))}function Tn(){return(Tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qn(e){var t=e.projectImages,n=e.projectId,o=Y(),c=o.selected,l=o.updateSelected,s=o.resetSelected,u=Object(i.b)(),m=Object(r.useContext)(x).userRole,d=Object(ue.a)(tt,{onSuccess:function(){u.invalidateQueries([ht,n]),s()}}),f=[{title:"Remove",theme:"danger",hasPermission:["admin"],icon:w.a,iconSize:10,mutation:function(){return d.mutate({projectId:n,projectImageIds:c})},isLoading:d.isLoading}];return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"".concat(c.length>0&&"has-selections")},"admin"===m?a.a.createElement(Pt,{projectId:n,projectImages:t,positition:"right"},(function(){return a.a.createElement(qn,{projectImages:t,projectId:n,selected:c,updateSelected:l})})):a.a.createElement("div",{className:"row gutters-5"},a.a.createElement(qn,{projectImages:t,projectId:n,selected:c,updateSelected:l}))),a.a.createElement(p.a,null,c.length>0&&"admin"===m&&a.a.createElement(S,{selected:c,resetSelected:s,actions:f})))}var qn=function(e){var t=e.projectImages,n=e.projectId,r=e.selected,o=e.updateSelected;return a.a.createElement(p.a,null,t.map((function(e,t){return a.a.createElement(d.a.div,Tn({},E(t),{key:e.id,className:"col-12 col-md-6 col-lg-4 col-xl-3 col-xxl-2",layout:!0}),a.a.createElement(zn,{projectImage:e,projectId:n,selected:r,updateSelected:o}))})))};function Bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hn(e){var t=e.title,n=e.description,o=e.projectImageId,c=e.togglePaginationActive,l=Object(i.b)(),s=Vn(Object(r.useState)(!1),2),u=s[0],m=s[1],p=function(){c(),m(!u)};return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"bar__action-btn ".concat(u&&"is-active"," btn btn-link text-rest"),onClick:p},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--16",src:Vt.a})),a.a.createElement(re,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(n),!0).forEach((function(t){$n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:"Editing image",subtitle:"Save when ready",modalOpen:u,toggleModal:p},vr),a.a.createElement(qt,{toggleModal:p,fields:[{name:"title",defaultValue:t},{name:"description",defaultValue:n}],mutation:nt,mutationId:o,mutationOnSuccess:function(){l.invalidateQueries([Et,Number(o)])}})))}var Yn=n("ukBR"),Xn=n.n(Yn),Kn=a.a.createContext();function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){Zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nr(e){var t=e.allPhases,n=e.phaseNumber,o=e.togglePaginationActive,c=er(Object(r.useState)(!1),2),i=c[0],l=c[1],s=Object(r.useContext)(Kn),u=s.activePhase,m=void 0===u?t[t.length-1]:u,p=s.setActivePhase,d=function(){o(),l(!i)};return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"btn btn-link btn--modal text-reset d-flex align-items-center ".concat(i&&"is-active"),onClick:d},a.a.createElement("p",{className:"text--xs text-muted--70 mb-0"},"Phase ",n),a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--8 text-muted--50  ml-1",src:Xn.a})),a.a.createElement(re,Gn(Gn({title:"Choose phase",subtitle:"Navigate to selected phase",modalOpen:i,toggleModal:d},vr),{},{extensionClasses:"bar__modal bar__modal--left"}),a.a.createElement("div",{className:"d-flex align-items-center mt-2"},t.map((function(e,t){return a.a.createElement("button",{key:t,className:"btn btn-link icon-wrapper icon-wrapper--interactive icon-wrapper--secondary hr-2 text-decoration-none",style:{"--size":35},onClick:function(){return function(e){p(e),d()}(e)}},m===e?a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--12 text-secondary",src:oe.a}):a.a.createElement("span",{className:"text-secondary"},t+1))})))))}var rr=n("KoO3"),ar=n.n(rr);function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sr(e){var t=e.phaseId,n=e.projectImageId,o=e.togglePaginationActive,c=Object(i.b)(),l=ir(Object(r.useState)(!1),2),s=l[0],u=l[1],m=ir(Object(r.useState)([]),2),p=m[0],d=m[1],b=function(){o(),u(!s)},g=Object(ue.a)(gt,{onSuccess:function(){b(),d([]),c.invalidateQueries([Et,Number(n)])}});return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"bar__action-btn ".concat(s&&"is-active"," btn btn-link text-rest"),onClick:b},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--16",src:ar.a})),a.a.createElement(re,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:"Next phase",subtitle:"Add a new image for the next phase",modalOpen:s,toggleModal:b},vr),a.a.createElement("div",{className:"d-flex flex-column w-100"},a.a.createElement(Dt,{images:p,setImages:d}),a.a.createElement(ce,{title:"Next phase",onClick:function(){return g.mutate({phaseId:t,images:p})},extensionClasses:"mt-3 w-50 mx-auto justify-content-center"}))))}function ur(){return(ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gr(e){var t=e.projectUsers,n=e.togglePaginationActive,o=Object(r.useContext)(Kn).projectId,c=Object(i.b)(),l=fr(Object(r.useState)(!1),2),s=l[0],u=l[1],m=function(){n(),u(!s)};return a.a.createElement(a.a.Fragment,null,a.a.createElement(ce,{title:"Share",extensionClasses:"px-5",onClick:m},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--12 mr-1",src:sn.a})),a.a.createElement(re,ur({title:"Select users",subtitle:"Choose some users to collaborate with."},pr(pr({modalOpen:s,toggleModal:m},vr),{},{extensionClasses:"bar__modal bar__modal--right"})),a.a.createElement(bn,{users:t,project:{id:o},toggleModal:m,invalidateQueries:function(){c.invalidateQueries([Ot,o])}})))}var vr={renderOnBody:!1,center:!1,extensionClasses:"bar__modal",customAnimation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return{initial:{y:e,scale:.5,transformOrigin:"50% 100%",opacity:0},animate:{y:0,scale:1,opacity:1,transition:{type:"spring",damping:42,stiffness:800}},exit:{y:e,scale:.5,opacity:0,transition:{type:"spring",damping:42,stiffness:1200}}}}(20)},yr=n("eesx"),hr=n.n(yr);function Er(e){var t=e.allImages,n=e.allPhases,o=e.title,c=e.description,i=e.phaseNumber,l=e.phaseId,s=e.commentsPanelOpen,u=e.toggleCommentsPanel,m=e.projectUsers,p=e.togglePaginationActive,d=Object(r.useContext)(x),b=d.currentUser,g=d.userRole,v=Object(r.useContext)(Kn).projectImageId;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"bar bar--review"},a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"row gutters-0 justify-content-between align-items-center"},a.a.createElement("div",{className:"col-4 d-flex align-items-center"},a.a.createElement(Dr,{user:b,size:"lg"}),a.a.createElement("div",{className:"d-flex flex-column ml-3"},a.a.createElement("div",{className:"d-flex align-items-center lh--sm"},a.a.createElement("p",{className:"text--sm mb-0 text-truncate",style:{maxWidth:120}},o)),a.a.createElement("div",{className:"d-flex align-items-center lh--sm"},a.a.createElement("p",{className:"text--xs text-muted--70 mb-0"},t.indexOf(Number(v))+1," of ",t.length),a.a.createElement("span",{className:"mx-1 text-muted--20"},"/"),a.a.createElement(nr,{allPhases:n,phaseNumber:i,togglePaginationActive:p})))),a.a.createElement("div",{className:"col-auto d-flex align-items-center"},a.a.createElement("div",{className:"position-relative hr-2"},"admin"===g&&a.a.createElement(Hn,{title:o,description:c,projectImageId:v,togglePaginationActive:p})),a.a.createElement("button",{className:"bar__action-btn ".concat(s&&"is-active"," btn btn-link text-rest hr-2"),onClick:u},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--16",src:hr.a})),a.a.createElement("div",{className:"position-relative hr-2"},"admin"===g&&a.a.createElement(sr,{phaseId:l,projectImageId:v,togglePaginationActive:p}))),a.a.createElement("div",{className:"col-4 d-flex justify-content-end"},"admin"===g&&a.a.createElement(gr,{projectUsers:m,togglePaginationActive:p}))))))}function jr(){return(jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Or(e){var t,n,o=e.xPercent,c=e.yPercent,i=e.author,l=e.commentIndex,s=e.commentOpen,u=e.toggleComment,m=e.commentFocused,p=e.children,f=Object(r.useContext)(x).currentUser,b=i||f,g=(null!=l?l:0)+1;return a.a.createElement(q.a,{onClickAway:function(){s&&u()}},a.a.createElement(d.a.div,{layout:!0,transition:{duration:.1},className:"review__interaction",style:{"--x":o,"--y":c}},a.a.createElement(to,{title:null!==(t=null==i?void 0:i.display)&&void 0!==t?t:"Add comment",open:null!==(n=(null!=m&&m)===l)&&void 0!==n&&n},a.a.createElement(d.a.button,jr({},h,{className:"review__marker icon-wrapper icon-wrapper--secondary btn btn-link text-reset",style:{"--theme":"".concat(b.userColor)},onClick:u}),g&&a.a.createElement("span",{className:"text--xs"},g))),a.a.createElement("div",null,p)))}function wr(){return(wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xr(e){return function(e){if(Array.isArray(e))return _r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Sr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||Sr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(e,t){if(e){if("string"==typeof e)return _r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_r(e,t):void 0}}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pr(e){var t=e.comment,n=e.commentIndex,o=e.projectUsers,c=e.setReplyToUser,i=e.renderAuthor,l=void 0!==i&&i,s=e.showInitialReplies,u=void 0!==s&&s,m=e.setCommentFocused,b=void 0===m?function(){}:m,g=Object(r.useContext)(x).userRole,v=t.author,y=t.id,E=t.checked,j=t.created,O=t.comment,w=t.comments,N=Nr(Object(r.useState)(u),2),S=N[0],_=N[1],P=Nr(Object(r.useState)(E),2),I=P[0],A=P[1],k=Object(ue.a)(ft);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"comment",onMouseEnter:function(){return b(n)},onMouseLeave:function(){return b(null)}},l&&a.a.createElement("div",{className:"d-flex align-items-center mb-2"},a.a.createElement(Dr,{user:v}),a.a.createElement(Ur,{title:v.display,subtitle:"/ ".concat(v.organisation),layout:"horizontal",size:"sm"}),void 0!==n&&a.a.createElement("button",{className:"btn btn-link ml-auto icon-wrapper icon-wrapper--hsl icon-wrapper--interactive text-decoration-none",style:{"--theme":v.userColor},onClick:function(){"admin"===g&&(A(!I),k.mutate({commentId:y}))}},a.a.createElement(p.a,{exitBeforeEnter:!0},I&&"admin"===g?a.a.createElement(d.a.div,wr({key:"checked"},h),a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--10",src:oe.a})):a.a.createElement(d.a.span,wr({key:"not-checked"},h,{className:"text--xs"}),n+1)))),function(){var e=xr(O.matchAll(/@\[[^\]]*\]\{[0-9]+\}/gi)),t=O.split(/@\[[^\]]*\]\{[0-9]+\}/gi);return a.a.createElement("p",{className:"lh--md"},t.map((function(t,n){var r;return n in e&&(r=o.find((function(t){return e[n][0].includes(t.display)}))),a.a.createElement(a.a.Fragment,{key:n},a.a.createElement("span",{className:"comment__content"},"".concat(t," "))," ",r&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"comment__mention mentions__mention px-1",style:{"--theme":r.userColor}},a.a.createElement("span",null,"@",r.display))," "))})))}(),a.a.createElement("div",{className:"d-flex align-items-center mt-1"},a.a.createElement("p",{className:"comment__created text-muted--60 mb-0 hr-2"},j),a.a.createElement("p",{className:"comment__agree text-muted--60 mb-0 hr-2 font-weight-normal"},"7 agree"),a.a.createElement("button",{className:"comment__reply-toggle btn btn-link text-muted--60 mb-0 hr-2 font-weight-normal",onClick:function(){return c(v)}},a.a.createElement("span",{className:"btn-text text-white"},"Reply")),w.length>0&&a.a.createElement("button",{className:"comment__replies-toggle btn btn-link text-muted--60 mb-0 hr-2 font-weight-normal ml-auto text-white",onClick:function(){return _(!S)}},S?"Hide":"Show"," ",w.length," replies")),w.length>0&&S&&a.a.createElement("div",{className:"comment__replies"},w.map((function(e){return a.a.createElement(Pr,{key:e.id,comment:e,projectUsers:o,setReplyToUser:c,renderAuthor:!0})})))))}var Ir=n("qzzo"),Ar=n.n(Ir),kr=n("qSnX"),Cr=n.n(kr);function Rr(){return(Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dr(e){var t=e.user,n=e.project,r=e.variant,o=void 0===r?"default":r,c=e.size,i=void 0===c?"md":c,l=e.invalidateQueries,s=(null!=n?n:{}).id,u=null!=t?t:{},m=u.id,p=u.roles,d=(void 0===p?[]:p).includes(pe),b=Object(ue.a)(st,{onSuccess:function(){return l()}});return a.a.createElement("div",{className:"user user--".concat(i," user--").concat(o," ").concat(d&&"user--author")},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement(Lr,Rr({isLoading:b.isLoading},t),"interactive"===o&&!d&&a.a.createElement("button",{className:"user__action btn btn-link p-0",type:"button",onClick:function(){return b.mutate({projectId:s,userId:m})}},a.a.createElement(f.a,{wrapper:"svg",className:"user__action-icon icon icon--14",src:Cr.a})))),d&&a.a.createElement("div",{className:"user__status user__status--leader"},a.a.createElement(f.a,{wrapper:"svg",className:"user__status-icon icon text-tertiary mt-0",src:Ar.a})))}var Lr=function(e){var t=e.display,n=e.userColor,r=e.isLoading,o=e.children,c=t.split(" ").map((function(e){return e[0].toUpperCase()}));return a.a.createElement("div",{className:"user__avatar",style:{"--theme":n}},a.a.createElement(tn,{loading:r,loaderSize:16},a.a.createElement("span",{className:"user__initials"},c),o))},Ur=function(e){var t=e.title,n=e.subtitle,r=e.layout,o=void 0===r?"vertical":r,c=e.size,i=void 0===c?"lg":c;return a.a.createElement("div",{className:"user__info user__info--".concat(o," user__info--").concat(i," ml-2")},a.a.createElement("p",{className:"user__info-title mb-0"},t),n&&a.a.createElement("p",{className:"user__info-subtitle mb-0"},n))},Fr=n("MqZ5");function Mr(e,t){var n=document.querySelectorAll(".mentions .mentions__mention")||[];if(n.length>0)for(var r=function(r){var a=n[r],o=a.innerHTML.replace("@","").trim(),c=e.find((function(e){return e.display===o}));a.style.setProperty("--theme",c.userColor),t&&setTimeout((function(){t.focus(),t.setSelectionRange(200,-1)}),1)},a=0;a<n.length;a++)r(a)}function zr(e){return function(e){if(Array.isArray(e))return Tr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Tr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qr(e){var t=e.comment,n=e.setComment,o=e.mentions,c=e.setMentions,i=e.autoFocus,l=void 0!==i&&i,s=Object(r.useContext)(Kn).projectId,m=Object(u.a)([Ot,s],(function(){return it({projectId:s})})).data,p=void 0===m?[]:m,d=Object(r.useRef)();return Object(r.useEffect)((function(){o.length>0&&null!=d&&d.current&&Mr(p,d.current)}),[o,null==d?void 0:d.current]),a.a.createElement(a.a.Fragment,null,a.a.createElement(Fr.b,{value:t,className:"mentions",id:"comment",name:"comment",placeholder:"Say something nice...",onChange:function(e){return n(e.target.value)},onClick:function(){return Mr(p)},inputRef:d,autoFocus:l},a.a.createElement(Fr.a,{trigger:"@",data:p,renderSuggestion:qr,allowSpaceInQuery:!0,appendSpaceOnAdd:!0,className:"mentions__mention",displayTransform:function(e,t){return" @".concat(t," ")},markup:"@[__display__]{__id__}",onAdd:function(e){return c((function(t){return[].concat(zr(t),[e])}))}})))}var qr=function(e,t,n,r,o){return a.a.createElement("div",{className:"mention__suggestion vr-3"},a.a.createElement("button",{className:"user user--select user--xl ".concat(o&&"is-focused"),type:"button"},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement(Lr,e),a.a.createElement(Ur,{title:e.display,subtitle:e.organisation?e.organisation:"No organisation"}),a.a.createElement("div",{className:"user__add text-secondary rounded-circle ml-auto"},a.a.createElement(f.a,{wrapper:"svg",className:"user__add-icon icon icon--12 text-secondary",src:sn.a})))))};function Br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vr(e){var t=e.replyTo,n=e.commentId,o=e.setReplyToUser,c=Br(Object(r.useState)(),2),l=c[0],s=c[1],u=Br(Object(r.useState)([]),2),m=u[0],p=u[1];Object(r.useEffect)((function(){s("@[".concat(t.display,"]{").concat(t.id,"} ")),p([t.id])}),[t]);var d=Object(r.useContext)(x).currentUser,f=Object(i.b)(),b=Object(r.useContext)(Kn).projectImageId,g=Object(ue.a)(dt,{onSuccess:function(){f.invalidateQueries([Et,parseInt(b)]),o(null)}});return a.a.createElement("form",{className:"reply",onSubmit:function(e){e.preventDefault(),g.mutate({commentId:n,reply:l,mentioned:m})}},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement(Dr,{user:d}),a.a.createElement(Ur,{title:d.display,subtitle:"/ ".concat(d.organisation),layout:"horizontal",size:"sm"})),a.a.createElement("div",{className:"position-relative"},a.a.createElement(Qr,{comment:l,setComment:s,mentions:m,setMentions:p}),a.a.createElement(ce,{extensionClasses:"form-control-btn",type:"submit",contentType:"icon",theme:"default",isLoading:g.isLoading})))}function Wr(e,t){var n,r=t.reviewPos,a=Number(t.xPercent),o=Number(t.yPercent),c=(null==e||null===(n=e.current)||void 0===n?void 0:n.getBoundingClientRect())||{},i=c.width,l=void 0===i?400:i,s=c.height,u=void 0===s?228:s,m=30,p=30;return a+l/window.innerWidth*100>100&&(m=-l-10),o+u/(window.innerHeight-r.top)*100>100&&(p=-u-10),{left:"".concat(m,"px"),top:"".concat(p,"px")}}var Hr=["comment","commentIndex","toggleCommentAddOpen","commentFocused"],Yr=["comment","toggleComment","reviewRef"];function Xr(){return(Xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(n),!0).forEach((function(t){Gr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ea(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ta(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function na(e){var t=e.comment,n=e.commentIndex,o=e.toggleCommentAddOpen,c=e.commentFocused,i=ta(e,Hr),l=t.position,s=t.author,u=t.id,m=l.xPercent,d=l.yPercent,f=Zr(Object(r.useState)(!1),2),b=f[0],g=f[1],v=function(){b||o(),g(!b)};return te(b,g),a.a.createElement(Or,{xPercent:m,yPercent:d,author:s,commentIndex:n,commentOpen:b,toggleComment:v,commentFocused:c},a.a.createElement(p.a,null,b&&a.a.createElement(ra,Xr({key:u},Jr({comment:t,toggleComment:v},i)))))}var ra=function(e){var t=e.comment,n=e.toggleComment,o=e.reviewRef,c=ta(e,Yr),i=t.position,l=t.author,s=Zr(Object(r.useState)(i),2),u=s[0],m=s[1],p=Zr(Object(r.useState)(),2),b=p[0],g=p[1],y=Object(r.useRef)();return Object(r.useEffect)((function(){i&&m((function(){return i.reviewPos=o.current.getBoundingClientRect(),Wr(y,i)}))}),[i]),a.a.createElement(d.a.div,{className:"review__custom-modal custom-modal",style:{"--left":u.left,"--top":u.top}},a.a.createElement(d.a.div,Xr({key:"custom-modal-content",className:"custom-modal__content border p-5"},v(50)),a.a.createElement("div",{className:"custom-modal__header d-flex align-items-start"},a.a.createElement("div",{className:"d-flex align-items-center w-100"},a.a.createElement(Dr,{user:l,size:"xl"}),a.a.createElement("div",{className:"d-flex flex-column w-100 ml-3"},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("p",{className:"text--lg mb-0 lh--md"},l.display),a.a.createElement("button",{type:"button",className:"custom-modal__close btn btn-link ml-auto",onClick:n},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--12",src:w.a}))),a.a.createElement("p",{className:"text-muted--60 mb-0 text--sm lh--xs"},l.organisation)))),a.a.createElement("div",{className:"custom-modal__body d-flex mt-4"},a.a.createElement("div",{className:"d-flex flex-column w-100"},a.a.createElement(Pr,Jr({comment:t,setReplyToUser:g,showInitialReplies:!0},c)),b&&a.a.createElement(Vr,{replyTo:b,commentId:t.id,setReplyToUser:g})))))};function aa(){return(aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ia(e){var t=e.markerPos,n=e.phaseId,o=e.toggleCommentAddOpen,c=Object(r.useRef)(),l=Object(r.useRef)(),s=Wr(l,t),u=s.left,m=void 0===u?"30px":u,p=s.top,b=void 0===p?"30px":p,g=oa(Object(r.useState)(""),2),y=g[0],h=g[1],E=oa(Object(r.useState)([]),2),j=E[0],O=E[1];te(t,o);var N=Object(r.useContext)(x).currentUser,S=Object(i.b)(),_=Object(r.useContext)(Kn).projectImageId,P=Object(ue.a)(pt,{onSuccess:function(){S.invalidateQueries([Et,parseInt(_)]),o()}});return a.a.createElement(d.a.div,{layout:!0,transition:{duration:.1},ref:l,className:"review__custom-modal custom-modal",style:{"--left":m,"--top":b}},a.a.createElement(d.a.div,aa({key:"custom-modal-content",className:"custom-modal__content border p-5"},v(50)),a.a.createElement("div",{className:"custom-modal__header d-flex align-items-start"},a.a.createElement("div",{className:"d-flex align-items-center w-100"},a.a.createElement(Dr,{user:N,size:"xl"}),a.a.createElement("div",{className:"d-flex flex-column w-100 ml-3"},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("p",{className:"text--lg mb-0 lh--md"},"Add a comment"),a.a.createElement("button",{type:"button",className:"custom-modal__close btn btn-link ml-auto",onClick:o},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--12",src:w.a}))),a.a.createElement("p",{className:"mb-0 text--md lh--md"},a.a.createElement("span",{className:"text-muted--60"},"Comment or"),a.a.createElement("span",{className:"text-secondary"}," @mention ")," ",a.a.createElement("span",{className:"text-muted--60"},"someone"))))),a.a.createElement("div",{className:"custom-modal__body d-flex mt-4"},a.a.createElement("form",{ref:c,className:"d-flex flex-column align-items-center flex-grow-1",onSubmit:function(e){e.preventDefault(),y.length>0&&P.mutate({userId:N.id,phaseId:n,comment:y.trim(),mentioned:j,position:t})}},a.a.createElement("label",{className:"sr-only",htmlFor:"comment"},"Add a comment"),a.a.createElement("div",{className:"position-relative w-100"},a.a.createElement(Qr,{comment:y,setComment:h,mentions:j,setMentions:O,autoFocus:!0}),a.a.createElement(ce,{extensionClasses:"form-control-btn",type:"submit",contentType:"icon",theme:"default",isLoading:P.isLoading}))))))}function la(){return(la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sa(e){var t=e.allImages;ee("keyup",(function(e){"ArrowLeft"===e.key&&i&&u("prev");"ArrowRight"===e.key&&l&&u("next")}));var n=Object(s.g)(),o=Object(r.useContext)(Kn).projectImageId,c=t.indexOf(Number(o)),i=t[0===c?t.length-1:c-1],l=t[c===t.length-1?0:c+1];var u=function(e){"prev"===e&&n.push(i.toString()),"next"===e&&n.push(l.toString())};return t.length>1&&a.a.createElement(d.a.div,la({key:"pagination"},g,{className:"pagination"}),a.a.createElement("div",{className:"pagination__btn-wrapper pagination__btn-wrapper--prev"},a.a.createElement("button",{className:"pagination__btn pagination__btn--prev btn btn-link text-reset",type:"button",onClick:function(){return u("prev")}},a.a.createElement(f.a,{wrapper:"svg",className:"pagination__icon icon icon--12",src:Xn.a}))),a.a.createElement("div",{className:"pagination__btn-wrapper pagination__btn-wrapper--next"},a.a.createElement("button",{className:"pagination__btn pagination__btn--next btn btn-link text-reset",type:"button",onClick:function(){return u("next")}},a.a.createElement(f.a,{wrapper:"svg",className:"pagination__icon icon icon--12",src:Xn.a}))))}function ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ma(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ma(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pa(){return(pa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function da(e){var t=e.comments,n=e.commentsPanelOpen,r=e.toggleCommentsPanel,o=e.projectUsers,c=e.setCommentFocused;return te(n,r),a.a.createElement(d.a.div,pa({},j,{className:"panel panel--comments"}),a.a.createElement("div",{className:"panel__body"},a.a.createElement("div",{className:"d-flex align-items-baseline justify-content-between mb-6"},a.a.createElement("h5",{className:"text-capitalize"},"All comments"),a.a.createElement("button",{type:"button",className:"panel__close btn btn-link ml-auto",onClick:r},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--12",src:w.a}))),a.a.createElement("div",{className:"d-flex flex-column w-100"},null==t?void 0:t.map((function(e,t){return a.a.createElement(fa,{key:t,comment:e,commentIndex:t,projectUsers:o,setCommentFocused:c})})),0===t.length&&a.a.createElement("p",{className:"text-muted--70"},"No comments yet"))))}var fa=function(e){var t=e.comment,n=e.commentIndex,o=e.projectUsers,c=e.setCommentFocused,i=ua(Object(r.useState)(),2),l=i[0],s=i[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(Pr,{comment:t,commentIndex:n,setReplyToUser:s,renderAuthor:!0,projectUsers:o,setCommentFocused:c}),l&&a.a.createElement(Vr,{replyTo:l,commentId:t.id,setReplyToUser:s}))},ba=["parentId","title","phase"];function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){ya(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ea(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ja(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Oa(e){var t=e.parentId,n=e.title,o=e.phase,c=ja(e,ba),i=Object(u.a)([Ot,t],(function(){return it({projectId:t})}),{enabled:!!t}).data,l=void 0===i?[]:i,s=o.image,m=o.id,f=o.comments,b=o.phase,g=Object(r.useContext)(x).currentUser,v=Object(r.useRef)(),y=ha(Object(r.useState)(),2),h=y[0],E=y[1],O=ha(Object(r.useState)(!1),2),w=O[0],N=O[1],S=ha(Object(r.useState)(!1),2),_=S[0],P=S[1],I=ha(Object(r.useState)(!0),2),A=I[0],k=I[1],C=ha(Object(r.useState)(),2),R=C[0],D=C[1],L=function(){return E(null)},U=function(){P(!_),F()},F=function(){return k(!A)};return a.a.createElement(d.a.div,{className:"review position-relative mx-n12 mb-3 mt-n10 min-vh-100"},a.a.createElement(d.a.div,{className:"review__image-wrapper position-relative",ref:v,initial:{width:"100%"},animate:{width:_?"calc(100% - 400px)":"100%",transition:_?j.animate.transition:j.exit.transition}},a.a.createElement(Ka,{className:"review__image img-fluid w-100",src:s.original,srcSet:"".concat(s.original," 2x"),alt:n,onClick:function(e){var t=e.clientX,n=e.clientY;if(g.authenticated){var r=null==v?void 0:v.current.getBoundingClientRect();E((function(){return{xPercent:(t-10-r.x)/r.width*100,yPercent:(n-r.top-10)/r.height*100,reviewPos:r}}))}else N(!0)}}),null==f?void 0:f.map((function(e,t){return a.a.createElement(na,{key:e.id,comment:e,commentIndex:t,reviewRef:v,projectUsers:l,toggleCommentAddOpen:L,commentFocused:R})})),a.a.createElement(p.a,null,h&&a.a.createElement(Or,va({},h),a.a.createElement(ia,{markerPos:h,phaseId:m,toggleCommentAddOpen:L}))),a.a.createElement(Ma,{securityModalOpen:w,setSecurityModalOpen:N}),a.a.createElement(p.a,null,A&&a.a.createElement(sa,c))),a.a.createElement(Er,va(va({},c),{},{title:n,phaseNumber:b,phaseId:m,commentsPanelOpen:_,toggleCommentsPanel:U,projectUsers:l,togglePaginationActive:F})),a.a.createElement(p.a,null,_&&a.a.createElement(da,{comments:f,commentsPanelOpen:_,toggleCommentsPanel:U,projectUsers:l,setCommentFocused:D})))}function wa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Na={login:"/",signup:"/signup",projects:"/projects"},Sa=[{name:"login",path:"/",component:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Pa,null),a.a.createElement("main",{className:"main-content"},a.a.createElement(Q,null),a.a.createElement("div",{className:"pane"},a.a.createElement("div",{className:"pane__panel panel panel--login"},a.a.createElement("div",{className:"panel__body"},a.a.createElement("h1",{className:"text-uppercase text-white mb-0"},"Login"),a.a.createElement("p",{className:"text-muted--70 text-white mb-6"},"Login with your e-mail and password"),a.a.createElement(Qa,null))))))}},{name:"signup",path:"/signup",component:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Pa,null),a.a.createElement("main",{className:"main-content"},a.a.createElement(Q,null),a.a.createElement("div",{className:"pane"},a.a.createElement("div",{className:"pane__panel panel panel--login"},a.a.createElement("div",{className:"panel__body"},a.a.createElement("h1",{className:"text-uppercase text-white mb-0"},"Sign up"),a.a.createElement("p",{className:"text-muted--70 text-white mb-6"},"Sign up with your e-mail and password"),a.a.createElement(Ba,null))))))}},{name:"project-overview",path:"/projects",component:function(){var e=Ln(Object(r.useState)(),2),t=e[0],n=e[1];J("Projects");var o=Object(r.useContext)(x),c=o.currentUser,i=o.userRole,l=Object(u.a)(yt,(function(){return qe({userId:null==c?void 0:c.id})}),{enabled:!(null==c||!c.id)}),s=l.isLoading,m=l.data,p=void 0===m?[]:m;return a.a.createElement(cn,null,a.a.createElement(on,{isLoading:s},"admin"===i&&a.a.createElement(xn,{setNewProjectId:n}),a.a.createElement(Dn,{projects:p,newProjectId:t})))}},{name:"project-detail",path:"/projects/:id",component:function(){var e=Object(s.i)().id,t=Object(u.a)([ht,parseInt(e)],(function(){return Be({projectId:e})})),n=t.isLoading,r=t.data,o=void 0===r?{}:r;J(null==o?void 0:o.title,[o]);var c=o.title,i=o.description,l=o.users,m=o.id,p=o.author,d=o.email,f=o.projectImages;return a.a.createElement(cn,null,a.a.createElement(on,{isLoading:n},a.a.createElement(Fn,{title:c,description:i,users:l,id:m,author:p,email:d}),a.a.createElement(Qn,{projectImages:f,projectId:m})))}},{name:"project-review",path:"/projects/:id/review/:id",component:function(){var e=wa(Object(r.useState)(),2),t=e[0],n=e[1],o=Object(s.i)().id,c=Object(u.a)([Et,parseInt(o)],(function(){return Ze({projectImageId:o,phaseId:t})}),{refetchOnWindowFocus:!0}),i=c.isLoading,l=c.data,m=c.refetch;return Object(r.useEffect)((function(){t&&m({projectImage:o,phaseId:t})}),[t]),J(null==l?void 0:l.title,[l]),a.a.createElement(Kn.Provider,{value:{projectId:null==l?void 0:l.parentId,projectImageId:o,activePhase:t,setActivePhase:n}},a.a.createElement(cn,null,a.a.createElement(on,{isLoading:i},a.a.createElement(Oa,l))))}}];function _a(){return(_a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pa(){return a.a.createElement(d.a.header,_a({className:"main-header"},g),a.a.createElement("div",{className:"container-fluid px-5 pt-5 px-lg-6 pt-lg-6 px-xl-12 pt-xl-12"},a.a.createElement("div",{className:"main-header__logo logo"},a.a.createElement(l.b,{className:"logo__link text-reset",to:Na.login,title:"Parallel Dashboard"},a.a.createElement("h2",{className:"logo__title text-uppercase mb-0"},"Parallel"),a.a.createElement("p",{className:"logo__subtitle text-uppercase font-weight-light mt-n1"},"Dashboard")))))}function Ia(){var e=Object(s.g)(),t=Object(r.useContext)(x).setCurrentUser,n=Object(ue.a)(ze,{onSuccess:function(){e.push(Na.login),t(null),sessionStorage.removeItem("userId"),Object(m.b)(a.a.createElement(U,{message:"Successfully logged out!",appearance:"success"}))},onError:function(){return Object(m.b)(a.a.createElement(U,{message:"Something went wrong!",appearance:"danger"}))}});return a.a.createElement("header",{className:"main-header main-header--projects"},a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"main-header__wrapper d-flex align-items-end"},a.a.createElement("div",{className:"main-header__logo logo"},a.a.createElement(l.b,{className:"logo__link text-reset",to:Na.projects,title:"Parallel Dashboard"},a.a.createElement("h2",{className:"logo__title text-uppercase text-white mb-0"},"Parallel"),a.a.createElement("p",{className:"logo__subtitle text-uppercase text-white font-weight-light mt-n1"},"Dashboard"))),a.a.createElement("div",{className:"main-header__nav ml-auto"},a.a.createElement("ul",{className:"nav nav--primary"},a.a.createElement("li",{className:"nav-item"},a.a.createElement("button",{href:"{{ path('app_logout') }}",title:"Logout",className:"nav-link btn btn-link text-reset",onClick:function(){return n.mutate()}},a.a.createElement("span",{className:"nav-text"},"Logout"))))))))}var Aa=["users","layout","useLayout"];function ka(){return(ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ra(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Da(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function La(e){var t=e.users,n=e.layout,r=void 0===n?"full":n,o=e.useLayout,c=void 0===o||o,i=Da(e,Aa),l="minimal"===r?7:1/0;return a.a.createElement("div",{className:"row align-items-center gutters-1"},a.a.createElement(p.a,null,t.slice(0,l).map((function(e){return a.a.createElement(d.a.div,ka({layout:c},h,{className:"col-auto",key:e.id}),a.a.createElement(Dr,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach((function(t){Ra(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({user:e},i)))})),"minimal"===r&&t.length>7&&a.a.createElement(d.a.div,ka({layout:!0},h,{className:"col-auto",key:"more"}),a.a.createElement("p",{className:"text--sm text-muted--70 ml-1"},"+ ",t.length-l))))}function Ua(){return(Ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fa(e){var t=e.user,n=e.userIndex,o=e.handleClick,c=e.isFocused,i=e.setFocusedUser,l=e.isLoading;Object(r.useEffect)((function(){c&&i(n)}),[c]),Object(r.useEffect)((function(){return function(){return i(0)}}),[]);var s=function(e){i("enter"===e?n:0)};return a.a.createElement("button",{className:"user user--select ".concat(c&&"is-focused"," user--xl"),onClick:function(){return o(t)},onMouseEnter:function(){return s("enter")},onMouseLeave:function(){return s("leave")},type:"button"},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement(Lr,Ua({isLoading:l&&c},t)),a.a.createElement(Ur,{title:t.display,subtitle:t.organisation?t.organisation:"No organisation"}),a.a.createElement("div",{className:"user__add text-secondary rounded-circle ml-auto"},a.a.createElement(f.a,{wrapper:"svg",className:"user__add-icon icon icon--12 text-secondary",src:sn.a}))))}function Ma(e){var t=e.securityModalOpen,n=e.setSecurityModalOpen,o=Object(r.useContext)(x),c=o.currentUser,i=o.userRole,l="basic"===i?"Signup":"Login",s="".concat(l," if you want to comment"),u=function(){return n(!t)};return a.a.createElement(re,{title:l,subtitle:s,modalOpen:t,toggleModal:u},"basic"===i?a.a.createElement(Ba,{currentUser:c,toggleModal:u,showLogin:!1}):a.a.createElement(Qa,{currentUser:c,toggleModal:u,showSignup:!1}))}var za=n("NKCw");function Ta(){return(Ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qa(e){var t,n,o=e.currentUser,c=e.toggleModal,s=e.showSignup,u=void 0===s||s,p=Object(r.useRef)();J("Login");var d=Object(i.b)(),f=Object(za.a)({reValidateMode:"onChange",mode:"onBlur"}),b=f.register,g=f.handleSubmit,v=f.formState.errors,y=Object(ue.a)(Me,{onSuccess:function(e){d.invalidateQueries(vt),o&&c(),Object(m.b)(a.a.createElement(U,{message:"Successfully logged in!",appearance:"success"}))},onError:function(e){var t,n;Object(m.b)(a.a.createElement(U,{message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.error?"Email/password combination not found!":"Something went wrong!",appearance:"danger"})),v.email={message:"Email/password combination not found"},v.password={message:"Email/password combination not found"}}});return a.a.createElement("form",{ref:p,className:"panel__form form",onSubmit:g((function(){return y.mutate({formRef:p})})),noValidate:!0},a.a.createElement("div",{className:"row gutters-2"},a.a.createElement("div",{className:"col-12"},a.a.createElement("label",{className:"sr-only",htmlFor:"inputEmail"},"Email"),a.a.createElement("input",Ta({type:"email",className:"form-control ".concat(v.email&&"is-invalid"),id:"inputEmail",name:"email",placeholder:"Email",autoFocus:!0},b("email",{required:!0}))),v.email&&a.a.createElement("div",{className:"invalid-feedback"},null!==(t=v.email)&&void 0!==t&&t.message?v.email.message:"Please enter a valid email")),a.a.createElement("div",{className:"col-12"},a.a.createElement("label",{className:"sr-only",htmlFor:"inputPassword"},"Password"),a.a.createElement("input",Ta({type:"password",className:"form-control ".concat(v.password&&"is-invalid"),id:"inputPassword",name:"password",placeholder:"Password"},b("password",{required:!0}))),v.password&&a.a.createElement("div",{className:"invalid-feedback"},null!==(n=v.password)&&void 0!==n&&n.message?v.password.message:"Please enter a password"))),a.a.createElement("div",{className:"row gutters-2"},a.a.createElement("div",{className:"col-12 col-md"},a.a.createElement(ce,{title:"Log in",theme:"secondary",size:"md",extensionClasses:"btn-block justify-content-center",type:"submit",isLoading:y.isLoading})),u&&a.a.createElement("div",{className:"col-12 col-md"},a.a.createElement(l.b,{className:"btn btn-outline-white btn-block",to:Na.signup,title:"sign up"},a.a.createElement("span",{className:"btn__text"},"Sign up")))))}function qa(){return(qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ba(e){var t=e.currentUser,n=e.toggleModal,o=e.showLogin,c=void 0===o||o,s=Object(r.useRef)();J("Signup");var u=Object(i.b)(),p=Object(za.a)({reValidateMode:"onChange",mode:"onBlur"}),d=p.register,f=p.handleSubmit,b=p.formState.errors,g=p.control,v=Object(za.b)({control:g,name:"plainPassword",defaultValue:""}),y=Object(ue.a)(Fe,{onSuccess:function(){u.invalidateQueries(vt),Object(m.b)(a.a.createElement(U,{message:"Successfully logged in!",appearance:"success"})),t&&n()},onError:function(e){500===e.response.status&&(Object(m.b)(a.a.createElement(U,{message:"This email is already in use!",appearance:"danger"})),s.current.reset())}});return a.a.createElement("form",{ref:s,className:"panel__form form",onSubmit:f((function(){return y.mutate({formRef:s,userId:null==t?void 0:t.id})})),noValidate:!0},a.a.createElement("div",{className:"row gutters-2"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("label",{className:"sr-only",htmlFor:"registration_form_username"},"Your name"),a.a.createElement("input",qa({type:"text",id:"registration_form_username",name:"username",className:"form-control ".concat(b.username&&"is-invalid"),placeholder:"Full name"},d("username",{required:{value:!0,message:"Please enter a name"}}))),b.username&&a.a.createElement("div",{className:"invalid-feedback"},b.username.message)),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("label",{className:"sr-only",htmlFor:"registration_form_organisation"},"Organisation"),a.a.createElement("input",qa({type:"text",id:"registration_form_organisation",name:"organisation",className:"form-control ".concat(b.organisation&&"is-invalid"),placeholder:"Organisation"},d("organisation",{required:{value:!0,message:"Please enter an organisation"}}))),b.organisation&&a.a.createElement("div",{className:"invalid-feedback"},b.organisation.message)),a.a.createElement("div",{className:"col-12"},a.a.createElement("label",{className:"sr-only",htmlFor:"registration_form_email"},"Email"),a.a.createElement("input",qa({type:"text",id:"registration_form_email",name:"email",className:"form-control ".concat(b.email&&"is-invalid"),placeholder:"Email",value:null==t?void 0:t.email,onChange:function(){}},d("email",{required:{value:!0,message:"Please enter an email"}}))),b.email&&a.a.createElement("div",{className:"invalid-feedback"},b.email.message)),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("label",{className:"sr-only",htmlFor:"registration_form_plainPassword"},"Password"),a.a.createElement("input",qa({type:"password",id:"registration_form_plainPassword",name:"plainPassword",className:"form-control ".concat(b.password&&"is-invalid"),placeholder:"Password"},d("plainPassword",{required:{value:!0,message:"Please enter a password"},minLength:{value:6,message:"Please enter a password of atleast 6 characters"}}))),b.plainPassword&&a.a.createElement("div",{className:"invalid-feedback"},b.plainPassword.message)),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("label",{className:"sr-only",htmlFor:"login-confirm-password"},"Confirm password"),a.a.createElement("input",qa({type:"password",className:"form-control ".concat(b.passwordConfirm&&"is-invalid"),id:"login-confirm-password",placeholder:"Confirm password",name:"passwordConfirm"},d("passwordConfirm",{required:{value:!0,message:"Please confirm your password"},validate:function(e){return e===v||"The passwords do not match"}}))),b.passwordConfirm&&a.a.createElement("div",{className:"invalid-feedback"},b.passwordConfirm.message))),a.a.createElement("div",{className:"row gutters-2"},a.a.createElement("div",{className:"col-12 col-md"},a.a.createElement(ce,{title:"Sign up",theme:"secondary",size:"md",extensionClasses:"btn-block justify-content-center",type:"submit",isLoading:y.isLoading})),c&&a.a.createElement("div",{className:"col-12 col-md"},a.a.createElement(l.b,{className:"btn btn-outline-white btn-block",to:Na.login,title:"sign up"},a.a.createElement("span",{className:"btn__text"},"Login")))))}function $a(){return($a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(n),!0).forEach((function(t){Ha(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ya(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ka(e){var t=Ya(Object(r.useState)(!1),2),n=t[0],o=t[1],c={duration:.2,ease:[.65,0,.35,1]},i={hidden:{opacity:0,transition:c},visible:{opacity:1,transition:c}};return a.a.createElement(d.a.img,$a({key:e.src,initial:"hidden",animate:n?"visible":"hidden"},Wa(Wa({},e),{},{onLoad:function(){return o(!0)},variants:i})))}var Ja=n("jAlv"),Ga=["children"];function Za(){return(Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function eo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function to(e){var t=e.children,n=eo(e,Ga);return a.a.createElement(Ja.Tooltip,Za({position:"top",animation:"shift",duration:150,distance:15,arrow:!0,arrowSize:"small",trigger:"click"},n,{style:{display:"flex"}}),t)}function no(){return(no=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){oo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return io(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return io(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function io(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lo(){return a.a.createElement(l.a,null,a.a.createElement(so,null))}var so=function(){var e=co(Object(r.useState)(),2),t=e[0],n=e[1],o=co(Object(r.useState)([]),2),c=o[0],i=o[1],l=co(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",a=Object(r.useState)((function(){try{var r=window[n].getItem(e);return t&&!r&&window[n].setItem(e,t),r?JSON.parse(r):t}catch(e){return t}})),o=G(a,2),c=o[0],i=o[1],l=function(t){try{var r=t instanceof Function?t(c):t;i(r),window[n].setItem(e,JSON.stringify(r))}catch(e){throw new Error(e)}};return[c,l]}("userId",atob(window.location.search.replace("?",""))),1)[0],f=Object(s.h)(),b=Object(u.a)(vt,(function(){return ot({userId:l})}),{retry:!1,onSuccess:function(e){var t;n(e),i((t=e.roles).includes(pe)?"admin":t.includes(fe)?"basic":t.includes(de)?"user":void 0)}}).isLoading;return a.a.createElement(x.Provider,{value:{currentUser:t,setCurrentUser:n,userRole:c}},a.a.createElement(on,{isLoading:b},a.a.createElement(p.a,{exitBeforeEnter:!0},a.a.createElement(s.d,{location:f,key:f.pathname},t&&[Na.login,Na.signup].includes(f.pathname)&&a.a.createElement(s.a,{to:Na.projects}),!t&&f.pathname.includes(Na.projects)&&a.a.createElement(s.a,{to:Na.login}),Sa.map((function(e){var n=e.path,r=e.component,o=e.props;return a.a.createElement(s.b,{key:n,path:n,exact:!0},a.a.createElement(d.a.div,no({key:n},g,{transition:{duration:.1,ease:[.65,0,.35,1]}}),![Na.login,Na.signup,"review"].includes(f.pathname)&&!f.pathname.includes("review")&&a.a.createElement(Ia,null),a.a.createElement(r,ao(ao({},o),{},{currentUser:t,userRole:c}))))}))))),a.a.createElement(m.a,{hideProgressBar:!0,newestOnTop:!0,position:"bottom-left",closeButton:!1}))},uo=new c.a({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),mo=document.getElementById("app");null!==mo&&Object(o.render)(a.a.createElement(i.a,{client:uo},a.a.createElement(lo,null)),mo)},CrUY:function(e,t,n){e.exports=n.p+"img/background-login@2x.57f2a279.jpg"},H1Be:function(e,t,n){e.exports=n.p+"img/background-login.955534e8.jpg"},Km7m:function(e,t,n){},KoO3:function(e,t,n){e.exports=n.p+"img/next.1095f87f.svg"},RClv:function(e,t,n){e.exports=n.p+"img/upload.47dd6e02.svg"},ScKw:function(e,t,n){e.exports=n.p+"img/danger.9f70266e.svg"},SwPm:function(e,t,n){e.exports=n.p+"img/leave.e3a2f47d.svg"},X8eM:function(e,t,n){e.exports=n.p+"img/add_project.abae0cbd.svg"},X931:function(e,t,n){e.exports=n.p+"img/add_user.912dfe06.svg"},YaYb:function(e,t,n){e.exports=n.p+"img/close-white.b044adee.svg"},eesx:function(e,t,n){e.exports=n.p+"img/comment.e9876f33.svg"},qSnX:function(e,t,n){e.exports=n.p+"img/delete.cfd679bb.svg"},qzzo:function(e,t,n){e.exports=n.p+"img/star.93031288.svg"},ukBR:function(e,t,n){e.exports=n.p+"img/chevron.fd97bb8f.svg"},yqFz:function(e,t,n){e.exports=n.p+"img/add_image.fef9d2c9.svg"}});