!function(e){function t(t){for(var r,c,i=t[0],l=t[1],s=t[2],m=0,d=[];m<i.length;m++)c=i[m],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);d.length;)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={main:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/build/app/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;o.push(["9XVo",0]),n()}({"+Bf/":function(e,t,n){e.exports=n.p+"img/success.c9b1caae.svg"},"/5e6":function(e,t,n){e.exports=n.p+"img/warning.c09f2b53.svg"},"0QAq":function(e,t,n){e.exports=n.p+"img/check.bf18523b.svg"},"1zgo":function(e,t,n){e.exports=n.p+"img/archive.fa6029eb.svg"},"3h9j":function(e,t,n){e.exports=n.p+"img/close.ff2e588e.svg"},"8Me5":function(e,t,n){e.exports=n.p+"img/edit.dc6498b8.svg"},"9XVo":function(e,t,n){"use strict";n.r(t);n("Km7m"),n("ls82");var r=n("q1tI"),a=n.n(r),o=n("i8i4"),c=n("PC6D"),i=n("+QN0"),l=n("55Ip"),s=n("Ty5D"),u=n("Uvq/"),m=n("FGyW"),d=n("8PNI"),p=n("ATyU"),f=n("y6dH"),g=[.65,0,.35,1],v={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:g,duration:.2}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return{initial:{y:e,opacity:0},animate:{y:0,opacity:1,transition:{type:"spring",damping:42,stiffness:800}},exit:{y:e,opacity:0,transition:{type:"spring",damping:42,stiffness:1200}}}},y={initial:{y:"100%"},animate:{y:"0%",transition:{type:"spring",damping:41,stiffness:600}},exit:{y:"100%",transition:{type:"spring",damping:41,stiffness:1200}}},h={initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{ease:g,duration:.2}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{initial:{opacity:0,y:35},animate:{opacity:1,y:0,transition:{type:"spring",damping:30,stiffness:450,delay:.035*e}},exit:{opacity:0,scale:.25,transition:{type:"spring",damping:30,stiffness:600}}}},w={initial:{x:"-100%"},animate:{x:"0%",transition:{duration:.2,ease:[.65,0,.35,1]}},exit:{x:"-100%",transition:{duration:.1,ease:[.65,0,.35,1]}}},j=n("3h9j"),O=n.n(j),x=a.a.createContext();function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e){var t=e.selected,n=e.resetSelected,o=e.actions,c=Object(r.useContext)(x).userRole;return a.a.createElement(p.a.div,N({},y,{className:"bar bar--project"}),a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-auto d-flex align-items-center"},a.a.createElement("button",{type:"button",className:"bar__btn btn btn-link d-inline-flex text-white",onClick:n},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--14",src:O.a})),a.a.createElement("p",{className:"ml-2 mb-0"},t.length," selected")),a.a.createElement("div",{className:"col-auto ml-auto"},a.a.createElement("ul",{className:"bar__list list d-flex align-items-center"},o.map((function(e,t){var n=e.title,r=e.theme,o=e.hasPermission,i=e.icon,l=e.iconSize,s=void 0===l?12:l,u=e.mutation,m=void 0===u?function(){}:u,d=e.isLoading,p=void 0!==d&&d;if(o.includes(c))return a.a.createElement("li",{key:t,className:"list__item"},a.a.createElement("button",{className:"bar__btn btn btn-link d-flex align-items-center text-decoration-none",onClick:m},a.a.createElement("div",{className:"icon-wrapper icon-wrapper--".concat(r," icon-wrapper--interactive")},a.a.createElement(zt,{loading:p,loaderSize:12,classes:{loaderClasses:"position-absolute d-flex text-".concat(r)}},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--".concat(s," text-").concat(r),src:i}))),a.a.createElement("span",{className:"btn__text text-white ml-2"},n)))})))))))}var S=n("YaYb"),P=n.n(S),I=n("/5e6"),k=n.n(I),C=n("ScKw"),A=n.n(C),R=n("+Bf/"),L=n.n(R),U={warning:{title:"Warning",icon:k.a},danger:{title:"Error",icon:A.a},success:{title:"Success",icon:L.a}};function D(e){var t=e.message,n=e.appearance,r=e.closeToast;return a.a.createElement("div",{className:"alert alert--notification",role:"alert","data-alert":!0},a.a.createElement("div",{className:"d-flex align-items-center w-100"},a.a.createElement("div",{className:"alert__icon-wrapper alert__icon-wrapper--".concat(n," mr-2")},a.a.createElement(f.a,{wrapper:"svg",className:"alert__icon icon icon--12",src:U[n].icon})),a.a.createElement("p",{className:"mb-0"},U[n].title),a.a.createElement("button",{className:"alert__btn btn btn-link ml-auto",type:"button",onClick:r},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--10",src:P.a}))),a.a.createElement("span",{className:"alert__message text--sm text-muted--70 mr-lg-8"},t))}var F=n("H1Be"),M=n.n(F),T=n("CrUY"),z=n.n(T);function q(){return a.a.createElement("div",{className:"background"},a.a.createElement("img",{className:"background__image",src:M.a,srcSet:z.a,alt:"Background"}))}function B(e){var t=e.title,n=e.subtitle,r=e.toggleModal;return a.a.createElement("div",{className:"custom-modal__header d-flex align-items-start"},a.a.createElement("div",{className:"d-flex align-items-center w-100"},a.a.createElement("div",{className:"d-flex flex-column w-100"},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("p",{className:"custom-modal__title"},t),a.a.createElement("button",{type:"button",className:"custom-modal__close btn btn-link ml-auto",onClick:r},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--12",src:O.a}))),n&&a.a.createElement("p",{className:"custom-modal__subtitle"},n))))}function Q(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(){var e=$(Object(r.useState)([]),2),t=e[0],n=e[1];return{selected:t,updateSelected:function(e){n((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat(Q(t),[e])}))},resetSelected:function(){return n([])}}}function X(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(r.useEffect)((function(){document.title="".concat(e?e+" | Parallel Dashboard":document.title)}),X(t))}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=t}),[t]),Object(r.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return a.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])}function ee(e,t){Z("keyup",Object(r.useCallback)((function(n){var r=n.key;["Escape"].includes(r)&&e&&t()})))}function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ne(e){var t=e.title,n=e.subtitle,r=e.modalOpen,c=e.toggleModal,i=e.children,l=e.renderOnBody,s=void 0===l||l,u=e.center,m=void 0===u||u,f=e.extensionClasses,g=e.components,y=(void 0===g?{}:g).HeaderComponent,h=void 0===y?B:y;ee(r,c);var E=function(){return a.a.createElement(d.a,null,r&&a.a.createElement("div",{className:"custom-modal ".concat(m&&"custom-modal--center"," ").concat(f)},a.a.createElement(p.a.div,te({className:"custom-modal-overlay"},v,{onClick:c})),a.a.createElement(p.a.div,te({key:"custom-modal-content",className:"custom-modal__content border p-5"},b()),a.a.createElement(h,{title:t,subtitle:n,toggleModal:c}),a.a.createElement("div",{className:"custom-modal__body d-flex mt-2"},i))))};return s?Object(o.createPortal)(E(),document.body):E()}var re=n("XIP4"),ae=n.n(re);function oe(e){var t,n=e.title,o=e.type,c=void 0===o?"button":o,i=e.theme,l=void 0===i?"secondary":i,s=e.size,u=void 0===s?"sm":s,m=e.extensionClasses,d=void 0===m?"":m,p=e.onClick,f=void 0===p?function(){}:p,g=e.isLoading,v=void 0!==g&&g,b=e.contentType,y=void 0===b?"text":b,h=e.children,E=Object(r.useRef)(),w=null===(t=E.current)||void 0===t?void 0:t.getBoundingClientRect().height;return a.a.createElement("button",{ref:E,className:"btn btn-".concat(u," btn-").concat(l," ").concat(d," d-flex align-items-center"),style:{height:w},type:c,onClick:f},"text"===y?a.a.createElement(ce,{title:n,isLoading:v,children:h}):a.a.createElement(ie,{isLoading:v}))}var ce=function(e){var t=e.title,n=e.isLoading,r=e.children;return a.a.createElement(zt,{loading:n,loaderSize:16,classes:{loaderClasses:"position-absolute d-flex text-secondary",defaultClasses:"d-flex align-items-center"}},a.a.createElement("span",{className:"btn__text"},t),r)},ie=function(e){var t=e.isLoading;return a.a.createElement("div",{className:"icon-wrapper icon-wrapper--secondary icon-wrapper--interactive"},a.a.createElement(zt,{loading:t,loaderSize:14,classes:{loaderClasses:"position-absolute d-flex text-secondary",defaultClasses:"d-flex"}},a.a.createElement(f.a,{wrapper:"svg",className:"alert__icon icon icon--14 text-secondary",src:ae.a})))},le=n("yzbm"),se=n("SR//");function ue(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}var me="ROLE_ADMIN",de="ROLE_USER",pe="ROLE_USER_BASIC";var fe=n("fKpH"),ge=n.n(fe);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){he(o,r,a,c,i,"next",e)}function i(e){he(o,r,a,c,i,"throw",e)}c(void 0)}))}}var we={maxWidth:300,maxHeight:300,quality:100,rotation:0,outputType:"file"};function je(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Ee(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){ge.a.imageFileResizer(t,n.maxWidth,n.maxHeight,t.path.split(".").pop(),n.quality,n.rotation,(function(t){e(t)}),n.outputType)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Ee(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,be(be({},we),{},{maxWidth:268,maxHeight:236}));case 2:return n=e.sent,e.next=5,je(t,be(be({},we),{},{maxWidth:536,maxHeight:472}));case 5:return r=e.sent,e.abrupt("return",{original:t,thumbnail:n,thumbnailRetina:r});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e){return Se.apply(this,arguments)}function Se(){return(Se=Ee(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Ee(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pe=n("yqFz"),Ie=n.n(Pe),ke=n("RClv"),Ce=n.n(ke),Ae=n("vDqi"),Re=n.n(Ae);function Le(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Le(o,r,a,c,i,"next",e)}function i(e){Le(o,r,a,c,i,"throw",e)}c(void 0)}))}}var De=function(){var e=Ue(regeneratorRuntime.mark((function e(t){var n,r,a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formRef,r=t.userId,a="/api/signup",r&&(a="/api/signup/".concat(r)),o=new FormData(n.current),e.next=6,Re.a.post(a,o);case 6:return c=e.sent,e.abrupt("return",null==c?void 0:c.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Ue(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formRef,r=new FormData(n.current),e.next=4,Re.a.post("/api/login",{email:r.get("email"),password:r.get("password")});case 4:return a=e.sent,e.abrupt("return",null==a?void 0:a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Ue(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.a.get("/api/logout");case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Te(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Te(o,r,a,c,i,"next",e)}function i(e){Te(o,r,a,c,i,"throw",e)}c(void 0)}))}}var qe=function(){var e=ze(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,e.next=3,Re.a.get("/api/projects/get/".concat(n));case 3:return r=e.sent,e.abrupt("return",null==r?void 0:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=ze(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,e.next=3,Re.a.get("/api/project/get/".concat(n));case 3:return r=e.sent,e.abrupt("return",null==r?void 0:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=ze(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.a.post("/api/projects/add");case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=ze(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectIds,r=new FormData,n.forEach((function(e){return r.append("projects[]",e)})),e.next=5,Re.a.post("/api/projects/delete",r);case 5:return a=e.sent,e.abrupt("return",null==a?void 0:a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=ze(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectIds,r=t.userId,a=new FormData,n.forEach((function(e){return a.append("projects[]",e)})),e.next=5,Re.a.post("/api/projects/leave/".concat(r),a);case 5:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=ze(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formRef,r=t.id,a=new FormData(n.current),e.next=4,Re.a.post("/api/projects/edit/".concat(r),a);case 4:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function We(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Xe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){We(o,r,a,c,i,"next",e)}function i(e){We(o,r,a,c,i,"throw",e)}c(void 0)}))}}var Ye=function(){var e=Xe(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectImageId,e.next=3,Re.a.get("/api/images/get/".concat(n));case 3:return r=e.sent,e.abrupt("return",null==r?void 0:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Xe(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,r=t.images,a=new FormData,r.forEach((function(e,t){a.append("images[".concat(t,"][original]"),e.original),a.append("images[".concat(t,"][thumbnail]"),e.thumbnail),a.append("images[".concat(t,"][thumbnailRetina]"),e.thumbnailRetina)})),e.next=5,Re.a.post("/api/images/add/".concat(n),a);case 5:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Xe(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,r=t.projectImageIds,a=new FormData,r.forEach((function(e){return a.append("projectImages[]",e)})),e.next=5,Re.a.post("/api/images/delete/".concat(n),a);case 5:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=Xe(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formRef,r=t.id,a=new FormData(n.current),e.next=4,Re.a.post("/api/images/edit/".concat(r),a);case 4:return o=e.sent,e.abrupt("return",null==o?void 0:o.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ze(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function et(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Ze(o,r,a,c,i,"next",e)}function i(e){Ze(o,r,a,c,i,"throw",e)}c(void 0)}))}}var tt=function(){var e=et(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r="/api/users/get",n&&(r="".concat(r,"/").concat(n)),e.next=5,Re.a.get(r);case 5:return a=e.sent,e.abrupt("return",null==a?void 0:a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=et(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.a.get("/api/users/get/all");case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=et(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,r=t.email,e.next=3,Re.a.post("/api/users/add/".concat(n),{email:r,referer:window.location.pathname.replace("/","")});case 3:return a=e.sent,e.abrupt("return",null==a?void 0:a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=et(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,r=t.userId,e.next=3,Re.a.post("/api/users/delete/".concat(n),{userId:r});case 3:return a=e.sent,e.abrupt("return",null==a?void 0:a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ot(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ct(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){ot(o,r,a,c,i,"next",e)}function i(e){ot(o,r,a,c,i,"throw",e)}c(void 0)}))}}var it=function(){var e=ct(regeneratorRuntime.mark((function e(t){var n,r,a,o,c,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.phaseId,r=t.userId,a=t.comment,o=t.mentioned,c=t.position,(i=new FormData).append("userId",r),i.append("comment",a),i.append("positionX",c.xPercent),i.append("positionY",c.yPercent),i.append("referer",window.location.pathname.replace("/","")),o.length&&i.append("mentioned[]",o),e.next=10,Re.a.post("/api/comments/add/".concat(n),i);case 10:return l=e.sent,e.abrupt("return",null==l?void 0:l.data);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lt=function(){var e=ct(regeneratorRuntime.mark((function e(t){var n,r,a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commentId,r=t.reply,a=t.mentioned,(o=new FormData).append("reply",r),o.append("referer",window.location.pathname.replace("/","")),a.length&&o.append("mentioned[]",a),e.next=7,Re.a.post("/api/comments/reply/".concat(n),o);case 7:return c=e.sent,e.abrupt("return",null==c?void 0:c.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st="current_user",ut="project_by_user",mt="project_by_id",dt="project_image_by_id",pt="global_users";function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ht(e){var t=e.projectId,n=e.positition,r=void 0===n?"left":n,o=e.children,c=Object(i.b)(),l=Object(le.a)({accept:"image/*",noClick:!0,onDrop:function(e){return f("add",{images:e})}}),s=l.getRootProps,u=l.getInputProps,m=l.isDragActive,d=Object(se.a)(Ke,{onSuccess:function(){return c.invalidateQueries([mt,t])}}),p=Object(se.a)(Je,{onSuccess:function(){return c.invalidateQueries([mt,t])}}),f=function(){var e,n=(e=regeneratorRuntime.mark((function e(n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n||!r.images){e.next=5;break}return e.next=3,_e(r.images);case 3:a=e.sent,d.mutate({projectId:t,images:a});case 5:"delete"===n&&p.mutate(vt({projectId:t},r));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){yt(o,r,a,c,i,"next",e)}function i(e){yt(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}();return a.a.createElement("div",ft({className:"dropzone"},s()),a.a.createElement("input",u()),a.a.createElement(Et,{addImageLoading:d.isLoading,updateProjectImages:f,isParentDragActive:m,positition:r}),a.a.createElement("div",{className:"row row--equalized gutters-5"},o({updateProjectImages:f,isLoading:p.isLoading})))}var Et=function(e){var t=e.addImageLoading,n=e.updateProjectImages,r=e.isParentDragActive,o=e.positition,c=Object(le.a)({accept:"image/*",noDragEventsBubbling:!0,onDrop:function(e){return n("add",{images:e})}}),i=c.getRootProps,l=c.getInputProps,s=c.isDragActive;return a.a.createElement("div",ft({className:"dropzone"},i()),a.a.createElement("input",l()),a.a.createElement(d.a,null,(s||r)&&a.a.createElement(p.a.div,ft({},v,{className:"dropzone__overlay"}),a.a.createElement("div",{className:"icon-wrapper icon-wrapper--secondary",style:{"--size":75}},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--30 text-secondary",src:Ce.a})))),a.a.createElement(p.a.button,ft({},h,{key:"add-project",type:"button",className:"icon-wrapper icon-wrapper--interactive icon-wrapper--secondary btn btn-link btn--add btn--add-".concat(o),style:{"--size":75}}),a.a.createElement(zt,{loading:t,classes:{loaderClasses:"position-absolute d-flex text-secondary"},loaderSize:30},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--30 text-secondary",src:Ie.a}))))},wt=n("g3U7");function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){St(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e){var t=e.fields,n=e.toggleModal,o=e.mutation,c=e.mutationId,i=e.mutationOnSuccess,l=Object(r.useRef)(),s=Object(se.a)(o,{onSuccess:function(){i(),n()}});return a.a.createElement("form",{ref:l,className:"d-flex flex-column align-items-center flex-grow-1 position-relative",onSubmit:function(e){e.preventDefault(),s.mutate({formRef:l,id:c})}},t.map((function(e,t){return a.a.createElement(It,xt({key:t},_t(_t({},e),{},{shouldFocus:0===t})))})),a.a.createElement(oe,{title:"Save",contentType:1===t.length?"icon":"text",extensionClasses:1===t.length?"form-control-btn":"w-50 justify-content-center mt-3",theme:1===t.length?"default":"secondary",isLoading:s.isLoading,type:"submit"}))}var It=function(e){var t,n=e.name,o=e.defaultValue,c=e.shouldFocus,i=void 0!==c&&c,l=jt(Object(r.useState)(o),2),s=l[0],u=l[1],m=Object(r.useRef)();return Object(r.useEffect)((function(){var e;null!=m&&m.current&&i&&(null==m||null===(e=m.current)||void 0===e||e.select())}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{className:"sr-only",htmlFor:n},n),a.a.createElement(wt.a,{className:"form-control form-control--text",id:n,name:n,type:"text",value:s,onChange:function(e){var t=e.target.value;return u(t)},ref:m,placeholder:(t=n,t.charAt(0).toUpperCase()+t.slice(1)),onFocus:function(){return m.current.select()}}))},kt=n("8Me5"),Ct=n.n(kt);function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ut(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ft(e){var t=e.title,n=e.subtitle,o=void 0===n?"Save when ready":n,c=e.children,i=Dt(e,["title","subtitle","children"]),l=Lt(Object(r.useState)(!1),2),s=l[0],u=l[1],m=Object(r.useContext)(x).userRole,d=function(){return u(!s)};return a.a.createElement("div",{className:"editable d-flex align-items-baseline position-relative"},a.a.createElement("div",{className:"editable__content"},c),"admin"===m&&a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"editable__toggle btn btn-link icon-wrapper icon-wrapper--secondary icon-wrapper--interactive stretched-link ml-3",onClick:d,style:{"--size":25}},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--10 text-secondary",src:Ct.a})),a.a.createElement(ne,{title:t,subtitle:o,modalOpen:s,toggleModal:d},a.a.createElement(Pt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({toggleModal:d},i)))))}var Mt=n("iae6");function Tt(){return(Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zt(e){var t=e.loading,n=e.children,r=e.loaderSize,o=void 0===r?40:r,c=e.classes,i=void 0===c?{}:c,l=i.loaderClasses,s=void 0===l?"position-absolute d-flex":l,u=i.defaultClasses,m=void 0===u?"":u;return a.a.createElement(d.a,{initial:!1},t?a.a.createElement(p.a.div,Tt({key:"loader",className:s},h),a.a.createElement(Mt.a,{color:"inherit",size:o})):a.a.createElement(p.a.div,Tt({key:"default",className:m},h),n))}function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Bt(e){var t=e.toggleSlideIn,n=e.children,r=e.domElement,c=e.variant,i=void 0===c?"default":c,l=function(){return a.a.createElement("div",{key:"slide-in",className:"slide-in slide-in--".concat(i)},a.a.createElement(p.a.div,qt({className:"slide-in__overlay",onClick:t},v)),a.a.createElement(p.a.article,qt({key:"slide-in__content",className:"slide-in__content"},y),a.a.createElement("div",{className:"container-fluid d-flex flex-grow-1"},n)))};return r?Object(o.createPortal)(l(),r):l()}var Qt=n("de8u");function $t(e){var t=e.isLoading,n=e.children;return a.a.createElement(d.a,null,t?a.a.createElement(p.a.div,v,a.a.createElement(Qt.a,{color:"secondary"})):a.a.createElement("div",{key:"children"},n))}function Vt(e){var t=e.children;return a.a.createElement("main",{className:"main-content"},a.a.createElement("section",{className:"pane py-5 py-lg-10"},a.a.createElement("div",{className:"container-fluid"},t)))}var Ht=n("X931"),Wt=n.n(Ht);function Xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kt(e){var t=e.users,n=e.project,o=Xt(Object(r.useState)(!1),2),c=o[0],i=o[1],l=function(){return i(!c)};return a.a.createElement("div",{className:"position-relative ml-2"},a.a.createElement("button",{className:"btn btn-link user user--lg user--add",type:"button",onClick:l},a.a.createElement("span",{className:"user__avatar"},a.a.createElement("div",{className:"user__initials"},a.a.createElement(f.a,{wrapper:"svg",className:"user__icon icon icon--12 mt-0",src:Wt.a})))),a.a.createElement(ne,{title:"Select users",subtitle:"Choose some users to collaborate with.",modalOpen:c,toggleModal:l},a.a.createElement(Zt,{users:t,project:n,toggleModal:l})))}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zt(e){var t=e.users,n=e.project,o=e.toggleModal,c=Jt(Object(r.useState)(""),2),l=c[0],s=c[1],m=Jt(Object(r.useState)(0),2),d=m[0],p=m[1],f=Object(u.a)(pt,nt),g=f.data,v=void 0===g?[]:g,b=f.isLoading,y=function(e,t,n){var r=n.toLowerCase(),a=t.map((function(e){return e.email}));return e.filter((function(e){var t=e.email;return!a.includes(t)})).filter((function(e){var t=e.email,n=e.display;return t.toLowerCase().includes(r)||n.toLowerCase().includes(r)}))}(v,t,l),h=Object(r.useRef)(),E=Object(i.b)(),w=Object(se.a)(rt,{onSuccess:function(){E.invalidateQueries([mt,n.id]),E.invalidateQueries(pt),h.current.select(),s("")}});return a.a.createElement("div",{className:"d-flex flex-column flex-grow-1"},a.a.createElement(Hr,{users:t,project:n,variant:"interactive",size:"lg"}),a.a.createElement("div",{className:"position-relative"},a.a.createElement("label",{className:"sr-only",htmlFor:"userQuery"},"Search name or email"),a.a.createElement("input",{className:"form-control form-control--search",id:"userQuery",name:"userQuery",placeholder:"Search name or email",type:"text",autoFocus:!0,value:l,onChange:function(e){var t=e.target.value;return s(t)},onKeyDown:function(e){if(["Enter","Tab"].includes(e.key)&&(e.preventDefault(),""!==l&&null!==d)){var t=d in y?y[d]:d;ue(t.email)&&w.mutate({projectId:n.id,email:t.email})}},autoComplete:"off",ref:h}),a.a.createElement(oe,{onClick:o,extensionClasses:"form-control-btn",contentType:"icon",theme:"default"}),a.a.createElement(tn,{filteredUsers:y,query:l,handleClick:function(e){var t=e.email;ue(t)&&w.mutate({projectId:n.id,email:t})},focusedUser:d,setFocusedUser:p,userMutationLoading:w.isLoading,globalUsersLoading:b})))}function en(){return(en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tn(e){var t,n=e.filteredUsers,r=e.query,o=e.handleClick,c=e.focusedUser,i=e.setFocusedUser,l=e.userMutationLoading,s=e.globalUsersLoading;return a.a.createElement(d.a,null,""!==r&&a.a.createElement(p.a.ul,en({},v,{className:"custom-modal__list list"}),(t={email:r,organisation:r,display:"New user",userColor:"291, 81%, 53%"},n.length>0?n.map((function(e,t){return a.a.createElement(p.a.li,en({},v,{key:e.id,className:"list__item vr-3"}),a.a.createElement(Xr,{user:e,userIndex:t,handleClick:o,setFocusedUser:i,isFocused:t===c&&r,isLoading:l}))})):s?void 0:a.a.createElement(p.a.li,en({},v,{key:"New user",className:"list__item is-focused vr-3"}),a.a.createElement(Xr,{user:t,userIndex:t,handleClick:o,setFocusedUser:i,isFocused:r.length,isLoading:l})))))}var nn=n("0QAq"),rn=n.n(nn);function an(e){var t=e.project,n=e.selected,r=e.updateSelected,o=t.title,c=t.projectImages,i=t.users,s=t.author,u=t.id;return a.a.createElement(l.b,{to:"projects/".concat(u),title:o,className:"card card--link card--product ".concat(n.includes(u)&&"is-selected")},a.a.createElement(dn,{projectImages:c}),a.a.createElement("div",{className:"card-body"},a.a.createElement("div",{className:"d-flex flex-column"},a.a.createElement("p",{className:"mb-2"},o||"Add a nice title"),a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement(Hr,{users:i,project:{author:s},layout:"minimal"})))),a.a.createElement("div",{className:"card__select"},a.a.createElement("div",{className:"card__select-toggle",onClick:function(e){e.preventDefault(),r(u)}},a.a.createElement(f.a,{wrapper:"svg",className:"card__select-icon icon icon--8",src:rn.a}))))}var on=n("X8eM"),cn=n.n(on);function ln(){return(ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mn(e){var t=e.setNewProjectId,n=sn(Object(r.useState)(null),2),o=n[0],c=n[1],l=sn(Object(r.useState)(!1),2),s=l[0],m=l[1],g=Object(i.b)(),v=Object(u.a)([mt,o],(function(){return Be({projectId:o})}),{enabled:!!o}).data;Object(r.useEffect)((function(){t(o)}),[o]);var b=Object(se.a)(Qe,{onSuccess:function(e){var t=e.id;return c(t)}}),y=Object(se.a)(He,{onSuccess:function(){return w()}}),E=function(){m(!s),s||b.mutate(),s&&(setTimeout((function(){c(null)}),250),w())},w=function(){return g.invalidateQueries(ut)};return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a.button,ln({},h,{key:"add-project",type:"button",className:"icon-wrapper icon-wrapper--interactive icon-wrapper--secondary btn btn-link btn--add btn--add-right",style:{"--size":75},onClick:E}),a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--30 text-secondary",src:cn.a})),a.a.createElement(d.a,null,s&&a.a.createElement(fn,{project:v,updateProject:function(e){return y.mutate({formRef:e,id:o})},toggleSlideIn:E})))}function dn(e){var t=e.projectImages[0]||{},n=t.phases,r=void 0===n?[]:n,o=t.title,c=(r[r.length-1]||{}).image;return a.a.createElement("div",{className:"card__image border m-2"},c&&a.a.createElement("img",{className:"card-img-top",src:c.thumbnail,srcSet:"".concat(c.thumbnailRetina," 2x"),alt:o}),!c&&a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--48 text-muted--40",src:Ie.a}))}function pn(){return(pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fn(e){var t=e.project,n=void 0===t?{}:t,o=e.updateProject,c=e.toggleSlideIn,i=n.id,l=void 0===i?null:i,s=n.title,u=void 0===s?"":s,m=n.projectImages,g=void 0===m?[]:m,v=n.users,b=void 0===v?[]:v,y=Object(r.useRef)();return a.a.createElement(Bt,{toggleSlideIn:c,domElement:document.body},a.a.createElement("form",{ref:y,method:"POST",className:"slide-in__form",onSubmit:function(e){e.preventDefault(),c()}},a.a.createElement("div",{className:"slide-in__header d-flex align-items-center pt-6 pt-md-12 pb-3"},a.a.createElement("label",{className:"sr-only",htmlFor:"projectTitle"},u),a.a.createElement("input",{type:"text",className:"form-control form-control--clear text--xl",id:"projectTitle",name:"title",placeholder:"The project name",onBlur:function(){return o(y)},autoFocus:!0}),a.a.createElement("button",{type:"button",className:"slide-in__close btn btn-link ml-auto","data-dismiss":"modal","aria-label":"Close",onClick:c,tabIndex:"-1"},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--14",src:O.a}))),a.a.createElement("div",{className:"slide-in__body pt-3 pb-12"},a.a.createElement("div",{className:"row gutters-2"},a.a.createElement("div",{className:"col-6"},a.a.createElement("label",{className:"sr-only",htmlFor:"projectDescription"},"What's this project about?"),a.a.createElement(wt.a,{className:"form-control form-control--text form-control--clear mb-10",id:"projectDescription",name:"description",placeholder:"What's this project about?",onBlur:function(){return o(y)}})),a.a.createElement("div",{className:"col-auto d-flex align-items-baseline ml-auto"},a.a.createElement(Hr,{users:b,project:n,size:"lg"}),a.a.createElement(Kt,{users:b,project:n}))),a.a.createElement(ht,{projectId:l,projectImages:g},(function(e){var t=e.updateProjectImages,n=e.isLoading;return a.a.createElement(d.a,null,g.map((function(e,r){return a.a.createElement(gn,{key:e.id,projectImage:e,projectImageIndex:r,updateProjectImages:t,isLoading:n})})))}))),a.a.createElement("div",{className:"slide-in__footer pb-6 pb-md-12"},a.a.createElement("div",{className:"row gutters-0 w-100"},a.a.createElement("div",{className:"col-12 col-lg-1 ml-auto"},a.a.createElement("button",{type:"submit",className:"slide-in__btn btn btn-block btn-secondary d-flex align-items-center justify-content-center"},a.a.createElement(p.a.span,{className:"btn-text"},a.a.createElement("span",null,"Save"))))))))}var gn=function(e){var t=e.projectImage,n=e.projectImageIndex,r=e.updateProjectImages,o=e.isLoading,c=t.title,i=t.id,l=t.phases,s=void 0===l?[]:l,u=(s[s.length-1]||{}).image;return a.a.createElement(p.a.div,pn({layout:!0},E(n),{className:"col-12 col-md-6 col-lg-4 col-xl-3 col-xxl-2",key:i}),a.a.createElement("div",{className:"dropzone__container"},a.a.createElement("img",{className:"dropzone__image img-fluid",src:u.thumbnail,srcSet:"".concat(u.thumbnailRetina," 2x"),alt:c}),a.a.createElement("button",{type:"button",className:"btn btn-link dropzone__image-delete p-0",onClick:function(e){e.stopPropagation(),r("delete",{projectImageIds:[i]})}},a.a.createElement("div",{className:"dropzone__image-delete-icon icon-wrapper icon-wrapper--danger mx-auto",style:{"--size":50}},a.a.createElement(zt,{loading:o,loaderSize:20,classes:{loaderClasses:"position-absolute d-flex text-danger"}},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--14 text-danger mt-0",src:O.a}))))))},vn=n("SwPm"),bn=n.n(vn),yn=n("1zgo"),hn=n.n(yn);function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wn(e){var t=e.projects,n=e.newProjectId,o=W(),c=o.selected,l=o.updateSelected,s=o.resetSelected,u=Object(r.useContext)(x).currentUser,m=Object(i.b)(),f=Object(se.a)(Ve,{onSuccess:function(){m.invalidateQueries(ut),s()}}),g=Object(se.a)($e,{onSuccess:function(){m.invalidateQueries(ut),s()}}),b=[{title:"Leave",theme:"warning",hasPermission:["user","basic"],icon:bn.a,mutation:function(){return f.mutate({projectIds:c,userId:u.id})},isLoading:f.isLoading},{title:"Archive",theme:"secondary",hasPermission:["admin"],icon:hn.a},{title:"Remove",theme:"danger",hasPermission:["admin"],icon:O.a,iconSize:10,mutation:function(){return g.mutate({projectIds:c})},isLoading:g.isLoading}];return a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",{className:"h5 text-white mb-6"},"Your projects"),a.a.createElement(d.a,null,0===t.length&&a.a.createElement(p.a.p,En({},v,{className:"text-white mb-0 position-absolute"}),"You don't have any projects yet")),a.a.createElement("div",{className:"row row--equalized gutters-5 ".concat(c.length>0&&"has-selections")},a.a.createElement(d.a,null,t.filter((function(e){return e.id!==n})).map((function(e,t){return a.a.createElement(p.a.div,En({},E(t),{key:e.id,className:"col-12 col-md-6 col-lg-4 col-xl-3 col-xxl-2",layout:!0}),a.a.createElement(an,{project:e,selected:c,updateSelected:l}))})))),a.a.createElement(d.a,null,c.length>0&&a.a.createElement(_,{selected:c,resetSelected:s,actions:b})))}function jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xn(e){var t=e.title,n=e.description,o=e.users,c=e.id,l=e.author,s=e.email,u={id:c,author:l,email:s},m=Object(r.useContext)(x).userRole,d=Object(i.b)(),p=function(){d.invalidateQueries([mt,c])};return a.a.createElement("div",{className:"row mb-6"},a.a.createElement("div",{className:"col-12 col-lg-6"},a.a.createElement("div",{className:"".concat("admin"===m&&"editable"," d-flex align-items-center mb-2")},a.a.createElement(Ft,{title:"Editing title",fields:[{name:"title",defaultValue:t}],mutation:He,mutationId:c,mutationOnSuccess:p},a.a.createElement("h1",{className:"h5 mb-0 text-white"},t||"Add a nice title"))),a.a.createElement("div",{className:"".concat("admin"===m&&"editable"," d-flex align-items-center mb-2")},a.a.createElement(Ft,{title:"Editing description",fields:[{name:"description",defaultValue:n}],mutation:He,mutationId:c,mutationOnSuccess:p},a.a.createElement("p",{className:"text-muted--70 mb-0"},n?a.a.createElement("span",null,n):a.a.createElement("span",{className:"text-muted--40"},"What's this project about? Set the context, the goals, the constraints"))))),a.a.createElement("div",{className:"col-auto d-flex align-items-baseline ml-auto"},a.a.createElement(Hr,{users:o,project:u,size:"lg"}),"admin"===m&&a.a.createElement(Kt,{users:o,project:u})))}function Nn(){return(Nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _n(e){var t=e.projectImage,n=e.projectId,r=e.selected,o=e.updateSelected,c=t.id,s=t.title,u=t.phases,m=void 0===u?[]:u,d=(m[m.length-1]||{}).image,g=Object(i.b)();return a.a.createElement("article",{className:"card card--link card--product ".concat(r.includes(c)&&"is-selected")},a.a.createElement(l.b,{to:"/projects/".concat(n,"/review/").concat(c),title:s},a.a.createElement("div",{className:"card__image border m-2"},a.a.createElement("img",{className:"card-img-top",src:d.thumbnail,srcSet:"".concat(d.thumbnailRetina," 2x"),alt:s}))),a.a.createElement("div",{className:"card-body"},a.a.createElement(Ft,{title:"Editing image title",fields:[{name:"title",defaultValue:s}],mutation:Ge,mutationId:c,mutationOnSuccess:function(){g.invalidateQueries([mt,n])}},a.a.createElement(p.a.p,Nn({},v,{className:"mb-0"}),s))),a.a.createElement("div",{className:"card__select"},a.a.createElement("div",{className:"card__select-toggle",onClick:function(e){e.preventDefault(),o(c)}},a.a.createElement(f.a,{wrapper:"svg",className:"card__select-icon icon icon--8",src:rn.a}))))}function Sn(){return(Sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pn(e){var t=e.projectImages,n=e.projectId,o=W(),c=o.selected,l=o.updateSelected,s=o.resetSelected,u=Object(i.b)(),m=Object(r.useContext)(x).userRole,p=Object(se.a)(Je,{onSuccess:function(){u.invalidateQueries([mt,n]),s()}}),f=[{title:"Remove",theme:"danger",hasPermission:["admin"],icon:O.a,iconSize:10,mutation:function(){return p.mutate({projectId:n,projectImageIds:c})},isLoading:p.isLoading}];return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"".concat(c.length>0&&"has-selections")},"admin"===m?a.a.createElement(ht,{projectId:n,projectImages:t,positition:"right"},(function(){return a.a.createElement(In,{projectImages:t,projectId:n,selected:c,updateSelected:l})})):a.a.createElement("div",{className:"row gutters-5"},a.a.createElement(In,{projectImages:t,projectId:n,selected:c,updateSelected:l}))),a.a.createElement(d.a,null,c.length>0&&a.a.createElement(_,{selected:c,resetSelected:s,actions:f})))}var In=function(e){var t=e.projectImages,n=e.projectId,r=e.selected,o=e.updateSelected;return a.a.createElement(d.a,null,t.map((function(e,t){return a.a.createElement(p.a.div,Sn({},E(t),{key:e.id,className:"col-12 col-md-6 col-lg-4 col-xl-3 col-xxl-2",layout:!0}),a.a.createElement(_n,{projectImage:e,projectId:n,selected:r,updateSelected:o}))})))};var kn=n("668i");function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function An(e){var t=e.xPercent,n=e.yPercent,o=e.author,c=e.commentIndex,i=e.commentOpen,l=e.toggleComment,s=e.children,u=Object(r.useContext)(x).currentUser,m=o||u;return a.a.createElement(kn.a,{onClickAway:function(){i&&l()}},a.a.createElement(p.a.div,{layout:!0,transition:{duration:.1},className:"review__interaction",style:{"--x":t,"--y":n}},a.a.createElement(p.a.button,Cn({},h,{className:"review__marker icon-wrapper icon-wrapper--secondary btn btn-link text-reset",style:{"--theme":"".concat(m.userColor)},onClick:l}),c&&a.a.createElement("span",{className:"text--xs"},c)),a.a.createElement("div",null,s)))}function Rn(e){return function(e){if(Array.isArray(e))return Dn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Un(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||Un(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(e,t){if(e){if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(e,t):void 0}}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fn(e){var t=e.comment,n=e.commentIndex,o=e.globalUsers,c=e.setReplyToUser,i=e.renderAuthor,l=void 0!==i&&i,s=t.author,u=t.created,m=t.comment,d=t.comments,p=Ln(Object(r.useState)(!1),2),f=p[0],g=p[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"comment"},l&&a.a.createElement("div",{className:"d-flex align-items-center mb-2"},a.a.createElement(Qn,{user:s}),a.a.createElement(Vn,{title:s.display,subtitle:"/ ".concat(s.organisation),layout:"horizontal",size:"sm"}),void 0!==n&&a.a.createElement("div",{className:"ml-auto icon-wrapper icon-wrapper--secondary"},a.a.createElement("span",{className:"text--sm text-secondary"},n+1))),function(){var e=Rn(m.matchAll(/@\[[^\]]*\]\{[0-9]+\}/gi)),t=m.split(/@\[[^\]]*\]\{[0-9]+\}/gi);return a.a.createElement("p",{className:"lh--md"},t.map((function(t,n){var r;return n in e&&(r=o.find((function(t){return e[n][0].includes(t.display)}))),a.a.createElement(a.a.Fragment,{key:n},a.a.createElement("span",{className:"comment__content"},"".concat(t," "))," ",r&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"comment__mention mentions__mention px-1",style:{"--theme":r.userColor}},a.a.createElement("span",null,"@",r.display))," "))})))}(),a.a.createElement("div",{className:"d-flex align-items-center mt-1"},a.a.createElement("p",{className:"comment__created text-muted--60 mb-0 hr-2"},u),a.a.createElement("p",{className:"comment__agree text-muted--60 mb-0 hr-2 font-weight-normal"},"7 agree"),a.a.createElement("button",{className:"comment__reply-toggle btn btn-link text-muted--60 mb-0 hr-2 font-weight-normal",onClick:function(){return c(s)}},a.a.createElement("span",{className:"btn-text text-white"},"Reply")),d.length>0&&a.a.createElement("button",{className:"comment__replies-toggle btn btn-link text-muted--60 mb-0 hr-2 font-weight-normal ml-auto text-white",onClick:function(){return g(!f)}},f?"Hide":"Show"," ",d.length," replies")),d.length>0&&f&&a.a.createElement("div",{className:"comment__replies"},d.map((function(e){return a.a.createElement(Fn,{key:e.id,comment:e,globalUsers:o,setReplyToUser:c,renderAuthor:!0})})))))}var Mn=n("qzzo"),Tn=n.n(Mn),zn=n("qSnX"),qn=n.n(zn);function Bn(){return(Bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qn(e){var t=e.user,n=e.project,r=e.variant,o=void 0===r?"default":r,c=e.size,l=void 0===c?"md":c,s=Object(i.b)(),u=null!=n?n:{},m=u.id,d=u.author,p=null!=t?t:{},g=p.id,v=p.email===d,b=Object(se.a)(at,{onSuccess:function(){return s.invalidateQueries([mt,m])}});return a.a.createElement("div",{className:"user user--".concat(l," user--").concat(o," ").concat(v&&"user--author")},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement($n,Bn({isLoading:b.isLoading},t),"interactive"===o&&!v&&a.a.createElement("button",{className:"user__action btn btn-link p-0",type:"button",onClick:function(){return b.mutate({projectId:m,userId:g})}},a.a.createElement(f.a,{wrapper:"svg",className:"user__action-icon icon icon--14",src:qn.a})))),v&&a.a.createElement("div",{className:"user__status user__status--leader"},a.a.createElement(f.a,{wrapper:"svg",className:"user__status-icon icon text-tertiary mt-0",src:Tn.a})))}var $n=function(e){var t=e.display,n=e.userColor,r=e.isLoading,o=e.children,c=t.split(" ").map((function(e){return e[0].toUpperCase()}));return a.a.createElement("div",{className:"user__avatar",style:{"--theme":n}},a.a.createElement(zt,{loading:r,loaderSize:16},a.a.createElement("span",{className:"user__initials"},c),o))},Vn=function(e){var t=e.title,n=e.subtitle,r=e.layout,o=void 0===r?"vertical":r,c=e.size,i=void 0===c?"lg":c;return a.a.createElement("div",{className:"user__info user__info--".concat(o," user__info--").concat(i," ml-2")},a.a.createElement("p",{className:"user__info-title mb-0"},t),n&&a.a.createElement("p",{className:"user__info-subtitle mb-0"},n))},Hn=a.a.createContext(),Wn=n("MqZ5");function Xn(e,t){var n=document.querySelectorAll(".mentions .mentions__mention")||[];if(n.length>0)for(var r=function(r){var a=n[r],o=a.innerHTML.replace("@","").trim(),c=e.find((function(e){return e.display===o}));a.style.setProperty("--theme",c.userColor),t&&setTimeout((function(){t.focus(),t.setSelectionRange(200,-1)}),1)},a=0;a<n.length;a++)r(a)}function Yn(e){return function(e){if(Array.isArray(e))return Kn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jn(e){var t=e.comment,n=e.setComment,o=e.mentions,c=e.setMentions,i=e.autoFocus,l=void 0!==i&&i,s=Object(u.a)(pt,nt).data,m=void 0===s?[]:s,d=Object(r.useRef)();return Object(r.useEffect)((function(){o.length>0&&null!=d&&d.current&&Xn(m,d.current)}),[o,null==d?void 0:d.current]),a.a.createElement(a.a.Fragment,null,a.a.createElement(Wn.b,{value:t,className:"mentions",id:"comment",name:"comment",placeholder:"Say something nice...",onChange:function(e){return n(e.target.value)},onClick:function(){return Xn(m)},inputRef:d,autoFocus:l},a.a.createElement(Wn.a,{trigger:"@",data:m,renderSuggestion:Gn,allowSpaceInQuery:!0,appendSpaceOnAdd:!0,className:"mentions__mention",displayTransform:function(e,t){return" @".concat(t," ")},markup:"@[__display__]{__id__}",onAdd:function(e){return c((function(t){return[].concat(Yn(t),[e])}))}})))}var Gn=function(e,t,n,r,o){return a.a.createElement("div",{className:"mention__suggestion vr-3"},a.a.createElement("button",{className:"user user--select user--xl ".concat(o&&"is-focused"),type:"button"},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement($n,e),a.a.createElement(Vn,{title:e.display,subtitle:e.organisation?e.organisation:"No organisation"}),a.a.createElement("div",{className:"user__add text-secondary rounded-circle ml-auto"},a.a.createElement(f.a,{wrapper:"svg",className:"user__add-icon icon icon--12 text-secondary",src:Wt.a})))))};function Zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tr(e){var t=e.replyTo,n=e.commentId,o=e.setReplyToUser,c=Zn(Object(r.useState)(),2),l=c[0],s=c[1],u=Zn(Object(r.useState)([]),2),m=u[0],d=u[1];Object(r.useEffect)((function(){s("@[".concat(t.display,"]{").concat(t.id,"} ")),d([t.id])}),[t]);var p=Object(r.useContext)(x).currentUser,f=Object(i.b)(),g=Object(r.useContext)(Hn).projectImageId,v=Object(se.a)(lt,{onSuccess:function(){f.invalidateQueries([dt,parseInt(g)]),o(null)}});return a.a.createElement("form",{className:"reply",onSubmit:function(e){e.preventDefault(),v.mutate({commentId:n,reply:l,mentioned:m})}},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement(Qn,{user:p}),a.a.createElement(Vn,{title:p.display,subtitle:"/ ".concat(p.organisation),layout:"horizontal",size:"sm"})),a.a.createElement("div",{className:"position-relative"},a.a.createElement(Jn,{comment:l,setComment:s,mentions:m,setMentions:d}),a.a.createElement(oe,{extensionClasses:"form-control-btn",type:"submit",contentType:"icon",theme:"default",isLoading:v.isLoading})))}function nr(e,t){var n,r=t.reviewPos,a=Number(t.xPercent),o=Number(t.yPercent),c=(null==e||null===(n=e.current)||void 0===n?void 0:n.getBoundingClientRect())||{},i=c.width,l=void 0===i?400:i,s=c.height,u=void 0===s?228:s,m=30,d=30;return a+l/window.innerWidth*100>100&&(m=-l-10),o+u/(window.innerHeight-r.top)*100>100&&(d=-u-10),{left:"".concat(m,"px"),top:"".concat(d,"px")}}function rr(){return(rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(n),!0).forEach((function(t){cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ur(e){var t=e.comment,n=e.commentIndex,o=e.toggleCommentAddOpen,c=sr(e,["comment","commentIndex","toggleCommentAddOpen"]),i=t.position,l=t.author,s=t.id,u=i.xPercent,m=i.yPercent,p=ir(Object(r.useState)(!1),2),f=p[0],g=p[1],v=function(){f||o(),g(!f)};return ee(f,g),a.a.createElement(An,{xPercent:u,yPercent:m,author:l,commentIndex:n+1,commentOpen:f,toggleComment:v},a.a.createElement(d.a,null,f&&a.a.createElement(mr,rr({key:s},or({comment:t,toggleComment:v},c)))))}var mr=function(e){var t=e.comment,n=e.toggleComment,o=e.reviewRef,c=sr(e,["comment","toggleComment","reviewRef"]),i=t.position,l=t.author,s=ir(Object(r.useState)(i),2),u=s[0],m=s[1],d=ir(Object(r.useState)(),2),g=d[0],v=d[1],y=Object(r.useRef)();return Object(r.useEffect)((function(){i&&m((function(){return i.reviewPos=o.current.getBoundingClientRect(),nr(y,i)}))}),[i]),a.a.createElement(p.a.div,{className:"review__custom-modal custom-modal",style:{"--left":u.left,"--top":u.top}},a.a.createElement(p.a.div,rr({key:"custom-modal-content",className:"custom-modal__content border p-5"},b(50)),a.a.createElement("div",{className:"custom-modal__header d-flex align-items-start"},a.a.createElement("div",{className:"d-flex align-items-center w-100"},a.a.createElement(Qn,{user:l,size:"xl"}),a.a.createElement("div",{className:"d-flex flex-column w-100 ml-3"},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("p",{className:"text--lg mb-0 lh--md"},l.display),a.a.createElement("button",{type:"button",className:"custom-modal__close btn btn-link ml-auto",onClick:n},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--12",src:O.a}))),a.a.createElement("p",{className:"text-muted--60 mb-0 text--sm lh--xs"},l.organisation)))),a.a.createElement("div",{className:"custom-modal__body d-flex mt-4"},a.a.createElement("div",{className:"d-flex flex-column w-100"},a.a.createElement(Fn,or({comment:t,setReplyToUser:v},c)),g&&a.a.createElement(tr,{replyTo:g,commentId:t.id,setReplyToUser:v})))))};function dr(){return(dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gr(e){var t=e.markerPos,n=e.phaseId,o=e.toggleCommentAddOpen,c=Object(r.useRef)(),l=Object(r.useRef)(),s=nr(l,t),u=s.left,m=void 0===u?"30px":u,d=s.top,g=void 0===d?"30px":d,v=pr(Object(r.useState)(""),2),y=v[0],h=v[1],E=pr(Object(r.useState)([]),2),w=E[0],j=E[1];ee(t,o);var N=Object(r.useContext)(x).currentUser,_=Object(i.b)(),S=Object(r.useContext)(Hn).projectImageId,P=Object(se.a)(it,{onSuccess:function(){_.invalidateQueries([dt,parseInt(S)]),o()}});return a.a.createElement(p.a.div,{layout:!0,transition:{duration:.1},ref:l,className:"review__custom-modal custom-modal",style:{"--left":m,"--top":g}},a.a.createElement(p.a.div,dr({key:"custom-modal-content",className:"custom-modal__content border p-5"},b(50)),a.a.createElement("div",{className:"custom-modal__header d-flex align-items-start"},a.a.createElement("div",{className:"d-flex align-items-center w-100"},a.a.createElement(Qn,{user:N,size:"xl"}),a.a.createElement("div",{className:"d-flex flex-column w-100 ml-3"},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("p",{className:"text--lg mb-0 lh--md"},"Add a comment"),a.a.createElement("button",{type:"button",className:"custom-modal__close btn btn-link ml-auto",onClick:o},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--12",src:O.a}))),a.a.createElement("p",{className:"mb-0 text--md lh--md"},a.a.createElement("span",{className:"text-muted--60"},"Comment or"),a.a.createElement("span",{className:"text-secondary"}," @mention ")," ",a.a.createElement("span",{className:"text-muted--60"},"someone"))))),a.a.createElement("div",{className:"custom-modal__body d-flex mt-4"},a.a.createElement("form",{ref:c,className:"d-flex flex-column align-items-center flex-grow-1",onSubmit:function(e){e.preventDefault(),y.length>0&&P.mutate({userId:N.id,phaseId:n,comment:y.trim(),mentioned:w,position:t})}},a.a.createElement("label",{className:"sr-only",htmlFor:"comment"},"Add a comment"),a.a.createElement("div",{className:"position-relative w-100"},a.a.createElement(Jn,{comment:y,setComment:h,mentions:w,setMentions:j,autoFocus:!0}),a.a.createElement(oe,{extensionClasses:"form-control-btn",type:"submit",contentType:"icon",theme:"default",isLoading:P.isLoading}))))))}var vr=n("ukBR"),br=n.n(vr),yr=n("eesx"),hr=n.n(yr);function Er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jr(e){var t=e.title,n=e.description,o=e.phase,c=e.commentsPanelOpen,l=e.toggleCommentsPanel,s=Er(Object(r.useState)(!1),2),u=s[0],m=s[1],d=Object(i.b)(),p=Object(r.useContext)(x),g=p.currentUser,v=p.userRole,b=Object(r.useContext)(Hn).projectImageId,y=function(){return m(!u)};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"bar bar--review"},a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"row gutters-0 justify-content-between align-items-center"},a.a.createElement("div",{className:"col-4 d-flex flex-column"},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("p",{className:"text--sm mb-0"},"Project"),a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--8 text-white text-muted--50 mx-1",src:br.a}),a.a.createElement("p",{className:"text--sm mb-0 text-truncate",style:{maxWidth:120}},t)),a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("p",{className:"text--xs text-muted--70 mb-0"},"1 of 2"),a.a.createElement("span",{className:"mx-1 text-muted--20"},"/"),a.a.createElement("p",{className:"text--xs text-muted--70 mb-0"},"Phase ",o))),a.a.createElement("div",{className:"col-auto d-flex align-items-center"},a.a.createElement("div",{className:"position-relative hr-2"},a.a.createElement("button",{className:"bar__action-btn ".concat(u&&"is-active"," btn btn-link text-rest"),onClick:y},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--16",src:Ct.a})),a.a.createElement(ne,{title:"Editing image",subtitle:"Save when ready",modalOpen:u,toggleModal:y,renderOnBody:!1,center:!1,extensionClasses:"bar__edit-modal"},a.a.createElement(Pt,{toggleModal:y,fields:[{name:"title",defaultValue:t},{name:"description",defaultValue:n}],mutation:Ge,mutationId:b,mutationOnSuccess:function(){d.invalidateQueries([dt,Number(b)])}}))),a.a.createElement("button",{className:"bar__action-btn ".concat(c&&"is-active"," btn btn-link text-rest hr-2"),onClick:l},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--16",src:hr.a}))),a.a.createElement("div",{className:"col-4 d-flex justify-content-end"},a.a.createElement(Qn,{user:g,size:"lg"}),"admin"===v&&a.a.createElement(oe,{title:"Next phase",type:"button",extensionClasses:"ml-2 px-4"}))))))}function Or(e){var t=e.allImages;Z("keyup",(function(e){"ArrowLeft"===e.key&&i&&u("prev");"ArrowRight"===e.key&&l&&u("next")}));var n=Object(s.g)(),o=Object(r.useContext)(Hn).projectImageId,c=t.indexOf(Number(o)),i=t[0===c?t.length-1:c-1],l=t[c===t.length-1?0:c+1];var u=function(e){"prev"===e&&n.push(i.toString()),"next"===e&&n.push(l.toString())};return a.a.createElement("div",{className:"pagination"},a.a.createElement("div",{className:"pagination__btn-wrapper pagination__btn-wrapper--prev"},a.a.createElement("button",{className:"pagination__btn pagination__btn--prev btn btn-link text-reset",type:"button",onClick:function(){return u("prev")}},a.a.createElement(f.a,{wrapper:"svg",className:"pagination__icon icon icon--12",src:br.a}))),a.a.createElement("div",{className:"pagination__btn-wrapper pagination__btn-wrapper--next"},a.a.createElement("button",{className:"pagination__btn pagination__btn--next btn btn-link text-reset",type:"button",onClick:function(){return u("next")}},a.a.createElement(f.a,{wrapper:"svg",className:"pagination__icon icon icon--12",src:br.a}))))}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _r(){return(_r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Sr(e){var t=e.comments,n=e.commentsPanelOpen,r=e.toggleCommentsPanel,o=e.globalUsers;return ee(n,r),a.a.createElement(p.a.div,_r({},w,{className:"panel panel--comments"}),a.a.createElement("div",{className:"panel__body"},a.a.createElement("div",{className:"d-flex align-items-baseline justify-content-between mb-6"},a.a.createElement("h5",{className:"text-capitalize"},"All comments"),a.a.createElement("button",{type:"button",className:"panel__close btn btn-link ml-auto",onClick:r},a.a.createElement(f.a,{wrapper:"svg",className:"icon icon--12",src:O.a}))),a.a.createElement("div",{className:"d-flex flex-column w-100"},null==t?void 0:t.reverse().map((function(e,t){return a.a.createElement(Pr,{key:t,comment:e,commentIndex:t,globalUsers:o})})),0===t.length&&a.a.createElement("p",{className:"text-muted--70"},"No comments yet"))))}var Pr=function(e){var t=e.comment,n=e.commentIndex,o=e.globalUsers,c=xr(Object(r.useState)(),2),i=c[0],l=c[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(Fn,{comment:t,commentIndex:n,setReplyToUser:l,renderAuthor:!0,globalUsers:o}),i&&a.a.createElement(tr,{replyTo:i,commentId:t.id,setReplyToUser:l}))};function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach((function(t){Cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ur(e){var t=e.title,n=e.phases,o=void 0===n?[]:n,c=Lr(e,["title","phases"]),i=Object(u.a)(pt,nt).data,l=void 0===i?[]:i,s=o[o.length-1]||{},m=s.image,f=s.id,g=s.comments,v=s.phase,b=Object(r.useContext)(x).currentUser,y=Object(r.useRef)(),h=Ar(Object(r.useState)(),2),E=h[0],j=h[1],O=Ar(Object(r.useState)(!1),2),N=O[0],_=O[1],S=Ar(Object(r.useState)(!1),2),P=S[0],I=S[1],k=function(){return j(null)},C=function(){return I(!P)};return a.a.createElement(p.a.div,{layout:!0,className:"review position-relative mx-n12 mb-3 mt-n10"},a.a.createElement(p.a.div,{className:"review__image-wrapper position-relative",ref:y,initial:{width:"100%"},animate:{width:P?"calc(100% - 400px)":"100%",transition:P?w.animate.transition:w.exit.transition}},a.a.createElement("img",{className:"review__image img-fluid w-100",src:m.original,srcSet:"".concat(m.original," 2x"),alt:t,onClick:function(e){var t=e.clientX,n=e.clientY;if(b.authenticated){var r=null==y?void 0:y.current.getBoundingClientRect();j((function(){return{xPercent:(t-10)/r.width*100,yPercent:(n-r.top-10)/r.height*100,reviewPos:r}}))}else _(!0)}}),null==g?void 0:g.map((function(e,t){return a.a.createElement(ur,{key:e.id,comment:e,commentIndex:t,reviewRef:y,globalUsers:l,toggleCommentAddOpen:k})})),a.a.createElement(d.a,null,E&&a.a.createElement(An,kr({},E),a.a.createElement(gr,{markerPos:E,phaseId:f,toggleCommentAddOpen:k}))),a.a.createElement(Yr,{securityModalOpen:N,setSecurityModalOpen:_}),a.a.createElement(Or,c)),a.a.createElement(jr,kr(kr({},c),{},{title:t,phase:v,commentsPanelOpen:P,toggleCommentsPanel:C})),a.a.createElement(d.a,null,P&&a.a.createElement(Sr,{comments:g,commentsPanelOpen:P,toggleCommentsPanel:C,globalUsers:l})))}var Dr={login:"/",signup:"/signup",projects:"/projects"},Fr=[{name:"login",path:"/",component:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Tr,null),a.a.createElement("main",{className:"main-content"},a.a.createElement(q,null),a.a.createElement("div",{className:"pane"},a.a.createElement("div",{className:"pane__panel panel panel--login"},a.a.createElement("div",{className:"panel__body"},a.a.createElement("h1",{className:"text-uppercase text-white mb-0"},"Login"),a.a.createElement("p",{className:"text-muted--70 text-white mb-6"},"Login with your e-mail and password"),a.a.createElement(Gr,null))))))}},{name:"signup",path:"/signup",component:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Tr,null),a.a.createElement("main",{className:"main-content"},a.a.createElement(q,null),a.a.createElement("div",{className:"pane"},a.a.createElement("div",{className:"pane__panel panel panel--login"},a.a.createElement("div",{className:"panel__body"},a.a.createElement("h1",{className:"text-uppercase text-white mb-0"},"Sign up"),a.a.createElement("p",{className:"text-muted--70 text-white mb-6"},"Sign up with your e-mail and password"),a.a.createElement(ea,null))))))}},{name:"project-overview",path:"/projects",component:function(){var e=jn(Object(r.useState)(),2),t=e[0],n=e[1];K("Projects");var o=Object(r.useContext)(x),c=o.currentUser,i=o.userRole,l=Object(u.a)(ut,(function(){return qe({userId:null==c?void 0:c.id})}),{enabled:!(null==c||!c.id)}),s=l.isLoading,m=l.data,d=void 0===m?[]:m;return a.a.createElement(Vt,null,a.a.createElement($t,{isLoading:s},"admin"===i&&a.a.createElement(mn,{setNewProjectId:n}),a.a.createElement(wn,{projects:d,newProjectId:t})))}},{name:"project-detail",path:"/projects/:id",component:function(){var e=Object(s.i)().id,t=Object(u.a)([mt,parseInt(e)],(function(){return Be({projectId:e})})),n=t.isLoading,r=t.data,o=void 0===r?{}:r;K(null==o?void 0:o.title,[o]);var c=o.title,i=o.description,l=o.users,m=o.id,d=o.author,p=o.email,f=o.projectImages;return a.a.createElement(Vt,null,a.a.createElement($t,{isLoading:n},a.a.createElement(xn,{title:c,description:i,users:l,id:m,author:d,email:p}),a.a.createElement(Pn,{projectImages:f,projectId:m})))}},{name:"project-review",path:"/projects/:id/review/:id",component:function(){var e=Object(s.i)().id,t=Object(u.a)([dt,parseInt(e)],(function(){return Ye({projectImageId:e})})),n=t.isLoading,r=t.data,o=void 0===r?{}:r;return K(null==o?void 0:o.title,[o]),a.a.createElement(Hn.Provider,{value:{projectImageId:e}},a.a.createElement(Vt,null,a.a.createElement($t,{isLoading:n},a.a.createElement(Ur,o))))}}];function Mr(){return(Mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tr(){return a.a.createElement(p.a.header,Mr({className:"main-header"},v),a.a.createElement("div",{className:"container-fluid px-5 pt-5 px-lg-6 pt-lg-6 px-xl-12 pt-xl-12"},a.a.createElement("div",{className:"main-header__logo logo"},a.a.createElement(l.b,{className:"logo__link text-reset",to:Dr.login,title:"Parallel Dashboard"},a.a.createElement("h2",{className:"logo__title text-uppercase mb-0"},"Parallel"),a.a.createElement("p",{className:"logo__subtitle text-uppercase font-weight-light mt-n1"},"Dashboard")))))}function zr(){return(zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qr(){var e=Object(s.g)(),t=Object(r.useContext)(x).setCurrentUser,n=Object(se.a)(Me,{onSuccess:function(){e.push(Dr.login),t(null),sessionStorage.removeItem("userId"),Object(m.b)(a.a.createElement(D,{message:"Successfully logged out!",appearance:"success"}))},onError:function(){return Object(m.b)(a.a.createElement(D,{message:"Something went wrong!",appearance:"danger"}))}});return a.a.createElement(p.a.header,zr({className:"main-header main-header--projects"},v),a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"main-header__wrapper d-flex align-items-end"},a.a.createElement("div",{className:"main-header__logo logo"},a.a.createElement(l.b,{className:"logo__link text-reset",to:Dr.projects,title:"Parallel Dashboard"},a.a.createElement("h2",{className:"logo__title text-uppercase text-white mb-0"},"Parallel"),a.a.createElement("p",{className:"logo__subtitle text-uppercase text-white font-weight-light mt-n1"},"Dashboard"))),a.a.createElement("div",{className:"main-header__nav ml-auto"},a.a.createElement("ul",{className:"nav nav--primary"},a.a.createElement("li",{className:"nav-item"},a.a.createElement("button",{href:"{{ path('app_logout') }}",title:"Logout",className:"nav-link btn btn-link text-reset",onClick:function(){return n.mutate()}},a.a.createElement("span",{className:"nav-text"},"Logout"))))))))}function Br(){return(Br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Hr(e){var t=e.users,n=e.layout,r=void 0===n?"full":n,o=Vr(e,["users","layout"]),c="minimal"===r?7:1/0;return a.a.createElement("div",{className:"row align-items-center gutters-1"},a.a.createElement(d.a,null,t.slice(0,c).map((function(e){return a.a.createElement(p.a.div,Br({layout:!0},h,{className:"col-auto",key:e.id}),a.a.createElement(Qn,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach((function(t){$r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({user:e},o)))})),"minimal"===r&&t.length>7&&a.a.createElement(p.a.div,Br({layout:!0},h,{className:"col-auto",key:"more"}),a.a.createElement("p",{className:"text--sm text-muted--70 ml-1"},"+ ",t.length-c))))}function Wr(){return(Wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xr(e){var t=e.user,n=e.userIndex,o=e.handleClick,c=e.isFocused,i=e.setFocusedUser,l=e.isLoading;Object(r.useEffect)((function(){c&&i(n)}),[c]),Object(r.useEffect)((function(){return function(){return i(0)}}),[]);var s=function(e){i("enter"===e?n:0)};return a.a.createElement("button",{className:"user user--select ".concat(c&&"is-focused"," user--xl"),onClick:function(){return o(t)},onMouseEnter:function(){return s("enter")},onMouseLeave:function(){return s("leave")},type:"button"},a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement($n,Wr({isLoading:l&&c},t)),a.a.createElement(Vn,{title:t.display,subtitle:t.organisation?t.organisation:"No organisation"}),a.a.createElement("div",{className:"user__add text-secondary rounded-circle ml-auto"},a.a.createElement(f.a,{wrapper:"svg",className:"user__add-icon icon icon--12 text-secondary",src:Wt.a}))))}function Yr(e){var t=e.securityModalOpen,n=e.setSecurityModalOpen,o=Object(r.useContext)(x),c=o.currentUser,i=o.userRole,l="basic"===i?"Signup":"Login",s="".concat(l," if you want to comment"),u=function(){return n(!t)};return a.a.createElement(ne,{title:l,subtitle:s,modalOpen:t,toggleModal:u},"basic"===i?a.a.createElement(ea,{currentUser:c,toggleModal:u,showLogin:!1}):a.a.createElement(Gr,{currentUser:c,toggleModal:u,showSignup:!1}))}var Kr=n("NKCw");function Jr(){return(Jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gr(e){var t,n,o=e.currentUser,c=e.toggleModal,s=e.showSignup,u=void 0===s||s,d=Object(r.useRef)();K("Login");var p=Object(i.b)(),f=Object(Kr.a)({reValidateMode:"onChange",mode:"onBlur"}),g=f.register,v=f.handleSubmit,b=f.formState.errors,y=Object(se.a)(Fe,{onSuccess:function(e){p.invalidateQueries(st),o&&c(),Object(m.b)(a.a.createElement(D,{message:"Successfully logged in!",appearance:"success"}))},onError:function(e){var t,n;Object(m.b)(a.a.createElement(D,{message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.error?"Email/password combination not found!":"Something went wrong!",appearance:"danger"})),b.email={message:"Email/password combination not found"},b.password={message:"Email/password combination not found"}}});return a.a.createElement("form",{ref:d,className:"panel__form form",onSubmit:v((function(){return y.mutate({formRef:d})})),noValidate:!0},a.a.createElement("div",{className:"row gutters-2"},a.a.createElement("div",{className:"col-12"},a.a.createElement("label",{className:"sr-only",htmlFor:"inputEmail"},"Email"),a.a.createElement("input",Jr({type:"email",className:"form-control ".concat(b.email&&"is-invalid"),id:"inputEmail",name:"email",placeholder:"Email",autoFocus:!0},g("email",{required:!0}))),b.email&&a.a.createElement("div",{className:"invalid-feedback"},null!==(t=b.email)&&void 0!==t&&t.message?b.email.message:"Please enter a valid email")),a.a.createElement("div",{className:"col-12"},a.a.createElement("label",{className:"sr-only",htmlFor:"inputPassword"},"Password"),a.a.createElement("input",Jr({type:"password",className:"form-control ".concat(b.password&&"is-invalid"),id:"inputPassword",name:"password",placeholder:"Password"},g("password",{required:!0}))),b.password&&a.a.createElement("div",{className:"invalid-feedback"},null!==(n=b.password)&&void 0!==n&&n.message?b.password.message:"Please enter a password"))),a.a.createElement("div",{className:"row gutters-2"},a.a.createElement("div",{className:"col-12 col-md"},a.a.createElement(oe,{title:"Log in",theme:"secondary",size:"md",extensionClasses:"btn-block justify-content-center",type:"submit",isLoading:y.isLoading})),u&&a.a.createElement("div",{className:"col-12 col-md"},a.a.createElement(l.b,{className:"btn btn-outline-white btn-block",to:Dr.signup,title:"sign up"},a.a.createElement("span",{className:"btn__text"},"Sign up")))))}function Zr(){return(Zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ea(e){var t=e.currentUser,n=e.toggleModal,o=e.showLogin,c=void 0===o||o,s=Object(r.useRef)();K("Signup");var u=Object(i.b)(),d=Object(Kr.a)({reValidateMode:"onChange",mode:"onBlur"}),p=d.register,f=d.handleSubmit,g=d.formState.errors,v=d.control,b=Object(Kr.b)({control:v,name:"plainPassword",defaultValue:""}),y=Object(se.a)(De,{onSuccess:function(){u.invalidateQueries(st),Object(m.b)(a.a.createElement(D,{message:"Successfully logged in!",appearance:"success"})),t&&n()},onError:function(e){500===e.response.status&&(Object(m.b)(a.a.createElement(D,{message:"This email is already in use!",appearance:"danger"})),s.current.reset())}});return a.a.createElement("form",{ref:s,className:"panel__form form",onSubmit:f((function(){return y.mutate({formRef:s,userId:null==t?void 0:t.id})})),noValidate:!0},a.a.createElement("div",{className:"row gutters-2"},a.a.createElement("div",{className:"col-md-6"},a.a.createElement("label",{className:"sr-only",htmlFor:"registration_form_username"},"Your name"),a.a.createElement("input",Zr({type:"text",id:"registration_form_username",name:"username",className:"form-control ".concat(g.username&&"is-invalid"),placeholder:"Full name"},p("username",{required:{value:!0,message:"Please enter a name"}}))),g.username&&a.a.createElement("div",{className:"invalid-feedback"},g.username.message)),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("label",{className:"sr-only",htmlFor:"registration_form_organisation"},"Organisation"),a.a.createElement("input",Zr({type:"text",id:"registration_form_organisation",name:"organisation",className:"form-control ".concat(g.organisation&&"is-invalid"),placeholder:"Organisation"},p("organisation",{required:{value:!0,message:"Please enter an organisation"}}))),g.organisation&&a.a.createElement("div",{className:"invalid-feedback"},g.organisation.message)),a.a.createElement("div",{className:"col-12"},a.a.createElement("label",{className:"sr-only",htmlFor:"registration_form_email"},"Email"),a.a.createElement("input",Zr({type:"text",id:"registration_form_email",name:"email",className:"form-control ".concat(g.email&&"is-invalid"),placeholder:"Email",value:null==t?void 0:t.email,onChange:function(){}},p("email",{required:{value:!0,message:"Please enter an email"}}))),g.email&&a.a.createElement("div",{className:"invalid-feedback"},g.email.message)),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("label",{className:"sr-only",htmlFor:"registration_form_plainPassword"},"Password"),a.a.createElement("input",Zr({type:"password",id:"registration_form_plainPassword",name:"plainPassword",className:"form-control ".concat(g.password&&"is-invalid"),placeholder:"Password"},p("plainPassword",{required:{value:!0,message:"Please enter a password"},minLength:{value:6,message:"Please enter a password of atleast 6 characters"}}))),g.plainPassword&&a.a.createElement("div",{className:"invalid-feedback"},g.plainPassword.message)),a.a.createElement("div",{className:"col-md-6"},a.a.createElement("label",{className:"sr-only",htmlFor:"login-confirm-password"},"Confirm password"),a.a.createElement("input",Zr({type:"password",className:"form-control ".concat(g.passwordConfirm&&"is-invalid"),id:"login-confirm-password",placeholder:"Confirm password",name:"passwordConfirm"},p("passwordConfirm",{required:{value:!0,message:"Please confirm your password"},validate:function(e){return e===b||"The passwords do not match"}}))),g.passwordConfirm&&a.a.createElement("div",{className:"invalid-feedback"},g.passwordConfirm.message))),a.a.createElement("div",{className:"row gutters-2"},a.a.createElement("div",{className:"col-12 col-md"},a.a.createElement(oe,{title:"Sign up",theme:"secondary",size:"md",extensionClasses:"btn-block justify-content-center",type:"submit",isLoading:y.isLoading})),c&&a.a.createElement("div",{className:"col-12 col-md"},a.a.createElement(l.b,{className:"btn btn-outline-white btn-block",to:Dr.login,title:"sign up"},a.a.createElement("span",{className:"btn__text"},"Login")))))}function ta(){return(ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){aa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ia(){return a.a.createElement(l.a,null,a.a.createElement(la,null))}var la=function(){var e=oa(Object(r.useState)(),2),t=e[0],n=e[1],o=oa(Object(r.useState)([]),2),c=o[0],i=o[1],l=oa(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",a=Object(r.useState)((function(){try{var r=window[n].getItem(e);return t&&!r&&window[n].setItem(e,t),r?JSON.parse(r):t}catch(e){return t}})),o=J(a,2),c=o[0],i=o[1],l=function(t){try{var r=t instanceof Function?t(c):t;i(r),window[n].setItem(e,JSON.stringify(r))}catch(e){throw new Error(e)}};return[c,l]}("userId",atob(window.location.search.replace("?",""))),1)[0],f=Object(s.h)(),g=Object(u.a)(st,(function(){return tt({userId:l})}),{retry:!1,onSuccess:function(e){var t;n(e),i((t=e.roles).includes(me)?"admin":t.includes(pe)?"basic":t.includes(de)?"user":void 0)}}).isLoading;return a.a.createElement(x.Provider,{value:{currentUser:t,setCurrentUser:n,userRole:c}},a.a.createElement(d.a,null,![Dr.login,Dr.signup].includes(f.pathname)&&!f.pathname.includes("review")&&a.a.createElement(qr,null)),a.a.createElement($t,{isLoading:g},a.a.createElement(d.a,{exitBeforeEnter:!0},a.a.createElement(s.d,{location:f,key:f.pathname},t&&[Dr.login,Dr.signup].includes(f.pathname)&&a.a.createElement(s.a,{to:Dr.projects}),!t&&f.pathname.includes(Dr.projects)&&a.a.createElement(s.a,{to:Dr.login}),Fr.map((function(e){var n=e.path,r=e.component,o=e.props;return a.a.createElement(s.b,{key:n,path:n,exact:!0},a.a.createElement(p.a.div,ta({key:n},v),a.a.createElement(r,ra(ra({},o),{},{currentUser:t,userRole:c}))))}))))),a.a.createElement(m.a,{hideProgressBar:!0,newestOnTop:!0,position:"bottom-left",closeButton:!1}))},sa=new c.a({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),ua=document.getElementById("app");null!==ua&&Object(o.render)(a.a.createElement(i.a,{client:sa},a.a.createElement(ia,null)),ua)},CrUY:function(e,t,n){e.exports=n.p+"img/background-login@2x.57f2a279.jpg"},H1Be:function(e,t,n){e.exports=n.p+"img/background-login.955534e8.jpg"},Km7m:function(e,t,n){},RClv:function(e,t,n){e.exports=n.p+"img/upload.47dd6e02.svg"},ScKw:function(e,t,n){e.exports=n.p+"img/danger.9f70266e.svg"},SwPm:function(e,t,n){e.exports=n.p+"img/leave.e3a2f47d.svg"},X8eM:function(e,t,n){e.exports=n.p+"img/add_project.abae0cbd.svg"},X931:function(e,t,n){e.exports=n.p+"img/add_user.912dfe06.svg"},XIP4:function(e,t,n){e.exports=n.p+"img/check-circle.799702b3.svg"},YaYb:function(e,t,n){e.exports=n.p+"img/close-white.b044adee.svg"},eesx:function(e,t,n){e.exports=n.p+"img/comment.e9876f33.svg"},qSnX:function(e,t,n){e.exports=n.p+"img/delete.cfd679bb.svg"},qzzo:function(e,t,n){e.exports=n.p+"img/star.93031288.svg"},ukBR:function(e,t,n){e.exports=n.p+"img/chevron.fd97bb8f.svg"},yqFz:function(e,t,n){e.exports=n.p+"img/add_image.b5e82dfd.svg"}});